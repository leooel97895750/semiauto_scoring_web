{"version":3,"sources":["home/components/Login.js","home/components/FileNameDropdown.js","home/components/ListItem.js","home/components/List.js","commonComponents/AccountDropdown.js","commonComponents/CommonNavbar.js","commonComponents/CommonFooter.js","home/Home.js","home/components/HiddenList.js","home/HiddenHome.js","scoring/components/ScoringNavbar.js","scoring/components/HypnogramChart.js","scoring/components/InteractiveLayer.js","scoring/components/GridLayer.js","scoring/components/functions/LinearScale.js","scoring/components/BufferedLayer.js","scoring/components/CursorLineLayer.js","scoring/components/LabelLayer.js","scoring/components/config/LinesInHypnogram.js","scoring/components/config/LabelsForHypnogram.js","scoring/components/functions/Clamp.js","scoring/components/Hypnogram.js","scoring/components/ChannelChart.js","scoring/components/EventsLayer.js","scoring/components/StageLayer.js","scoring/components/functions/formatSecond.js","scoring/components/EventInfoWindow.js","scoring/components/MultichannelChart.js","scoring/components/TimeIntervalDropdown.js","scoring/components/SignalPanel.js","scoring/EventsDataStructure.js","scoring/const.js","scoring/TimeController.js","scoring/DataManager.js","scoring/DataRequestManager.js","scoring/PauseRequestManager.js","scoring/config/FakeData.js","scoring/config/getChannelEvents.js","scoring/config/dataDisplay.js","scoring/config/channelNameToChannelId.js","scoring/config/units.js","scoring/config/channelColors.js","scoring/config/labelsForScale.js","scoring/config/constLabels.js","scoring/config/lines.js","scoring/Scoring.js","setPass/SetPassword.js","App.js","serviceWorker.js","index.js","scoring/components/css/fillStyle.module.css","scoring/components/css/hypnogramStyle.module.css","scoring/components/css/signalPanelStyle.module.css","scoring/components/css/chartLayerStyle.module.css","scoring/components/css/timeIntervalDropdownStyle.module.css"],"names":["Login","props","handleSubmit","bind","state","waitingForResponse","errorMessage","style","position","top","left","transform","Card","width","Header","as","Body","Form","onSubmit","this","Group","controlId","Label","Control","type","Alert","variant","Button","disabled","event","preventDefault","setState","axios","post","account","target","elements","formAccount","value","password","formPassword","loginResult","data","success","onLogin","msg","Component","FileNameDropdown","CustomToggle","React","forwardRef","ref","children","onClick","href","e","i","totalNumber","key","push","Dropdown","Item","eventKey","Divider","paused","onSelect","selectItem","display","Toggle","id","fileName","Menu","ListItem","marginLeft","marginRight","psgFileId","float","List","files","map","file","index","scoringTimes","name","t","window","location","filesResult","alert","history","go","console","log","psgInfo","showdata","length","AccountDropdown","item","a","onLogout","color","CommonNavbar","Navbar","bg","fixed","Brand","Collapse","className","Text","CommonFooter","fontSize","margin","Home","checkAccountAndSetState","height","undefined","result","HiddenList","ScoringNavbar","editable","hasStagesBeenLoaded","onComplete","buttonDisabled","hasAnswer","enableShowAnswerCheckbox","onChange","onShowAnswerChecked","checked","stateToShow","HypnogramChart","createRef","styles","fill","canvas","current","ctx","getContext","clearRect","lineWidth","strokeStyle","beginPath","pointX","epochToXPosition","pointY","stageToYPosition","stages","last","moveTo","lineTo","stroke","updateCanvas","InteractiveLayer","draggingButton","mouseDown","mouseMove","mouseUp","mouseLeave","preventDragHandler","mouseScroll","toChannelIdProportion","mousewheel","test","navigator","userAgent","chartLayer","onDragStart","absoluteX","absoluteY","rect","getBoundingClientRect","x","y","channelId","verticalPositionToChannelId","proportion","horizontalPositionToProportion","evt","button","dragCancel","clientX","clientY","onLeftDragStart","onRightDragStart","onLeftDrag","onRightDrag","onMouseMove","onLeftDragEnd","onRightDragEnd","pageX","pageY","wheelDelta","detail","onMouseScroll","addEventListener","preventContextMenu","removeEventListener","GridLayer","lines","verticalLines","line","xPos","secondToXPosition","second","x1","y1","bottomBoundary","x2","y2","topBoundary","strokeDasharray","dashed","horizontalLines","zoomToShow","isZoomed","yPos","valueToYPosition","leftBoundary","rightBoundary","linearScale","m","BufferedLayer","buffered","rects","cont","startX","endX","end","CursorLineLayer","redLine","LabelLayer","textBaseline","labels","label","gravityToXPosition","gravity","xOffset","yOffset","textAlign","fillStyle","font","fillText","linesInHypnogram","labelsForHypnogram","clamp","val_1","val","val_2","Hypnogram","firstTime","windowResize","mouseOnProportion","mouseOnScroll","leftSpace","rightSpace","topSpace","bottomSpace","currentEpoch","hypnogram","answer","modeArr","up","offsetWidth","offsetHeight","epoch","Math","round","jumpTo","direction","ChannelChart","nextProps","nextState","chartKey","localExtremeSearchQueue","showValuePosition","xTransform","dataY","yTransform","dataValuesX","dataValuesY","dataLength","showLocalExtreme","toFixed","arr","forEach","max","mode","getMode","sameCheck","sameCount","floor","lastX","EventsLayer","events","centerline","getChannelCenterline","from","secondFrom","interval","to","secondTo","xFrom","xLen","eventHeight","eventId","fillOpacity","bottom","editingEvent","xTo","strokeWidth","tipWidth","tipHeight","dominantBaseline","textAnchor","abs","StageLayer","transformFunction","stageTextArray","xPosition","fontWeight","formatSecond","secs","hr","min","sec","parseInt","EventInfoWindow","handleChange","find_upanddown_v1","desat","show_err","startPoint","endPoint","long","left_in","right_in","left_page","right_page","val_high_left","val_low_left","val_high_right","val_low_right","left_diff","right_diff","preData","j","left_val","right_val","nextData","onSelected","onCancel","eventInfo","getEventInfo","eventTypes","getChannelEvents","showDesat","amplitude","isLeftIn","isRightIn","eegAmps","eegAmp","error","eventAmps","eventAmp","spo2Amp","Modal","show","visible","onHide","size","aria-labelledby","centered","closeButton","Title","Footer","onDelete","timeA","timeB","desatResult","spo2","MultichannelChart","channelIdToChannelNum","proportionToXPosition","proportionToAbsoluteSecond","absoluteSecondToXPosition","isMouseAtAnyEventBoundary","getEventWhoseBoundaryIsMouseAt","getEventWhichIsMouseOn","rightDraggingStart","rightDragging","rightDraggingChannel","leftDraggingStart","leftDragging","leftDraggingChannel","leftDraggingType","eventInfoWindowEventId","eventInfoWindowVisible","document","oncontextmenu","mouseXPosition","nearestDistance","nearestEvent","eventLeftBoundaryXPosition","distance","Object","assign","nearestBoundary","eventRightBoundaryXPosition","mouseAbsoluteSecond","xPositionToAbsoluteSecond","channelHeight","interspace","halfChannelHeight","channelCenterPosition","channelNum","draggable","absoluteSecondFrom","absoluteSecondTo","addEvent","absoluteSecondStart","absoluteSecondEnd","moveCursor","dragStartProportion","absoluteSecondToProportion","newBoundary1Second","newBoundary2Second","deleteEvent","body","cursor","zoomable","zoomChannel","nextScales","scales","zoomMin","zoomMax","absoluteSecond","channelData","charts","zoom","loading","zoomScale","cid","proportionToRelativeSecond","rightDraggingStartRelativeSecond","rightDraggingRelativeSecond","oneBoundary","theOtherBoundary","cursorSecond","setEventType","defaultProps","TimeIntervalDropdown","timeIntervalDropdown","selectedItem","items","SignalPanel","splittedPanelHeight","splittedPanelResize","panel","signalPanel","split","defaultSize","minSize","maxSize","upperLoading","upperSecondFrom","upperSecondTo","upperData","preUpperData","nextUpperData","upperEvents","upperLabels","upperVerticalLines","upperHorizontalLines","upperStages","right","upperSelectItem","upperItems","upperSelectedItem","lowerLoading","lowerSecondFrom","lowerSecondTo","lowerData","preLowerData","nextLowerData","lowerEvents","lowerLabels","lowerVerticalLines","lowerHorizontalLines","lowerStages","lowerSelectItem","lowerItems","lowerSelectedItem","secondToEpochFrom","secondToEpochTo","EventsDataStructure","colorsForChannels","mappingIn","mappingOut","eventIdToEventObject","epochNumToEventId","maxEventId","eventInstance","active","epochFrom","epochTo","Set","add","nextEventId","eventIds","eventObject","channelArray","Array","mappingOutObject","timeFrom","timeTo","channelIds","epochNum","resultSet","has","priority","b","eventsToCheck","minSecondFrom","maxSecondTo","overlappedEvents","earliestEvent","currentValue","currentKey","set","eventToCheck","isActive","resultObject","overlappedEventId","delete","constants","freeze","floatToFixed","timeIntervalStringToSecond","timeIntervalString","timeIntervalSecondToString","timeIntervalSecond","10","30","60","120","180","300","600","TimeController","initializerObject","totalEpoch","upperTimeFrom","lowerTimeFrom","timeInterval","upperTimeInterval","lowerTimeInterval","cursorLine","minPagePart","theOtherPart","nextJumpSec","totalSec","over","parseFloat","theOtherOver","lastJumpSec","getCurrentEpoch","cursorRelativeToUpperTimeFrom","startTime","upperTimeTo","quotient","DataManager","channels","channelIdToChannelState","true","false","channel","upper","epochToArrayBuffer","epochsHaveNoData","checkData","halfChannelState","halfChannelIds","keys","oneChannelState","fs","pointOffset","floatArrays","floatArray","Float32Array","offset","samplesInOneEpoch","whichArray","whichIndex","pointToValue","originalHalfRange","originalMax","originalMin","center","halfRange","pow","channelState","maxZoom","minZoom","lower","DataRequestManager","runningRequests","completeRequest","results","newUpperRequests","newLowerRequests","cb","newRequests","requestUrl","upperLowerKeys","halfNewRequests","halfRunningRequestKeys","halfNewRequestsSet","runningEpochNum","abort","xhr","XMLHttpRequest","open","responseType","onload","response","toCb","setRequestHeader","send","JSON","stringify","PauseRequestManager","onStateChange","currentWindow","timer","requestQueue","currentId","sendingRequest","toFlush","stagesArr","stage","jump","shift","updatePauseResult","reload","onAllSaved","clearTimeout","queueRequest","setTimeout","restartTimer","action","1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","18","19","20","dataDisplay","channelNameToChannelId","units","channelColors","upperLabelsForScale","lowerLabelsForScale","upperConstLabels","lowerConstLabels","getVerticalLines","time","verticalLines10","verticalLines30","verticalLines60","verticalLine120","verticalLine180","verticalLine300","verticalLine600","stageIntToString","0","Scoring","match","params","which","hasNotCompleted","hasSubmitted","setStateFromDataStructure","eventDataStructure","timeController","stagesDataStructure","dataManager","dataRequestManager","pauseRequestManager","onKeyDown","onRequestComplete","bufferTimer","getCursorSecond","getUpperSecondFrom","getUpperSecondTo","getLowerSecondFrom","getLowerSecondTo","getData","upperDataPeriod","lowerDataPeriod","upperChannelKeys","getChannelRange","lowerChannelKeys","upperChannels","upperEventIds","getEventIdsByTimeRangeAndChannelIds","getEventObjectsByEventIds","lowerChannels","lowerEventIds","getUpperTimeInterval","getLowerTimeInterval","upperEpochFrom","upperEpochLength","lowerEpochFrom","lowerEpochLength","getBuffered","hasData","upperLabel","lowerLabel","add_temp","flush","submitStageResult","confirm","logout","opacity","chSegRes","paramForDataManagerConstructor","channelName","element","totalEpochNumber","loadPauseResult","loadResultResult","statResult","stat","epochAndStageToCount","count","maxKey","hasAnswerResult","checkDataAndSendRequest","clearInterval","unmount","keyCode","pageDown","editCurrentWindow","pageUp","editStage","nextEpoch","shiftKey","toBuffer","getNextEpochToBuffer","setRequest","setData","startBuffer","upperNoEpochs","lowerNoEpochs","jumpToEpoch","maxSec","addResult","editEvent","getEventObjectByEventId","setUpperTimeInterval","setLowerTimeInterval","stateToStr","get_START","get_UNSAVED","get_SAVING","get_SAVED","get_END","stateStr","answerResult","SetPassword","waitingForResult","whoAmIResult","oldPass","originalPass","newPass","newPass2","setPassResult","App","exact","path","component","HiddenHome","title","Boolean","hostname","ReactDOM","render","getElementById","serviceWorker","ready","then","registration","unregister","catch","message","module","exports"],"mappings":"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","file":"static/js/main.6d51be96.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport Card from 'react-bootstrap/Card'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Alert from 'react-bootstrap/Alert'\n\nclass Login extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.handleSubmit = this.handleSubmit.bind(this)\n\t\tthis.state = {\n\t\t\twaitingForResponse: false,\n\t\t\terrorMessage: null\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div style={{\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: '50%',\n\t\t\t\tleft: '50%',\n\t\t\t\ttransform: 'translateX(-50%) translateY(-50%)'}}>\n\t\t\t\t<Card style={{width: '30rem'}}>\n\t\t\t\t\t<Card.Header as=\"h5\">登入</Card.Header>\n\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t<Form onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t\t<Form.Group controlId=\"formAccount\">\n\t\t\t\t\t\t\t\t<Form.Label>帳號</Form.Label>\n\t\t\t\t\t\t\t\t<Form.Control />\n\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t<Form.Group controlId=\"formPassword\">\n\t\t\t\t\t\t\t\t<Form.Label>密碼</Form.Label>\n\t\t\t\t\t\t\t\t<Form.Control type=\"password\" />\n\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.waitingForResponse || !this.state.errorMessage ?\n\t\t\t\t\t\t\t\t\tnull :\n\t\t\t\t\t\t\t\t\t<Alert variant=\"danger\">{this.state.errorMessage}</Alert>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<Button variant=\"primary\" type=\"submit\" disabled={this.state.waitingForResponse}>\n\t\t\t\t\t\t\t\t{this.state.waitingForResponse ? '登入中' : '登入'}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\n\t\t\t\t\t</Card.Body>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t)\n\t}\n\tasync handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tthis.setState({\n\t\t\twaitingForResponse: true\n\t\t})\n\t\tlet loginResult = await axios.post('/ajax_login', {\n\t\t\taccount: event.target.elements.formAccount.value,\n\t\t\tpassword: event.target.elements.formPassword.value\n\t\t})\n\t\tthis.setState({\n\t\t\twaitingForResponse: false\n\t\t})\n\t\tif (loginResult.data.success) {\n\t\t\tthis.setState({\n\t\t\t\terrorMessage: null\n\t\t\t})\n\t\t\tthis.props.onLogin()\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\terrorMessage: loginResult.data.msg\n\t\t\t})\n\t\t}\n\t}\n}\n\nexport default Login","import React from 'react'\nimport Dropdown from 'react-bootstrap/Dropdown'\n\nfunction FileNameDropdown(props) {\n\tconst CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\n\t\t<a\n\t\t\thref=\"/#/\"\n\t\t\tref={ref}\n\t\t\tonClick={(e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tonClick(e);\n\t\t\t}}>\n\t\t\t{children}\n\t\t\t&#x25bc;\n\t\t</a>\n\t))\n\t//console.log('props', props)\n\tlet children = []\n\tfor (let i = 1; i <= props.totalNumber; i++) {\n\t\tlet key = i\n\t\tchildren.push(<Dropdown.Item key={key} eventKey={key}>\n\t\t\t{'第 ' + key +' 次結果'}\n\t\t</Dropdown.Item>)\n\t}\n\tchildren.push(<Dropdown.Divider key='divider' />)\n\tchildren.push(<Dropdown.Item key={0} eventKey={0}>\n\t\t{props.paused ? '繼續' : '新增'}\n\t</Dropdown.Item>)\n\treturn(\n\t\t<Dropdown onSelect={props.selectItem} style={{display: 'inline-block'}}>\n\t\t\t<Dropdown.Toggle as={CustomToggle} id=\"dropdown-filename\">\n\t\t\t\t{props.fileName}\n\t\t\t</Dropdown.Toggle>\n\t\t\t<Dropdown.Menu>{children}</Dropdown.Menu>\n\t\t</Dropdown>\n\t)\n}\n\nexport default FileNameDropdown","import React from 'react'\nimport Card from 'react-bootstrap/Card'\nimport FileNameDropdown from './FileNameDropdown'\nfunction ListItem(props) {\n\t//console.log(props)\n\treturn <>\n\t\t<Card style={{\n\t\t\twidth: '40rem',\n\t\t\tmarginLeft: 'auto',\n\t\t\tmarginRight: 'auto'}}>\n\t\t\t<Card.Body>\n\t\t\t\t<FileNameDropdown totalNumber={props.totalNumber} fileName={props.fileName} selectItem={props.selectItem} paused={props.paused} />\n\t\t\t\t{\n\t\t\t\t\tprops.totalNumber !== 0 ?\n\t\t\t\t\t\t<a href={'/download?id=' + props.psgFileId} style={{float: 'right'}}>下載</a> :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t</Card.Body>\n\t\t</Card>\n\t\t<br />\n\t</>\n}\n\nexport default ListItem","import React, { Component } from 'react'\n//import Navbar from 'react-bootstrap/Navbar'\n//import Form from 'react-bootstrap/Form'\n//import Button from 'react-bootstrap/Button'\nimport ListItem from './ListItem'\nimport axios from 'axios'\n\nclass List extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {files: []}\n\t}\n\trender() {\n\t\treturn <>\n\t\t\t{this.state.files.map((file, index) => {\n\t\t\t\treturn <ListItem\n\t\t\t\t\tkey={index}\n\t\t\t\t\ttotalNumber={file.scoringTimes}\n\t\t\t\t\tfileName={file.name}\n\t\t\t\t\tselectItem={(t) => {\n\t\t\t\t\t\t//console.log('id:', file.psgFileId, 'times:', t)\n\t\t\t\t\t\twindow.location.href = '#/scoring/' + file.psgFileId + '/' + t\n\t\t\t\t\t}}\n\t\t\t\t\tpsgFileId={file.psgFileId}\n\t\t\t\t\tpaused={file.paused} />\n\t\t\t})}\n\t\t</>\n\t}\n\tasync componentDidMount() {\n\t\tlet filesResult = await axios.post('/ajax_list_files', {})\n\t\tif (!filesResult.data.success) {\n\t\t\talert(filesResult.data.msg)\n\t\t\twindow.history.go(0)\n\t\t\treturn\n\t\t}\n\t\tconsole.log(filesResult.data.psgInfo)\n\t\tlet showdata = []\n\t\tfor (let i = 0; i < filesResult.data.psgInfo.length; i++) {\n\t\t\tif (filesResult.data.psgInfo[i].name[0] !== '#') {\n\t\t\t\tshowdata.push(filesResult.data.psgInfo[i])\n\t\t\t}\n\t\t}\n\t\tconsole.log(showdata)\n\t\tthis.setState({ files: showdata })\n\t\t\n\t}\n}\n\nexport default List","import React from 'react'\nimport axios from 'axios'\nimport Dropdown from 'react-bootstrap/Dropdown'\n\nfunction AccountDropdown(props) {\n\tconst CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\n\t\t<a\n\t\t\thref=\"/#/\"\n\t\t\tref={ref}\n\t\t\tonClick={(e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tonClick(e);\n\t\t\t}}>\n\t\t\t{children}\n\t\t\t&#x25bc;\n\t\t</a>\n\t))\n\treturn(\n\t\t<Dropdown onSelect={async (item) => {\n\t\t\t\tif (item === 'set_pass') window.location.href = '#/setpass'\n\t\t\t\telse if (item === 'logout') {\n\t\t\t\t\tlet result = await axios.post('/ajax_logout', {})\n\t\t\t\t\tif (result.data.success) {\n\t\t\t\t\t\tprops.onLogout()\n\t\t\t\t\t}\n\t\t\t\t}}}>\n\t\t\t<Dropdown.Toggle as={CustomToggle} id=\"account-dropdown\">\n\t\t\t\t{props.account}\n\t\t\t</Dropdown.Toggle>\n\t\t\t<Dropdown.Menu>\n\t\t\t\t<Dropdown.Item eventKey={'set_pass'} style={{color: 'black'}}>\n\t\t\t\t\t更改密碼\n\t\t\t\t</Dropdown.Item>\n\t\t\t\t<Dropdown.Item eventKey={'logout'} style={{color: 'black'}}>\n\t\t\t\t\t登出\n\t\t\t\t</Dropdown.Item>\n\t\t\t</Dropdown.Menu>\n\t\t</Dropdown>\n\t)\n}\n\nexport default AccountDropdown","import React from 'react'\nimport Navbar from 'react-bootstrap/Navbar'\nimport AccountDropdown from './AccountDropdown'\n\nfunction CommonNavbar(props) {\n\treturn <Navbar bg=\"dark\" variant=\"dark\" fixed=\"top\">\n\t\t<div style={{ width: '150px' }} />\n\t\t<Navbar.Brand href=\"/#/\">Scoring Web</Navbar.Brand>\n\t\t{props.account !== null ? <Navbar.Collapse className=\"justify-content-end\">\n\t\t\t<Navbar.Collapse className=\"justify-content-end\">\n\t\t\t\t<Navbar.Text>\n\t\t\t\t\t<AccountDropdown account={props.account} onLogout={props.onLogout} />\n\t\t\t\t</Navbar.Text>\n\t\t\t\t<div style={{ width: '150px' }} />\n\t\t\t</Navbar.Collapse>\n\t\t</Navbar.Collapse> : null}\n\t</Navbar>\n}\n\nexport default CommonNavbar","import React from 'react'\nimport Navbar from 'react-bootstrap/Navbar'\n\nfunction CommonFooter(props) {\n\treturn <Navbar bg=\"dark\" variant=\"dark\" fixed=\"bottom\">\n\t\t<Navbar.Collapse>\n\t\t\t<Navbar.Text style={{fontSize: '12px', margin: '0 auto'}}>\n\t\t\t\tNational Cheng Kung University Hospital <a href=\"/#/\">成大睡眠中心</a>\n\t\t\t\t<br />\n\t\t\t\tcooperates with National Cheng Kung University Department of Computer Science and Information Engineering NCBCI Lab成大資訊工程所<a href=\"/#/\">神經運算與腦機介面實驗室</a>\n\t\t\t</Navbar.Text>\n\t\t</Navbar.Collapse>\n\t</Navbar>\n}\n\nexport default CommonFooter","import React, { Component } from 'react'\nimport axios from 'axios'\n/*\nimport Navbar from 'react-bootstrap/Navbar'\nimport Container from 'react-bootstrap/Container'\nimport NavbarBrand from 'react-bootstrap/NavbarBrand'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\n*/\nimport Login from './components/Login'\nimport List from './components/List'\nimport CommonNavbar from '../commonComponents/CommonNavbar'\nimport CommonFooter from '../commonComponents/CommonFooter'\n\nclass Home extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.checkAccountAndSetState = this.checkAccountAndSetState.bind(this)\n\t\tthis.state = {\n\t\t\tdisplay: false,\n\t\t\taccount: null\n\t\t}\n\t}\n\trender() {\n\t\treturn <>\n\t\t\t<CommonNavbar account={this.state.account} onLogout={() => {\n\t\t\t\tthis.setState({\n\t\t\t\t\taccount: null\n\t\t\t\t})\n\t\t\t}} />\n\t\t\t{this.state.display ? <>\n\t\t\t\t<div style={{height: '70px'}} />\n\t\t\t\t{this.state.account !== null ? <List /> : <Login onLogin={() => { this.checkAccountAndSetState() }} />}  \n\t\t\t\t<div style={{height: '60px'}} />\n\t\t\t</> : null}\n\t\t\t\n\t\t\t<CommonFooter />\n\t\t</>\n\t}\n\tasync componentDidMount() {\n\t\tthis.checkAccountAndSetState()\n\t}\n\tasync checkAccountAndSetState() {\n\t\tlet result = await axios.post('/ajax_who_am_i', {})\n\t\tif (result.data.account !== undefined) {\n\t\t\tthis.setState({\n\t\t\t\taccount: result.data.account\n\t\t\t})\n\t\t}\n\t\tthis.setState({\n\t\t\tdisplay: true\n\t\t})\n\t}\n}\n\nexport default Home","import React, { Component } from 'react'\n//import Navbar from 'react-bootstrap/Navbar'\n//import Form from 'react-bootstrap/Form'\n//import Button from 'react-bootstrap/Button'\nimport ListItem from './ListItem'\nimport axios from 'axios'\n\nclass List extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {files: []}\n\t}\n\trender() {\n\t\treturn <>\n\t\t\t{this.state.files.map((file, index) => {\n\t\t\t\treturn <ListItem\n\t\t\t\t\tkey={index}\n\t\t\t\t\ttotalNumber={file.scoringTimes}\n\t\t\t\t\tfileName={file.name}\n\t\t\t\t\tselectItem={(t) => {\n\t\t\t\t\t\t//console.log('id:', file.psgFileId, 'times:', t)\n\t\t\t\t\t\twindow.location.href = '#/scoring/' + file.psgFileId + '/' + t\n\t\t\t\t\t}}\n\t\t\t\t\tpsgFileId={file.psgFileId}\n\t\t\t\t\tpaused={file.paused} />\n\t\t\t})}\n\t\t</>\n\t}\n\tasync componentDidMount() {\n\t\tlet filesResult = await axios.post('/ajax_list_files', {})\n\t\tif (!filesResult.data.success) {\n\t\t\talert(filesResult.data.msg)\n\t\t\twindow.history.go(0)\n\t\t\treturn\n\t\t}\n\t\tconsole.log(filesResult.data.psgInfo)\n\t\tlet showdata = []\n\t\t// 要顯示的psg id\n\t\tfor (let i = 0; i < filesResult.data.psgInfo.length; i++) {\n\t\t\tshowdata.push(filesResult.data.psgInfo[i])\n\t\t}\n\t\tconsole.log(showdata)\n\t\tthis.setState({ files: showdata })\n\t\t\n\t}\n}\n\nexport default List","import React, { Component } from 'react'\nimport axios from 'axios'\n/*\nimport Navbar from 'react-bootstrap/Navbar'\nimport Container from 'react-bootstrap/Container'\nimport NavbarBrand from 'react-bootstrap/NavbarBrand'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\n*/\nimport Login from './components/Login'\nimport HiddenList from './components/HiddenList'\nimport CommonNavbar from '../commonComponents/CommonNavbar'\nimport CommonFooter from '../commonComponents/CommonFooter'\n\nclass Home extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.checkAccountAndSetState = this.checkAccountAndSetState.bind(this)\n\t\tthis.state = {\n\t\t\tdisplay: false,\n\t\t\taccount: null\n\t\t}\n\t}\n\trender() {\n\t\treturn <>\n\t\t\t<CommonNavbar account={this.state.account} onLogout={() => {\n\t\t\t\tthis.setState({\n\t\t\t\t\taccount: null\n\t\t\t\t})\n\t\t\t}} />\n\t\t\t{this.state.display ? <>\n\t\t\t\t<div style={{height: '70px'}} />\n\t\t\t\t{this.state.account !== null ? <HiddenList /> : <Login onLogin={() => { this.checkAccountAndSetState() }} />}  \n\t\t\t\t<div style={{height: '60px'}} />\n\t\t\t</> : null}\n\t\t\t\n\t\t\t<CommonFooter />\n\t\t</>\n\t}\n\tasync componentDidMount() {\n\t\tthis.checkAccountAndSetState()\n\t}\n\tasync checkAccountAndSetState() {\n\t\tlet result = await axios.post('/ajax_who_am_i', {})\n\t\tif (result.data.account !== undefined) {\n\t\t\tthis.setState({\n\t\t\t\taccount: result.data.account\n\t\t\t})\n\t\t}\n\t\tthis.setState({\n\t\t\tdisplay: true\n\t\t})\n\t}\n}\n\nexport default Home","import React from 'react'\nimport Navbar from 'react-bootstrap/Navbar'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport AccountDropdown from '../../commonComponents/AccountDropdown'\n\nfunction ScoringNavbar(props) {\n\treturn <Navbar bg=\"dark\" variant=\"dark\">\n\t\t<div style={{ width: '150px' }} />\n\t\t<Navbar.Brand href=\"/#/\">Scoring Web</Navbar.Brand>\n\t\t{props.editable ? <>\n\t\t\t<Form>\n\t\t\t\t{\n\t\t\t\t\tprops.hasStagesBeenLoaded ?\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Button variant=\"secondary\"\n\t\t\t\t\t\t\tonClick={props.onComplete}\n\t\t\t\t\t\t\tdisabled={props.buttonDisabled}>\n\t\t\t\t\t\t\t完成\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</> : null\n\t\t\t\t}\n\t\t\t</Form>\n\t\t</> : null}\n\t\t{\n\t\t\tprops.hasStagesBeenLoaded && props.hasAnswer ?\n\t\t\t\t<>\n\t\t\t\t\t<div style={{ width: '30px' }} />\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tid=\"showAnswer\"\n\t\t\t\t\t\tname=\"showAnswer\"\n\t\t\t\t\t\tvalue=\"showAnswer\"\n\t\t\t\t\t\tdisabled={props.enableShowAnswerCheckbox ? '' : 'disabled'}\n\t\t\t\t\t\tonChange = {(e) => {\n\t\t\t\t\t\t\tprops.onShowAnswerChecked(e.target.checked)\n\t\t\t\t\t\t}} />\n\t\t\t\t\t<Navbar.Text>顯示自動判讀</Navbar.Text>\n\t\t\t\t</> : null\n\t\t}\n\t\t{\n\t\t\tprops.editable ? <>\n\t\t\t\t<div style={{ width: '30px' }} />\n\t\t\t\t<Navbar.Text>{props.stateToShow}</Navbar.Text>\n\t\t\t</> : null\n\t\t}\n\t\t<Navbar.Collapse className=\"justify-content-end\">\n\t\t\t<Navbar.Text>\n\t\t\t\t<AccountDropdown account={props.account} onLogout={props.onLogout} />\n\t\t\t</Navbar.Text>\n\t\t\t<div style={{ width: '150px' }} />\n\t\t</Navbar.Collapse>\n\t</Navbar>\n}\n\nexport default ScoringNavbar","import React, {Component} from 'react'\nimport styles from './css/fillStyle.module.css'\n\nclass HypnogramChart extends Component {\n\tref = React.createRef()\n\trender() {\n\t\t//console.log('channel render')\n\t\treturn <canvas\n\t\t\tref={this.ref}\n\t\t\twidth={this.props.width}\n\t\t\theight={this.props.height}\n\t\t\tclassName={styles.fill}></canvas>\n\t}\n\tupdateCanvas() {\n\t\tlet canvas = this.ref.current\n\t\tlet ctx = canvas.getContext('2d')\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height)\n\t\tctx.lineWidth = this.props.lineWidth\n\t\tctx.strokeStyle = this.props.color\n\t\tctx.beginPath()\n\t\tlet pointX = this.props.epochToXPosition(0)\n\t\tlet pointY = this.props.stageToYPosition(this.props.stages[0])\n\t\tlet last = this.props.stages[0]\n\t\tctx.moveTo(pointX, pointY)\n\t\tfor (let i = 1; i < this.props.stages.length; i++) {\n\t\t\tif (this.props.stages[i] === last) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tpointX = this.props.epochToXPosition(i)\n\t\t\tctx.lineTo(pointX, pointY)\n\t\t\tpointY = this.props.stageToYPosition(this.props.stages[i])\n\t\t\tif (this.props.stages[i] === 10 || last === 10) {\n\t\t\t\tctx.moveTo(pointX, pointY)\n\t\t\t} else {\n\t\t\t\tctx.lineTo(pointX, pointY)\n\t\t\t}\n\t\t\tlast = this.props.stages[i]\n\t\t}\n\t\tpointX = this.props.epochToXPosition(this.props.stages.length)\n\t\tctx.lineTo(pointX, pointY)\n\t\tctx.strokeStyle = this.props.color\n\t\tctx.stroke()\n\t}\n\tcomponentDidMount() {\n\t\tthis.updateCanvas()\n\t}\n\tcomponentDidUpdate() {\n\t\tthis.updateCanvas()\n\t}\n}\n\nexport default HypnogramChart","import React, { Component } from 'react';\nimport styles from './css/chartLayerStyle.module.css'\n\nconst LEFT_BUTTON = 0\nconst RIGHT_BUTTON = 2\nconst NO_BUTTON = -1\n\nclass InteractiveLayer extends Component {\n\tref = React.createRef()\n\tdraggingButton = NO_BUTTON\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.mouseDown = this.mouseDown.bind(this)\n\t\tthis.mouseMove = this.mouseMove.bind(this)\n\t\tthis.mouseUp = this.mouseUp.bind(this)\n\t\tthis.mouseLeave = this.mouseLeave.bind(this)\n\t\tthis.preventDragHandler = this.preventDragHandler.bind(this)\n\t\tthis.mouseScroll = this.mouseScroll.bind(this)\n\t\tthis.toChannelIdProportion = this.toChannelIdProportion.bind(this)\n\t\tthis.mousewheel = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\"\n\t}\n\trender() {\n\t\treturn <div ref={this.ref} className={styles.chartLayer} onDragStart={this.preventDragHandler} />\n\t}\n\ttoChannelIdProportion(absoluteX, absoluteY) {\n\t\tconst { current } = this.ref\n\t\tconst rect = current.getBoundingClientRect()\n\t\tlet x = absoluteX - rect.left\n\t\tlet y = absoluteY - rect.top\n\t\tlet channelId = this.props.verticalPositionToChannelId(y)\n\t\tlet proportion = this.props.horizontalPositionToProportion(x)\n\t\treturn {\n\t\t\tchannelId: channelId,\n\t\t\tproportion: proportion\n\t\t}\n\t}\n\tmouseDown(evt)  {\n\t\t//console.log('mouse down', evt.button)\n\t\tif (evt.button !== 0 && evt.button !== 2) return\n\t\tif (this.draggingButton !== -1) {\n\t\t\tthis.draggingButton = NO_BUTTON\n\t\t\tif (this.props.dragCancel) {\n\t\t\t\tthis.props.dragCancel()\n\t\t\t}\n\t\t}\n\t\tlet { channelId, proportion } = this.toChannelIdProportion(evt.clientX, evt.clientY)\n\t\tif (evt.button === LEFT_BUTTON) {\n\t\t\tthis.draggingButton = LEFT_BUTTON\n\t\t\tif (this.props.onLeftDragStart) {\n\t\t\t\tthis.props.onLeftDragStart(channelId, proportion)\n\t\t\t}\n\t\t} else if (evt.button === RIGHT_BUTTON) {\n\t\t\tthis.draggingButton = RIGHT_BUTTON\n\t\t\tif (this.props.onRightDragStart) {\n\t\t\t\tthis.props.onRightDragStart(channelId, proportion)\n\t\t\t}\n\t\t}\n\t}\n\tmouseMove(evt)  {\n\t\tlet { channelId, proportion } = this.toChannelIdProportion(evt.clientX, evt.clientY)\n\t\tif (this.draggingButton === LEFT_BUTTON) {\n\t\t\tif (this.props.onLeftDrag) {\n\t\t\t\tthis.props.onLeftDrag(proportion)\n\t\t\t}\n\t\t} else if (this.draggingButton === RIGHT_BUTTON) {\n\t\t\tif (this.props.onRightDrag) {\n\t\t\t\tthis.props.onRightDrag(proportion)\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.props.onMouseMove) {\n\t\t\t\tthis.props.onMouseMove(channelId, proportion)\n\t\t\t}\n\t\t}\n\t}\n\tmouseUp(evt)  {\n\t\t//console.log('mouse up')\n\t\tif (evt.button !== 0 && evt.button !== 2) return\n\t\tlet channelIdAndProportion = this.toChannelIdProportion(evt.clientX, evt.clientY)\n\t\tlet proportion = channelIdAndProportion.proportion\n\t\tif (this.draggingButton === evt.button) {\n\t\t\tif (this.draggingButton === LEFT_BUTTON) {\n\t\t\t\tif (this.props.onLeftDragEnd) {\n\t\t\t\t\tthis.props.onLeftDragEnd(proportion)\n\t\t\t\t}\n\t\t\t} else if (this.draggingButton === RIGHT_BUTTON) {\n\t\t\t\tif (this.props.onRightDragEnd) {\n\t\t\t\t\tthis.props.onRightDragEnd(proportion)\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.draggingButton = NO_BUTTON\n\t\t}\n\t}\n\tmouseLeave(evt) {\n\t\t//console.log('mouse leave')\n\t\tif (this.draggingButton === LEFT_BUTTON || this.draggingButton === RIGHT_BUTTON) {\n\t\t\tthis.draggingButton = NO_BUTTON\n\t\t\tif (this.props.dragCancel) {\n\t\t\t\tthis.props.dragCancel()\n\t\t\t}\n\t\t}\n\t}\n\tmouseScroll(e) {\n\t\tlet channelIdAndProportion = this.toChannelIdProportion(e.pageX, e.pageY)\n\t\tlet channelId = channelIdAndProportion.channelId\n\t\tif (e.wheelDelta > 0 || e.detail < 0) {\n\t\t\t// 往前\n\t\t\tif (this.props.onMouseScroll) {\n\t\t\t\tthis.props.onMouseScroll(channelId, false)\n\t\t\t}\n\t\t} else {\n\t\t\t// 往後\n\t\t\tif (this.props.onMouseScroll) {\n\t\t\t\tthis.props.onMouseScroll(channelId, true)\n\t\t\t}\n\t\t}\n\t}\n\tpreventContextMenu(e) {\n\t\te.preventDefault()\n\t}\n\tpreventDragHandler(e) {\n\t\te.preventDefault()\n\t}\n\tcomponentDidMount() {\n\t\tconst { current } = this.ref\n\t\tcurrent.addEventListener('mousedown', this.mouseDown)\n\t\tcurrent.addEventListener('mousemove', this.mouseMove)\n\t\tcurrent.addEventListener('mouseup', this.mouseUp)\n\t\tcurrent.addEventListener('mouseleave', this.mouseLeave)\n\t\tcurrent.addEventListener('contextmenu', this.preventContextMenu)\n\t\tcurrent.addEventListener(this.mousewheel, this.mouseScroll)\n\t}\n\tcomponentWillUnmount() {\n\t\tconst { current } = this.ref\n\t\tcurrent.removeEventListener('mousedown', this.mouseDown)\n\t\tcurrent.removeEventListener('mousemove', this.mouseMove)\n\t\tcurrent.removeEventListener('mouseup', this.mouseUp)\n\t\tcurrent.removeEventListener('mouseleave', this.mouseLeave)\n\t\tcurrent.removeEventListener('contextmenu', this.preventContextMenu)\n\t\tcurrent.removeEventListener(this.mousewheel, this.mouseScroll)\n\t}\n}\n\nexport default InteractiveLayer","import React from 'react'\n//import { linearScale } from './functions/LinearScale'\nimport styles from './css/fillStyle.module.css'\n\nfunction GridLayer(props) {\n\t//console.log(props.verticalLines)\n\tlet lines = []\n\tfor (let i = 0; i < props.verticalLines.length; i++) {\n\t\tlet line = props.verticalLines[i]\n\t\tlet xPos = props.secondToXPosition(line.second)\n\t\t//console.log(xPos)\n\t\tlines.push (\n\t\t\t<line\n\t\t\t\tx1={xPos}\n\t\t\t\ty1={props.bottomBoundary}\n\t\t\t\tx2={xPos}\n\t\t\t\ty2={props.topBoundary}\n\t\t\t\tstroke={line.color}\n\t\t\t\tstrokeDasharray={line.dashed ? '4' : ''}\n\t\t\t\tkey={line.second}\n\t\t\t/>\n\t\t)\n\t}\n\tfor (let i = 0; i < props.horizontalLines.length; i++) {\n\t\tlet line = props.horizontalLines[i]\n\t\tif (!line.zoomToShow && props.isZoomed(line.channelId)) continue\n\t\tlet yPos = props.valueToYPosition(line.channelId, line.value)\n\t\tlines.push (\n\t\t\t<line\n\t\t\t\tx1={props.leftBoundary}\n\t\t\t\ty1={yPos}\n\t\t\t\tx2={props.rightBoundary}\n\t\t\t\ty2={yPos}\n\t\t\t\tstroke={line.color}\n\t\t\t\tstrokeDasharray={line.dashed ? '4' : ''}\n\t\t\t\tkey={line.channelId + '_' + line.value}\n\t\t\t/>\n\t\t)\n\t}\n\treturn (\n\t\t<svg\n\t\t\twidth={props.width}\n\t\t\theight={props.height}\n\t\t\tclassName={styles.fill} >\n\t\t\t\t{lines}\n\t\t</svg>\n\t)\n}\n\nexport default GridLayer","export function linearScale(x1, x2, y1, y2) {\n\tlet m = (y2 - y1) / (x2 - x1)\n\treturn function(x) {\n\t\treturn (x - x1) * m + y1\n\t}\n}","import React from 'react'\nimport styles from './css/fillStyle.module.css'\nimport { linearScale } from './functions/LinearScale'\n\nfunction BufferedLayer(props) {\n\t//console.log(props)\n\tlet transform = linearScale(0, props.buffered.length, props.leftBoundary, props.rightBoundary)\n\tlet rects = []\n\t\n\tlet cont = false\n\tlet startX = null\n\tlet fill = 'rgba(100, 100, 100, 0.3)'\n\tfor (let i = 0; i < props.buffered.length; i++) {\n\t\tif (cont) {\n\t\t\tif (!props.buffered[i]) {\n\t\t\t\tlet endX = transform(i)\n\t\t\t\trects.push(<rect\n\t\t\t\t\tkey={i}\n\t\t\t\t\tx={startX}\n\t\t\t\t\ty={props.topBoundary}\n\t\t\t\t\twidth={endX - startX}\n\t\t\t\t\theight={props.bottomBoundary - props.topBoundary}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tfill: fill\n\t\t\t\t\t}} />)\n\t\t\t\tcont = false\n\t\t\t}\n\t\t} else {\n\t\tif (props.buffered[i]) { // 開始一個\n\t\t\t\tstartX = transform(i)\n\t\t\t\t//console.log('i:', i, 'startX:', startX)\n\t\t\t\tcont = true\n\t\t\t}\n\t\t}\n\t}\n\tlet end = props.buffered.length\n\tlet endX = transform(end)\n\tif (cont) {\n\t\trects.push(<rect\n\t\t\tkey={end}\n\t\t\tx={startX}\n\t\t\ty={props.topBoundary}\n\t\t\twidth={endX - startX}\n\t\t\theight={props.bottomBoundary - props.topBoundary}\n\t\t\tstyle={{\n\t\t\t\tfill: fill\n\t\t\t}} />)\n\t}\n\treturn <svg className={styles.fill} width={props.width} height={props.height}>{rects}</svg>\n}\n\nexport default BufferedLayer","import React from 'react'\nimport { linearScale } from './functions/LinearScale'\nimport styles from './css/fillStyle.module.css'\n\nfunction CursorLineLayer(props) {\n\tlet transform = linearScale(0, 1, props.leftBoundary, props.rightBoundary)\n\tlet x = transform(props.proportion)\n\treturn (\n\t\t<svg\n\t\t\twidth={props.width}\n\t\t\theight={props.height}\n\t\t\tclassName={styles.fill} >\n\t\t\t<line\n\t\t\t\tx1={x}\n\t\t\t\tx2={x}\n\t\t\t\ty1={props.bottomBoundary}\n\t\t\t\ty2={props.topBoundary}\n\t\t\t\tclassName={styles.redLine} />\n\t\t</svg>\n\t)\n}\n\nexport default CursorLineLayer","import React, {Component} from 'react'\nimport styles from './css/fillStyle.module.css'\n\nclass LabelLayer extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.updateCanvas = this.updateCanvas.bind(this)\n\t\tthis.ref = React.createRef()\n\t}\n\trender() {\n\t\t//console.log('label render')\n\t\treturn <canvas\n\t\t\tref={this.ref}\n\t\t\twidth={this.props.width}\n\t\t\theight={this.props.height}\n\t\t\tclassName={styles.fill}></canvas>\n\t}\n\tupdateCanvas() {\n\t\tlet canvas = this.ref.current\n\t\tlet ctx = canvas.getContext('2d')\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height)\n\t\tctx.textBaseline = 'middle'\n\t\tfor (let i = 0; i < this.props.labels.length; i++) {\n\t\t\tlet label = this.props.labels[i]\n\t\t\tlet xPos = this.props.gravityToXPosition(label.gravity)\n\t\t\txPos += label.xOffset\n\t\t\tlet yPos = this.props.valueToYPosition(label.channelId, label.value)\n\t\t\tyPos += label.yOffset\n\t\t\tctx.textAlign = label.gravity === 'left' ? 'left' : label.gravity === 'right' ? 'right' : 'center'\n\t\t\tctx.fillStyle = label.color\n\t\t\tctx.font = label.font\n\t\t\tctx.fillText(label.label, xPos, yPos)\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tthis.updateCanvas()\n\t}\n\tcomponentDidUpdate() {\n\t\tthis.updateCanvas()\n\t}\n}\n\nexport default LabelLayer","let linesInHypnogram = {\n\thorizontalLines: [\n\t\t{\n\t\t\tchannelId: 0,\n\t\t\tvalue: 3,\n\t\t\tdashed: false,\n\t\t\tcolor: '#c0c0c0',\n\t\t},\n\t\t{\n\t\t\tchannelId: 0,\n\t\t\tvalue: 2,\n\t\t\tdashed: false,\n\t\t\tcolor: '#c0c0c0',\n\t\t},\n\t\t{\n\t\t\tchannelId: 0,\n\t\t\tvalue: 1,\n\t\t\tdashed: false,\n\t\t\tcolor: '#c0c0c0',\n\t\t},\n\t\t{\n\t\t\tchannelId: 0,\n\t\t\tvalue: 0,\n\t\t\tdashed: false,\n\t\t\tcolor: '#c0c0c0',\n\t\t},\n\t\t{\n\t\t\tchannelId: 0,\n\t\t\tvalue: -1,\n\t\t\tdashed: false,\n\t\t\tcolor: '#c0c0c0',\n\t\t},\n\t\t{\n\t\t\tchannelId: 0,\n\t\t\tvalue: -2,\n\t\t\tdashed: false,\n\t\t\tcolor: '#c0c0c0',\n\t\t},\n\t],\n\tverticalLines: []\n}\n\nexport default linesInHypnogram","let labelsForHypnogram = [\n\t{\n\t\tlabel: '?',\n\t\tgravity: 'center',\n\t\tchannelId: 0,\n\t\tvalue: -2,\n\t\txOffset: 0,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '20px'\n\t},\n\t\t{\n\t\tlabel: 'R',\n\t\tgravity: 'center',\n\t\tchannelId: 0,\n\t\tvalue: -1,\n\t\txOffset: 0,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '20px'\n\t},\n\t\t{\n\t\tlabel: 'W',\n\t\tgravity: 'center',\n\t\tchannelId: 0,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '20px'\n\t},\n\t\t{\n\t\tlabel: 'N1',\n\t\tgravity: 'center',\n\t\tchannelId: 0,\n\t\tvalue: 1,\n\t\txOffset: 0,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '20px'\n\t},\n\t\t{\n\t\tlabel: 'N2',\n\t\tgravity: 'center',\n\t\tchannelId: 0,\n\t\tvalue: 2,\n\t\txOffset: 0,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '20px'\n\t},\n\t\t{\n\t\tlabel: 'N3',\n\t\tgravity: 'center',\n\t\tchannelId: 0,\n\t\tvalue: 3,\n\t\txOffset: 0,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '20px'\n\t}\n]\n\nexport default labelsForHypnogram","function clamp(val_1, val, val_2) {\n\treturn val_2 > val_1 ? val < val_1 ? val_1 : val > val_2 ? val_2 : val : val > val_1 ? val_1 : val < val_2 ? val_2 : val\n}\n\nexport default clamp","import React, {Component} from 'react'\nimport HypnogramChart from './HypnogramChart'\nimport InteractiveLayer from './InteractiveLayer'\nimport GridLayer from './GridLayer'\nimport BufferedLayer from './BufferedLayer'\nimport CursorLineLayer from './CursorLineLayer'\nimport LabelLayer from './LabelLayer'\nimport linesInHypnogram from './config/LinesInHypnogram'\nimport labelsForHypnogram from './config/LabelsForHypnogram'\nimport clamp from './functions/Clamp'\nimport { linearScale } from './functions/LinearScale'\nimport styles from './css/hypnogramStyle.module.css'\n\nclass Hypnogram extends Component {\n\tref = React.createRef()\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.firstTime = true\n\t\tthis.state = {\n\t\t\theight: 0,\n\t\t\twidth: 0\n\t\t}\n\t\tthis.windowResize = this.windowResize.bind(this)\n\t\tthis.mouseOnProportion = this.mouseOnProportion.bind(this)\n\t\tthis.mouseOnScroll = this.mouseOnScroll.bind(this)\n\t\tthis.gravityToXPosition = this.gravityToXPosition.bind(this)\n\t}\n\trender() {\n\t\tlet epochToXPosition = linearScale(0, this.props.stages.length,\n\t\t\tthis.props.leftSpace, this.state.width - this.props.rightSpace)\n\t\tlet stageToYPosition = linearScale(-2.5, 3.5,\n\t\t\tthis.props.topSpace, this.state.height - this.props.bottomSpace)\n\t\tlet horizontalPositionToProportion = linearScale(this.props.leftSpace, this.state.width - this.props.rightSpace, 0, 1)\n\t\tlet proportion = this.props.currentEpoch / this.props.stages.length\n\t\tlet hypnogram = this.firstTime ? <div ref={this.ref} className={styles.hypnogram} /> : (\n\t\t\t<div ref={this.ref} className={styles.hypnogram}>\n\t\t\t\t<GridLayer\n\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\theight={this.state.height}\n\t\t\t\t\tleftBoundary={this.props.leftSpace}\n\t\t\t\t\trightBoundary={this.state.width - this.props.rightSpace}\n\t\t\t\t\ttopBoundary={this.props.topSpace}\n\t\t\t\t\tbottomBoundary={this.state.height - this.props.bottomSpace}\n\t\t\t\t\tsecondToXPosition={linearScale(0, this.props.stages.length, this.props.leftSpace, this.state.width - this.props.rightSpace)}\n\t\t\t\t\tverticalLines={linesInHypnogram.verticalLines}\n\t\t\t\t\tvalueToYPosition={(channelId, value) => {\n\t\t\t\t\t\treturn stageToYPosition(value)\n\t\t\t\t\t}}\n\t\t\t\t\thorizontalLines={linesInHypnogram.horizontalLines}\n\t\t\t\t\tisZoomed={() => { return false }}\n\t\t\t\t/>\n\t\t\t\t<BufferedLayer\n\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\theight={this.state.height}\n\t\t\t\t\tleftBoundary={this.props.leftSpace}\n\t\t\t\t\trightBoundary={this.state.width - this.props.rightSpace}\n\t\t\t\t\ttopBoundary={this.props.topSpace}\n\t\t\t\t\tbottomBoundary={this.state.height - this.props.bottomSpace}\n\t\t\t\t\tbuffered={this.props.buffered}\n\t\t\t\t/>\n\t\t\t\t{\n\t\t\t\t\tthis.props.answer ?\n\t\t\t\t\t\t<HypnogramChart\n\t\t\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\t\t\theight={this.state.height}\n\t\t\t\t\t\t\tlineWidth={1}\n\t\t\t\t\t\t\tcolor={'orange'}\n\t\t\t\t\t\t\tepochToXPosition={epochToXPosition}\n\t\t\t\t\t\t\tstageToYPosition={stageToYPosition}\n\t\t\t\t\t\t\tstages={this.props.answer}\n\t\t\t\t\t\t/> : null\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tthis.props.modeArr ?\n\t\t\t\t\t\t<HypnogramChart\n\t\t\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\t\t\theight={this.state.height}\n\t\t\t\t\t\t\tlineWidth={1}\n\t\t\t\t\t\t\tcolor={'blue'}\n\t\t\t\t\t\t\tepochToXPosition={epochToXPosition}\n\t\t\t\t\t\t\tstageToYPosition={stageToYPosition}\n\t\t\t\t\t\t\tstages={this.props.modeArr}\n\t\t\t\t\t\t/> : null\n\t\t\t\t}\n\t\t\t\t<HypnogramChart\n\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\theight={this.state.height}\n\t\t\t\t\tlineWidth={1}\n\t\t\t\t\tcolor={'black'}\n\t\t\t\t\tepochToXPosition={epochToXPosition}\n\t\t\t\t\tstageToYPosition={stageToYPosition}\n\t\t\t\t\tstages={this.props.stages}\n\t\t\t\t/>\n\t\t\t\t<CursorLineLayer\n\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\theight={this.state.height}\n\t\t\t\t\tleftBoundary={this.props.leftSpace}\n\t\t\t\t\trightBoundary={this.state.width - this.props.rightSpace}\n\t\t\t\t\ttopBoundary={this.props.topSpace}\n\t\t\t\t\tbottomBoundary={this.state.height - this.props.bottomSpace}\n\t\t\t\t\tproportion={proportion}\n\t\t\t\t/>\n\t\t\t\t<LabelLayer\n\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\theight={this.state.height}\n\t\t\t\t\tgravityToXPosition={this.gravityToXPosition}\n\t\t\t\t\tlabels={labelsForHypnogram}\n\t\t\t\t\tvalueToYPosition={(channelId, value) => {\n\t\t\t\t\t\treturn stageToYPosition(value)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<InteractiveLayer\n\t\t\t\t\thorizontalPositionToProportion={horizontalPositionToProportion}\n\t\t\t\t\tverticalPositionToChannelId={() => { return 0 }}\n\t\t\t\t\tonRightDragStart={ (channelId, proportion) => {\n\t\t\t\t\t\tthis.mouseOnProportion(proportion)\n\t\t\t\t\t} }\n\t\t\t\t\tonRightDrag={this.mouseOnProportion}\n\t\t\t\t\tonRightDragEnd={this.mouseOnProportion}\n\t\t\t\t\tonLeftDragStart={ (channelId, proportion) => {\n\t\t\t\t\t\tthis.mouseOnProportion(proportion)\n\t\t\t\t\t} }\n\t\t\t\t\tonLeftDrag={this.mouseOnProportion}\n\t\t\t\t\tonLeftDragEnd={this.mouseOnProportion}\n\t\t\t\t\tonMouseScroll={(channelId, up) => {\n\t\t\t\t\t\tthis.mouseOnScroll(up)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t\tthis.firstTime = false\n\t\treturn hypnogram\n\t}\n\twindowResize() {\n\t\tconst { current } = this.ref;\n\t\tthis.setState({\n\t\t\twidth: current.offsetWidth,\n\t\t\theight: current.offsetHeight,\n\t\t})\n\t}\n\tmouseOnProportion(proportion) {\n\t\tlet epoch = proportion * this.props.stages.length\n\t\tepoch = clamp(0, epoch, this.props.stages.length - 1)\n\t\tepoch = Math.round(epoch)\n\t\tif (epoch !== this.props.currentEpoch) {\n\t\t\tthis.props.jumpTo(epoch)\n\t\t}\n\t}\n\tmouseOnScroll(direction) {\n\t\tlet epoch = this.props.currentEpoch + (direction ? 1 : -1)\n\t\tepoch = clamp(0, epoch, this.props.stages.length - 1)\n\t\tif (epoch !== this.props.currentEpoch) {\n\t\t\tthis.props.jumpTo(epoch)\n\t\t}\n\t}\n\tgravityToXPosition(gravity) {\n\t\treturn gravity === 'left' ? 0 : gravity === 'right' ? this.props.leftSpace : this.props.leftSpace / 2\n\t}\n\tcomponentDidMount() {\n\t\t//console.log('hypnogram did mount')\n\t\twindow.addEventListener('resize', this.windowResize)\n\t\tconst { current } = this.ref;\n\t\tthis.setState({\n\t\t\twidth: current.offsetWidth,\n\t\t\theight: current.offsetHeight\n\t\t})\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.windowResize)\n\t}\n}\n\nexport default Hypnogram","import React, {Component} from 'react'\n//import PropTypes from 'prop-types'\nimport styles from './css/fillStyle.module.css'\n\nfunction localMax(val1, val2, val3) {\n\treturn (val2 > val1 && val2 >= val3) || (val2 >= val1 && val2 > val3)\n}\nfunction localMin(val1, val2, val3) {\n\treturn (val2 < val1 && val2 <= val3) || (val2 <= val1 && val2 < val3)\n}\nfunction getMode(arr) {\n\tlet result = {}\n\tarr.forEach(key => {\n\t  result[key] = (result[key] || 0) + 1\n\t})\n\tlet max = 0\n\tlet mode = []\n\t\n\tfor (let key in result) {\n\t  if (result[key] > max) {\n\t\tmax = result[key]\n\t\tmode = [key]\n\t  } \n\t  else if (result[key] === max){\n\t\tmode.push(key)\n\t  }\n\t}\n\treturn mode\n}\n\nclass ChannelChart extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.updateCanvas = this.updateCanvas.bind(this)\n\t\tthis.ref = React.createRef()\n\t}\n\trender() {\n\t\t//console.log('channel render:', this.props.chartKey)\n\t\treturn <canvas\n\t\t\tref={this.ref}\n\t\t\twidth={this.props.width}\n\t\t\theight={this.props.height}\n\t\t\tclassName={styles.fill}></canvas>\n\t}\n\tshouldComponentUpdate(nextProps, nextState) {\n\t\t//console.log(nextProps.chartKey)\n\t\t//console.log(this.props.chartKey)\n\t\treturn nextProps.chartKey !== this.props.chartKey\n\t}\n\tupdateCanvas() {\n\t\t//console.log('channel update:', this.props.chartKey)\n\t\t//console.log(this.props.data(0), this.props.data(1), this.props.data(2))\n\t\tlet canvas = this.ref.current\n\t\tlet ctx = canvas.getContext('2d')\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height)\n\t\tctx.lineWidth = this.props.lineWidth\n\t\tctx.strokeStyle = this.props.color\n\t\tctx.beginPath()\n\t\tlet localExtremeSearchQueue = []\n\t\tlet showValuePosition = []\n\t\tlet pointX = this.props.xTransform(0)\n\t\tlet dataY = this.props.data(0)\n\t\tlocalExtremeSearchQueue.push(dataY)\n\t\tlet pointY = this.props.yTransform(dataY)\n\t\tlet dataValuesX = []\n\t\tlet dataValuesY = []\n\t\t\n\t\tctx.moveTo(pointX, pointY)\n\t\t// 2021/1/18 縮放的資料長度\n\t\t// console.log(this.props.dataLength)\n\t\t// console.log(localExtremeSearchQueue)\n\t\tfor (let i = 1; i < this.props.dataLength; i++) {\n\t\t\tpointX = this.props.xTransform(i)\n\t\t\tdataY = this.props.data(i)\n\t\t\tlocalExtremeSearchQueue.push(dataY)\n\t\t\t\n\t\t\tpointY = this.props.yTransform(dataY)\n\t\t\tctx.lineTo(pointX, pointY)\n\n\t\t\t// 實際印到畫面上的X, Y\n\t\t\t// console.log(pointX, pointY);\n\t\t\tif (this.props.showLocalExtreme) {\n\t\t\t\tdataValuesX.push(pointX)\n\t\t\t\tdataValuesY.push(dataY.toFixed(0))\n\t\t\t}\n\n\t\t\t// 舊的數字顯示規則\n\t\t\t// if (this.props.showLocalExtreme) {\n\t\t\t// \tif (localExtremeSearchQueue.length === 4) {\n\t\t\t// \t\tlocalExtremeSearchQueue.shift()\n\t\t\t// \t}\n\t\t\t// \tif (localExtremeSearchQueue.length === 3) {\n\t\t\t// \t\tif (localMax(localExtremeSearchQueue[0], localExtremeSearchQueue[1], localExtremeSearchQueue[2]) ||\n\t\t\t// \t\t\tlocalMin(localExtremeSearchQueue[0], localExtremeSearchQueue[1], localExtremeSearchQueue[2])) {\n\t\t\t// \t\t\tshowValuePosition.push({\n\t\t\t// \t\t\t\tx: i - 1,\n\t\t\t// \t\t\t\ty: localExtremeSearchQueue[1]\n\t\t\t// \t\t\t})\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\n\t\t// 顯示每個channel資料\n\t\t// console.log(dataValues)\n\n\t\t// 新的數字顯示規則\n\t\t// 之後可以考慮先用趨勢抓出最高最低點，優先顯示，之後再讓每段的數值顯示，用transform後的x來判斷是否重疊\n\t\tif (this.props.showLocalExtreme) {\n\t\t\t// 只顯示spo2、pulse\n\t\t\t//console.log(dataValuesY)\n\t\t\t// 抓出最常出現的數值\n\t\t\tlet baseline = getMode(dataValuesY)[0]\n\t\t\t// console.log(baseline);\n\n\t\t\tlet blockWidth = Math.round(this.props.dataLength / 6)\n\t\t\t// console.log(blockWidth);\n\t\t\tlet sameCheck = dataValuesY[0];\n\t\t\tlet sameCount = 1;\n\t\t\tfor (let i = 1; i < this.props.dataLength; i++) {\n\t\t\t\tif (sameCheck === dataValuesY[i]) {\n\t\t\t\t\tsameCount++;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tshowValuePosition.push({\n\t\t\t\t\t\tx: i - Math.floor(sameCount / 2),\n\t\t\t\t\t\ty: this.props.data(i)\n\t\t\t\t\t})\n\t\t\t\t\tsameCount = 1;\n\t\t\t\t}\n\t\t\t\tsameCheck = dataValuesY[i];\n\t\t\t\t// baseline定期顯示\n\t\t\t\t// if (dataValuesY[i] == baseline && i % blockWidth == 3) {\n\t\t\t\t// \tshowValuePosition.push({\n\t\t\t\t// \t\tx: i,\n\t\t\t\t// \t\ty: this.props.data(i)\n\t\t\t\t// \t})\n\t\t\t\t// }\n\t\t\t}\n\t\t}\n\n\t\tctx.strokeStyle = this.props.color\n\t\tctx.stroke()\n\t\t\n\t\tctx.font = \"12px Arial\"\n\t\tctx.textBaseline = \"hanging\"\n\t\tctx.textAlign = \"center\"\n\t\tif (this.props.showLocalExtreme) {\n\t\t\tlet lastX = 0\n\t\t\tfor (let i = 0; i < showValuePosition.length; i++) {\n\t\t\t\tlet x = this.props.xTransform(showValuePosition[i].x);\n\t\t\t\tlet y = this.props.yTransform(showValuePosition[i].y) + 10;\n\t\t\t\t//若重疊則省略顯示\n\t\t\t\tif((x - lastX) > 14){\n\t\t\t\t\tctx.fillText(showValuePosition[i].y.toFixed(0), x, y);\n\t\t\t\t\tlastX = x;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tthis.updateCanvas()\n\t}\n\tcomponentDidUpdate() {\n\t\tthis.updateCanvas()\n\t}\n}\n\nexport default ChannelChart","import React from 'react'\n//import { linearScale } from './functions/LinearScale'\nimport clamp from './functions/Clamp'\nimport styles from './css/fillStyle.module.css'\n\nfunction EventsLayer(props) {\n\tlet elements = []\n\t//console.log(props.events.length)\n\tfor (let i = 0; i < props.events.length; i++) {\n\t\tlet event = props.events[i]\n\t\tlet centerline = props.getChannelCenterline(event.channelId)\n\t\tlet from = clamp(0, event.secondFrom, props.interval)\n\t\tlet to = clamp(0, event.secondTo, props.interval)\n\t\tlet xFrom = props.secondToXPosition(from)\n\t\tlet xTo = props.secondToXPosition(to)\n\t\tlet xLen = xTo - xFrom\n\t\tlet top = centerline - props.eventHeight / 2\n\t\t//console.log(event.channelId)\n\t\telements.push(\n\t\t\t<rect\n\t\t\t\tkey={event.eventId + '_' + event.channelId}\n\t\t\t\tx={xFrom}\n\t\t\t\ty={top}\n\t\t\t\twidth={xLen}\n\t\t\t\theight={props.eventHeight}\n\t\t\t\tstyle={{\n\t\t\t\t\tfill: event.color,\n\t\t\t\t\tfillOpacity: 0.5\n\t\t\t\t}}\n\t\t\t/>\n\t\t)\n\t\tlet bottom = centerline + props.eventHeight / 2\n\t\telements.push(\n\t\t\t<text\n\t\t\t\tkey={event.eventId + '_' + event.channelId + \"_text\"}\n\t\t\t\tx={xFrom}\n\t\t\t\ty={bottom}\n\t\t\t>\n\t\t\t\t{event.type}\n\t\t\t</text>\n\t\t)\n\t\t\n\t}\n\tif (props.editingEvent) {\n\t\t//console.log('拖曳事件')\n\t\tlet centerline = props.getChannelCenterline(props.editingEvent.channelId)\n\t\tlet from = clamp(0, props.editingEvent.secondFrom, props.interval)\n\t\tlet to = clamp(0, props.editingEvent.secondTo, props.interval)\n\t\tlet xFrom = props.secondToXPosition(from)\n\t\tlet xTo = props.secondToXPosition(to)\n\t\tlet xLen = xTo - xFrom\n\t\tlet top = centerline - props.eventHeight / 2\n\t\telements.push(\n\t\t\t<rect\n\t\t\t\tkey=\"editingEvent\"\n\t\t\t\tx={xFrom}\n\t\t\t\ty={top}\n\t\t\t\twidth={xLen}\n\t\t\t\theight={props.eventHeight}\n\t\t\t\tstroke={'black'}\n\t\t\t\tstrokeWidth={2}\n\t\t\t\tfill={'none'}\n\t\t\t/>\n\t\t)\n\t\t\n\t\tlet bottom = centerline + props.eventHeight / 2\n\t\tlet tipHeight = 20\n\t\tlet tipWidth = 40\n\t\tlet tipXOffset = 0\n\t\tlet tipYOffset = 10\n\t\t// 顯示秒數\n\t\telements.push(\n\t\t\t<rect\n\t\t\t\tkey=\"tip_rect\"\n\t\t\t\tx={xTo + tipXOffset}\n\t\t\t\ty={bottom + tipYOffset}\n\t\t\t\twidth={tipWidth}\n\t\t\t\theight={tipHeight}\n\t\t\t\tstroke=\"black\"\n\t\t\t\tstrokeWidth={1}\n\t\t\t\tfill=\"white\"\n\t\t\t/>\n\t\t)\n\t\telements.push(\n\t\t\t<text\n\t\t\t\tkey=\"tip_text\"\n\t\t\t\tx={xTo + tipXOffset + tipWidth / 2}\n\t\t\t\ty={bottom + 10 + tipHeight / 2}\n\t\t\t\tdominantBaseline=\"middle\"\n\t\t\t\ttextAnchor=\"middle\" >\n\t\t\t\t{Math.abs(from - to).toFixed(1)}\n\t\t\t</text>\n\t\t)\n\t}\n\treturn (\n\t\t<svg\n\t\t\twidth={props.width}\n\t\t\theight={props.height}\n\t\t\tclassName={styles.fill}>\n\t\t\t{elements}\n\t\t</svg>\n\t)\n}\n\nexport default EventsLayer","import React from 'react'\nimport { linearScale } from './functions/LinearScale'\nimport styles from './css/fillStyle.module.css'\n\nfunction StageLayer(props) {\n\tlet transformFunction = linearScale(0, props.stages.length, props.leftBoundary, props.rightBoundary)\n\tlet stageTextArray = []\n\tfor (let i = 0; i < props.stages.length; i++) {\n\t\tlet xPosition = transformFunction(i)\n\t\tstageTextArray.push(\n\t\t\t<text\n\t\t\t\tkey={'top_' + i}\n\t\t\t\tx={xPosition}\n\t\t\t\ty={props.topBoundary}\n\t\t\t\tdominantBaseline={'hanging'}\n\t\t\t\tfillOpacity={0.5}\n\t\t\t\tfill={'darkgreen'}\n\t\t\t\tfontWeight={'bold'}\n\t\t\t\tfontSize={40}>\n\t\t\t\t{props.stages[i]}\n\t\t\t</text>\n\t\t)\n\t\tstageTextArray.push(\n\t\t\t<text\n\t\t\t\tkey={'bottom_' + i}\n\t\t\t\tx={xPosition}\n\t\t\t\ty={props.bottomBoundary}\n\t\t\t\tfillOpacity={0.5}\n\t\t\t\tfill={'darkgreen'}\n\t\t\t\tfontWeight={'bold'}\n\t\t\t\tfontSize={40}>\n\t\t\t\t{props.stages[i]}\n\t\t\t</text>\n\t\t)\n\t}\n\treturn (\n\t\t<svg\n\t\t\twidth={props.width}\n\t\t\theight={props.height}\n\t\t\tclassName={styles.fill}>\n\t\t\t\t{stageTextArray}\n\t\t</svg>\n\t)\n}\n\nexport default StageLayer","function formatSecond(secs) {\n\tlet hr = Math.floor(secs / 3600);\n\tlet min = Math.floor((secs - (hr * 3600)) / 60);\n\tlet sec = parseInt( secs - (hr * 3600) - (min * 60));\n\twhile (min.length < 2) { min = '0' + min; }\n\twhile (sec.length < 2) { sec = '0' + min; }\n\tif (hr) hr += ':';\n\treturn hr + min + ':' + sec;\n}\n\nexport default formatSecond","import React, { Component } from 'react'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport axios from 'axios'\nimport formatSecond from './functions/formatSecond'\n\nfunction formatDuration(from, to) {\n\treturn (to - from).toFixed(1)\n}\n\nclass EventInfoWindow extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.handleChange = this.handleChange.bind(this)\n\t\tthis.find_upanddown_v1 = this.find_upanddown_v1.bind(this)\n\t\tthis.state = {\n\t\t\tdesat: null,\n\t\t\tshow_err : 0\n\t\t}\n\t}\n\tfind_upanddown_v1(startPoint,endPoint,long,left_in,right_in,left_page,right_page,i){\n\t\tlet val_high_left,val_low_left,val_high_right,val_low_right\n\t\tlet left_diff=0,right_diff=0\n\t\tif(left_in===0){\n\t\t\tval_high_left=this.props.preData[left_page][i].data(Math.round(startPoint + (this.props.data[i].dataLength-1)*(left_page+1)))\n\t\t\tval_low_left=this.props.preData[left_page][i].data(Math.round(startPoint + (this.props.data[i].dataLength-1)*(left_page+1)))\n\t\t\tfor(let j=1;j<=long/2;j++){\n\t\t\t\tlet left_val,right_val\n\t\t\t\tif(startPoint+(this.props.data[i].dataLength-1)*(left_page+1)+j<this.props.data[i].dataLength-0.5){\n\t\t\t\t\tright_val=this.props.preData[left_page][i].data(Math.round(startPoint + (this.props.data[i].dataLength-1)*(left_page+1)+j))\n\t\t\t\t}else{\n\t\t\t\t\tif(left_page>0){\n\t\t\t\t\t\tright_val=this.props.preData[left_page-1][i].data(Math.round(startPoint + (this.props.data[i].dataLength-1)*(left_page+1)+j-this.props.data[i].dataLength))\n\t\t\t\t\t}else{\n\t\t\t\t\t\tright_val=this.props.data[i].data(Math.round(startPoint + (this.props.data[i].dataLength-1)*(left_page+1)+j-this.props.data[i].dataLength))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(startPoint+(this.props.data[i].dataLength-1)*(left_page+1)-j>-0.5){\n\t\t\t\t\tleft_val=this.props.preData[left_page][i].data(Math.round(startPoint + (this.props.data[i].dataLength-1)*(left_page+1)-j))\n\t\t\t\t}else{\n\t\t\t\t\tleft_val=this.props.preData[left_page+1][i].data(Math.round(startPoint + (this.props.data[i].dataLength-1)*(left_page+1)-j+this.props.data[i].dataLength))\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(val_high_left<left_val){\n\t\t\t\t\tval_high_left=left_val\n\t\t\t\t}\n\t\t\t\tif(val_high_left<right_val){\n\t\t\t\t\tval_high_left=right_val\n\t\t\t\t}\n\t\t\t\tif(val_low_left>left_val){\n\t\t\t\t\tval_low_left=left_val\n\t\t\t\t}\n\t\t\t\tif(val_low_left>right_val){\n\t\t\t\t\tval_low_left=right_val\n\t\t\t\t}\n\t\t\t}\n\t\t\tleft_diff=val_high_left-val_low_left\n\t\t}else{\n\t\t\tval_high_left=this.props.data[i].data(Math.round(startPoint))\n\t\t\tval_low_left=this.props.data[i].data(Math.round(startPoint))\n\t\t\tfor(let j=1;j<=long/2;j++){\n\t\t\t\tlet left_val,right_val\n\t\t\t\tif(startPoint+j<this.props.data[i].dataLength-0.5){\n\t\t\t\t\tright_val=this.props.data[i].data(Math.round(startPoint+j))\n\t\t\t\t}else{\n\t\t\t\t\tright_val=this.props.nextData[0][i].data(Math.round((startPoint+j)-this.props.data[i].dataLength))\n\t\t\t\t}\n\t\t\t\tif(startPoint-j>-0.5){\n\t\t\t\t\tleft_val=this.props.data[i].data(Math.round(startPoint-j))\n\t\t\t\t}else{\n\t\t\t\t\tleft_val=this.props.preData[0][i].data(Math.round(this.props.data[i].dataLength+(startPoint-j)))\n\t\t\t\t}\n\t\t\t\tif(val_high_left<left_val){\n\t\t\t\t\tval_high_left=left_val\n\t\t\t\t}\n\t\t\t\tif(val_high_left<right_val){\n\t\t\t\t\tval_high_left=right_val\n\t\t\t\t}\n\t\t\t\tif(val_low_left>left_val){\n\t\t\t\t\tval_low_left=left_val\n\t\t\t\t}\n\t\t\t\tif(val_low_left>right_val){\n\t\t\t\t\tval_low_left=right_val\n\t\t\t\t}\n\t\t\t}\n\t\t\tleft_diff=val_high_left-val_low_left\n\t\t}\n\t\tif(right_in===0){\n\t\t\tval_high_right=this.props.nextData[right_page][i].data(Math.round(endPoint - (this.props.data[i].dataLength-1)*(right_page+1)))\n\t\t\tval_low_right=this.props.nextData[right_page][i].data(Math.round(endPoint - (this.props.data[i].dataLength-1)*(right_page+1)))\n\t\t\tfor(let j=1;j<=long/2;j++){\n\t\t\t\tlet left_val,right_val\n\t\t\t\tif(endPoint - (this.props.data[i].dataLength-1)*(right_page+1)+j<this.props.data[i].dataLength-0.5){\n\t\t\t\t\tright_val=this.props.nextData[right_page][i].data(Math.round(endPoint - (this.props.data[i].dataLength-1)*(right_page+1)+j))\n\t\t\t\t}else{\n\t\t\t\t\tright_val=this.props.nextData[right_page+1][i].data(Math.round(endPoint - (this.props.data[i].dataLength-1)*(right_page+1)+j-this.props.data[i].dataLength))\n\t\t\t\t}\n\t\t\t\tif(endPoint - (this.props.data[i].dataLength-1)*(right_page+1)-j>-0.5){\n\t\t\t\t\tleft_val=this.props.nextData[right_page][i].data(Math.round(endPoint - (this.props.data[i].dataLength-1)*(right_page+1)-j))\n\t\t\t\t}else{\n\t\t\t\t\tif(right_page>0){\n\t\t\t\t\t\tleft_val=this.props.nextData[right_page-1][i].data(Math.round(endPoint - (this.props.data[i].dataLength-1)*(right_page+1)-j+this.props.data[i].dataLength))\n\t\t\t\t\t}else{\n\t\t\t\t\t\tleft_val=this.props.data[i].data(Math.round(endPoint - (this.props.data[i].dataLength-1)*(right_page+1)-j+this.props.data[i].dataLength))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(val_high_right<left_val){\n\t\t\t\t\tval_high_right=left_val\n\t\t\t\t}\n\t\t\t\tif(val_high_right<right_val){\n\t\t\t\t\tval_high_right=right_val\n\t\t\t\t}\n\t\t\t\tif(val_low_right>left_val){\n\t\t\t\t\tval_low_right=left_val\n\t\t\t\t}\n\t\t\t\tif(val_low_right>right_val){\n\t\t\t\t\tval_low_right=right_val\n\t\t\t\t}\n\t\t\t}\n\t\t\tright_diff=val_high_right-val_low_right\n\t\t}else{\n\t\t\tval_high_right=this.props.data[i].data(Math.round(endPoint))\n\t\t\tval_low_right=this.props.data[i].data(Math.round(endPoint))\n\t\t\tfor(let j=1;j<=long/2;j++){\n\t\t\t\tlet left_val,right_val\n\t\t\t\tif(endPoint+j<this.props.data[i].dataLength-0.5){\n\t\t\t\t\tright_val=this.props.data[i].data(Math.round(endPoint+j))\n\t\t\t\t}else{\n\t\t\t\t\tright_val=this.props.nextData[0][i].data(Math.round((endPoint+j)-this.props.data[i].dataLength))\n\t\t\t\t}\n\t\t\t\tif(endPoint-j>-0.5){\n\t\t\t\t\tleft_val=this.props.data[i].data(Math.round(endPoint-j))\n\t\t\t\t}else{\n\t\t\t\t\tleft_val=this.props.preData[0][i].data(Math.round(this.props.data[i].dataLength+(endPoint-j)))\n\t\t\t\t}\n\t\t\t\tif(val_high_right<left_val){\n\t\t\t\t\tval_high_right=left_val\n\t\t\t\t}\n\t\t\t\tif(val_high_right<right_val){\n\t\t\t\t\tval_high_right=right_val\n\t\t\t\t}\n\t\t\t\tif(val_low_right>left_val){\n\t\t\t\t\tval_low_right=left_val\n\t\t\t\t}\n\t\t\t\tif(val_low_right>right_val){\n\t\t\t\t\tval_low_right=right_val\n\t\t\t\t}\n\t\t\t}\n\t\t\tright_diff=val_high_right-val_low_right\n\t\t}\n\t\tif(right_diff>left_diff){\n\t\t\treturn 1-left_diff/right_diff\n\t\t}else{\n\t\t\treturn -(1-right_diff/left_diff)\n\t\t}\n\t}\n\thandleChange(e) {\n\t\tlet type = e.target.value\n\t\tthis.props.onSelected(this.props.eventId, type)\n\t\tthis.props.onCancel()\n\t}\n\trender() {\n\t\t//console.log(this.props.eventId)\n\t\tlet eventInfo = this.props.getEventInfo(this.props.eventId)\n\t\tlet eventTypes = this.props.getChannelEvents(eventInfo.channelId)\n\t\tlet desat = null\n\t\tif (this.props.showDesat) {\n\t\t\tdesat = <>Desat<br />{this.state.desat}</>\n\t\t}\n\n\t\t// 產生起訖點振幅\n\t\tlet amplitude = null;\n\t\t//console.log(eventInfo.channelId); // 只會有2(顯示全腦波)、12(應該顯示四排)、16(顯示spo2)\n\t\tif(eventInfo.channelId === 2){\n\t\t\t//this.props.data[0 ~ 7]\n\t\t\t// 左界在目前頁面\n\t\t\tlet isLeftIn = ((eventInfo.secondFrom >= this.props.secondFrom) && (eventInfo.secondFrom <= this.props.secondTo)) ? 1 : 0;\n\t\t\t// 右界在目前頁面\n\t\t\tlet isRightIn = ((eventInfo.secondTo >= this.props.secondFrom) && (eventInfo.secondTo <= this.props.secondTo)) ? 1 : 0;\n\t\t\tlet eegAmps = [];\n\t\t\tfor(let i=0; i<8; i++){\n\t\t\t\tlet startPoint = (this.props.data[i].dataLength-1) * (eventInfo.secondFrom - this.props.secondFrom) / (this.props.secondTo - this.props.secondFrom);\n\t\t\t\tlet endPoint = (this.props.data[i].dataLength-1) * (eventInfo.secondTo - this.props.secondFrom) / (this.props.secondTo - this.props.secondFrom);\n\t\t\t\t//console.log(startPoint, endPoint);\n\t\t\t\tlet eegAmp = 0;\n\t\t\t\tif(isLeftIn && isRightIn){\n\t\t\t\t\ttry {eegAmp = Math.abs(this.props.data[i].data(Math.round(startPoint)) - this.props.data[i].data(Math.round(endPoint))).toFixed(1);}\n\t\t\t\t\tcatch(error) {console.log(error);}\n\t\t\t\t}\n\t\t\t\t// 左界超出\n\t\t\t\telse if(isLeftIn === 0 && isRightIn === 1){\n\t\t\t\t\ttry {eegAmp = Math.abs(this.props.preData[0][i].data(Math.round(startPoint + this.props.data[i].dataLength - 1)) - this.props.data[i].data(Math.round(endPoint))).toFixed(1);}\n\t\t\t\t\tcatch(error) {console.log(error);}\n\t\t\t\t}\n\t\t\t\t// 右界超出\n\t\t\t\telse if(isLeftIn === 1 && isRightIn === 0){\n\t\t\t\t\ttry {eegAmp = Math.abs(this.props.data[i].data(Math.round(startPoint)) - this.props.nextData[0][i].data(Math.round(endPoint - this.props.data[i].dataLength + 1))).toFixed(1);}\n\t\t\t\t\tcatch(error) {console.log(error);}\n\t\t\t\t}\n\t\t\t\telse if(isLeftIn === 0 && isRightIn === 0){\n\t\t\t\t\ttry {eegAmp = Math.abs(this.props.preData[0][i].data(Math.round(startPoint + this.props.data[i].dataLength - 1)) - this.props.nextData[0][i].data(Math.round(endPoint - this.props.data[i].dataLength + 1))).toFixed(1);}\n\t\t\t\t\tcatch(error) {console.log(error);}\n\t\t\t\t}\n\t\t\t\teegAmps.push(eegAmp);\n\t\t\t}\n\t\t\t\n\t\t\tamplitude = <>\n\t\t\t\t起訖點振幅<br />\n\t\t\t\t<span style={{float:'left'}}>C3M2: <b>{eegAmps[0]}uv</b><br/>C4M1: <b>{eegAmps[1]}uv</b><br/>F3M2: <b>{eegAmps[2]}uv</b><br/>F4M1: <b>{eegAmps[3]}uv</b></span>\n\t\t\t\t<span style={{float:'left', marginLeft:'10px'}}>O1M2: <b>{eegAmps[4]}uv</b><br/>O2M1: <b>{eegAmps[5]}uv</b><br/>E1M2: <b>{eegAmps[6]}uv</b><br/>E2M1: <b>{eegAmps[7]}uv</b></span>\n\t\t\t\t<br />\n\t\t\t</>\n\t\t}\n\t\telse if(eventInfo.channelId === 12){\n\t\t\t// this.props.data[1 ~ 4]\n\n\t\t\t//console.log(this.props.data[1]);\n\t\t\t// 左界在目前頁面\n\t\t\tlet isLeftIn = ((eventInfo.secondFrom >= this.props.secondFrom) && (eventInfo.secondFrom <= this.props.secondTo)) ? 1 : 0;\n\t\t\t// 右界在目前頁面\n\t\t\tlet isRightIn = ((eventInfo.secondTo >= this.props.secondFrom) && (eventInfo.secondTo <= this.props.secondTo)) ? 1 : 0;\n\t\t\tlet left_page = 0,right_page = 0\n\t\t\t//多頁\n\t\t\tif(isLeftIn === 0){\n\t\t\t\tfor(let i=0;i<5;i++){\n\t\t\t\t\tif((eventInfo.secondFrom >= this.props.secondFrom-(i+1)*(this.props.secondTo-this.props.secondFrom)) && (eventInfo.secondFrom <= this.props.secondTo-(i+1)*(this.props.secondTo-this.props.secondFrom))){\n\t\t\t\t\t\tleft_page = i\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(isRightIn === 0){\n\t\t\t\tfor(let i=0;i<5;i++){\n\t\t\t\t\tif((eventInfo.secondTo >= this.props.secondFrom+(i+1)*(this.props.secondTo-this.props.secondFrom)) && (eventInfo.secondTo <= this.props.secondTo+(i+1)*(this.props.secondTo-this.props.secondFrom))){\n\t\t\t\t\t\tright_page = i\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(right_page>2&&left_page>2){\n\t\t\t\tthis.state.show_err=this.state.show_err+1\n\t\t\t}\n\t\t\tif(right_page>2&&left_page>2&&this.state.show_err===1){\n\t\t\t\talert(\"事件頁數有點多囉!請把時間大小放大吧!\")\n\t\t\t}\n\t\t\t//console.log(isLeftIn,isRightIn)\n\t\t\tlet eventAmps = [];\n\t\t\tfor(let i=1; i<5; i++){\n\t\t\t\tlet startPoint = (this.props.data[i].dataLength-1) * (eventInfo.secondFrom - this.props.secondFrom) / (this.props.secondTo - this.props.secondFrom);\n\t\t\t\tlet endPoint = (this.props.data[i].dataLength-1) * (eventInfo.secondTo - this.props.secondFrom) / (this.props.secondTo - this.props.secondFrom);\n\t\t\t\t//console.log(this.props.data[i].dataLength-1,eventInfo.secondFrom,this.props.secondFrom,this.props.secondTo,startPoint, endPoint,startPoint + this.props.data[i].dataLength - 1);\n\t\t\t\tlet eventAmp = 0;\n\t\t\t\tconsole.log(this.props.data[0].data(Math.round(startPoint)),this.props.data[0].data(Math.round(endPoint)))\n\t\t\t\tif(i<=2){\n\t\t\t\t\teventAmp=this.find_upanddown_v1(startPoint,endPoint,130,isLeftIn,isRightIn,left_page,right_page,i)*100\n\t\t\t\t\teventAmp=eventAmp.toFixed(2)\n\t\t\t\t\teventAmps.push(eventAmp);\n\t\t\t\t}else{\n\t\t\t\t\tif(isLeftIn && isRightIn){\n\t\t\t\t\t\ttry {eventAmp = Math.abs(this.props.data[i].data(Math.round(startPoint)) - this.props.data[i].data(Math.round(endPoint))).toFixed(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch(error) {console.log(error);}\n\t\t\t\t\t}\n\t\t\t\t\t// 左界超出\n\t\t\t\t\telse if(isLeftIn === 0 && isRightIn === 1){\n\t\n\t\t\t\t\t\ttry {eventAmp = Math.abs(this.props.preData[left_page][i].data(Math.round(startPoint + (this.props.data[i].dataLength-1)*(left_page+1))) - this.props.data[i].data(Math.round(endPoint))).toFixed(1);}\n\t\t\t\t\t\tcatch(error) {console.log(error);}\n\t\t\t\t\t}\n\t\t\t\t\t// 右界超出\n\t\t\t\t\telse if(isLeftIn === 1 && isRightIn === 0){\n\t\t\t\t\t\t\n\t\t\t\t\t\ttry {eventAmp = Math.abs(this.props.data[i].data(Math.round(startPoint)) - this.props.nextData[right_page][i].data(Math.round(endPoint - (this.props.data[i].dataLength-1)*(right_page+1)))).toFixed(1);}\n\t\t\t\t\t\tcatch(error) {console.log(error);}\n\t\t\t\t\t}\n\t\t\t\t\telse if(isLeftIn === 0 && isRightIn === 0){\n\t\t\t\t\t\ttry {eventAmp = Math.abs(this.props.preData[left_page][i].data(Math.round(startPoint + (this.props.data[i].dataLength-1)*(left_page+1))) - this.props.nextData[right_page][i].data(Math.round(endPoint - (this.props.data[i].dataLength-1)*(right_page+1)))).toFixed(1);}\n\t\t\t\t\t\tcatch(error) {console.log(error);}\n\t\t\t\t\t}\n\t\t\t\t\teventAmps.push(eventAmp);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tamplitude = <>\n\t\t\t\t起訖點振幅<br />\n\t\t\t\t<span style={{float:'left'}}>NPress: <b>{eventAmps[0]}%</b><br/>Therm: <b>{eventAmps[1]}%</b></span>\n\t\t\t\t<span style={{float:'left', marginLeft:'10px'}}>Thor: <b>{eventAmps[2]}uv</b><br/>Abdo: <b>{eventAmps[3]}uv</b></span>\n\t\t\t\t<br />\n\t\t\t</>\n\t\t}\n\t\t else if(eventInfo.channelId === 16){\n\t\t \t// this.props.data[5]\n\n\t\t \t// 左界在目前頁面\n\t\t \tlet isLeftIn = ((eventInfo.secondFrom >= this.props.secondFrom) && (eventInfo.secondFrom <= this.props.secondTo)) ? 1 : 0;\n\t\t \t// 右界在目前頁面\n\t\t \tlet isRightIn = ((eventInfo.secondTo >= this.props.secondFrom) && (eventInfo.secondTo <= this.props.secondTo)) ? 1 : 0;\n\t\t \t//console.log(isLeftIn, isRightIn);\n\n\t\t\t//console.log(this.props.data[5]);\n\n\t\t \tlet startPoint = (this.props.data[5].dataLength-1) * (eventInfo.secondFrom - this.props.secondFrom) / (this.props.secondTo - this.props.secondFrom);\n\t\t \tlet endPoint = (this.props.data[5].dataLength-1) * (eventInfo.secondTo - this.props.secondFrom) / (this.props.secondTo - this.props.secondFrom);\n\t\t \t//console.log(startPoint, endPoint);\n\n\t\t \tlet spo2Amp = 0;\n\t\t \tif(isLeftIn && isRightIn){\n\t\t \t\ttry {spo2Amp = Math.abs(this.props.data[5].data(Math.round(startPoint)) - this.props.data[5].data(Math.round(endPoint))).toFixed(1);}\n\t\t \t\tcatch(error) {console.log(error);}\n\t\t \t}\n\t\t \t// 左界超出\n\t\t\telse if(isLeftIn === 0 && isRightIn === 1){\n\t\t \t\ttry {spo2Amp = Math.abs(this.props.preData[0][5].data(Math.round(startPoint + this.props.data[5].dataLength-1)) - this.props.data[5].data(Math.round(endPoint))).toFixed(1);}\n\t\t \t\tcatch(error) {console.log(error);}\n\t\t \t}\n\t\t \t// 右界超出\n\t\t \telse if(isLeftIn === 1 && isRightIn === 0){\n\t\t \t\ttry {spo2Amp = Math.abs(this.props.data[5].data(Math.round(startPoint)) - this.props.nextData[0][5].data(Math.round(endPoint - this.props.data[5].dataLength+1))).toFixed(1);}\n\t\t \t\tcatch(error) {console.log(error);}\n\t\t \t}\n\t\t\telse if(isLeftIn === 0 && isRightIn === 0){\n\t\t\t\ttry {spo2Amp = Math.abs(this.props.preData[0][5].data(Math.round(startPoint + this.props.data[5].dataLength-1)) - this.props.nextData[0][5].data(Math.round(endPoint - this.props.data[5].dataLength+1))).toFixed(1);}\n\t\t \t\tcatch(error) {console.log(error);}\n\t\t\t}\n\n\n\t\t \tamplitude = <>\n\t\t\t\t<span>\n\t\t \t\t\t{spo2Amp}%\n\t\t\t\t</span>\n\t\t\t\t<br />\n\t\t \t</>\n\t\t}\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\tshow={this.props.visible}\n\t\t\t\tonHide={this.props.onCancel}\n\t\t\t\tsize=\"sm\"\n\t\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\n\t\t\t\tcentered>\n\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\n\t\t\t\t\t\tScored Event Info\n\t\t\t\t\t</Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tStart<br />\n\t\t\t\t\t\t{formatSecond(eventInfo.secondFrom)}<br />\n\t\t\t\t\t\tDuration<br />\n\t\t\t\t\t\t{formatDuration(eventInfo.secondFrom, eventInfo.secondTo)}<br />\n\t\t\t\t\t\t\n\t\t\t\t\t\t{amplitude}\n\t\t\t\t\t\t{desat}<br />\n\t\t\t\t\t\t\n\t\t\t\t\t</p>\n\t\t\t\t\t{this.props.editable ? \n\t\t\t\t\t<select onChange={this.handleChange} size=\"11\" value={eventInfo.type} style={{\"overflow\":\"hidden\"}}>\n\t\t\t\t\t\t{eventTypes ? eventTypes.map((type) => {\n\t\t\t\t\t\t\treturn <option key={type} value={type}>{type}</option>\n\t\t\t\t\t\t}) : null}\n\t\t\t\t\t</select>\n\t\t\t\t\t// <Form.Group>\n\t\t\t\t\t// \t<Form.Control\n\t\t\t\t\t// \t\tas=\"select\"\n\t\t\t\t\t\t\t\n\t\t\t\t\t// \t\tonChange={this.handleChange}\n\t\t\t\t\t// \t\tvalue={eventInfo.type}\n\t\t\t\t\t\t\t\n\t\t\t\t\t// \t\t>\n\t\t\t\t\t// \t\t{eventTypes ? eventTypes.map((type) => {\n\t\t\t\t\t// \t\t\treturn <option key={type} value={type}>{type}</option>\n\t\t\t\t\t// \t\t}) : null}\n\t\t\t\t\t// \t</Form.Control>\n\t\t\t\t\t// </Form.Group> \n\t\t\t\t\t: <p>{eventInfo.type}</p>}\n\t\t\t\t</Modal.Body>\n\t\t\t\t{this.props.editable ? <Modal.Footer>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"danger\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.props.onDelete(this.props.eventId)\n\t\t\t\t\t\t\tthis.props.onCancel()\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tDelete\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.Footer> : null}\n\t\t\t</Modal>\n\t\t)\n\t}\n\tasync componentDidMount() {\n\t\t//console.log('mount')\n\t\t// if is spo2 try to get desat from server\n\t\tif (!this.props.showDesat) return\n\t\tlet eventInfo = this.props.getEventInfo(this.props.eventId)\n\t\tlet desatResult = await axios.post('/calculate_spo2', {\n\t\t\ttimeA: parseInt(eventInfo.secondFrom.toFixed(0)),\n\t\t\ttimeB: parseInt(eventInfo.secondTo.toFixed(0)),\n\t\t\tpsgFileId: this.props.psgFileId\n\t\t})\n\t\tthis.setState({\n\t\t\tdesat: desatResult.data.spo2.toFixed(1)\n\t\t})\n\t}\n}\n\nexport default EventInfoWindow","import React, {Component} from 'react'\nimport ChannelChart from './ChannelChart'\nimport CursorLineLayer from './CursorLineLayer'\nimport InteractiveLayer from './InteractiveLayer'\nimport GridLayer from './GridLayer'\nimport EventsLayer from './EventsLayer'\nimport LabelLayer from './LabelLayer'\nimport StageLayer from './StageLayer'\nimport EventInfoWindow from './EventInfoWindow'\nimport { linearScale } from './functions/LinearScale'\n//import { defaultParameters } from './functions/DefaultParameters'\nimport clamp from './functions/Clamp'\n\nconst LEFT_BUTTON_NOTHING = -1\nconst LEFT_BUTTON_MOVE_CURSOR = 0\nconst LEFT_BUTTON_CLICK_EVENT = 1\nconst LEFT_BUTTON_DRAG_EVENT = 2\n\nclass MultichannelChart extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\t\n\t\t// setup index to convert channelId to channelNum\n\t\tthis.channelIdToChannelNum = {}\n\t\tfor (let i = 0; i < props.data.length; i++) {\n\t\t\tthis.channelIdToChannelNum[props.data[i].channelId] = i\n\t\t}\n\t\t//console.log(this.channelIdToChannelNum)\n\t\tthis.verticalPositionToChannelId = this.verticalPositionToChannelId.bind(this)\n\t\tthis.onRightDragStart = this.onRightDragStart.bind(this)\n\t\tthis.onRightDrag = this.onRightDrag.bind(this)\n\t\tthis.onRightDragEnd = this.onRightDragEnd.bind(this)\n\t\tthis.onLeftDragStart = this.onLeftDragStart.bind(this)\n\t\tthis.onLeftDrag = this.onLeftDrag.bind(this)\n\t\tthis.onLeftDragEnd = this.onLeftDragEnd.bind(this)\n\t\tthis.dragCancel = this.dragCancel.bind(this)\n\t\tthis.onMouseMove = this.onMouseMove.bind(this)\n\t\tthis.onMouseScroll = this.onMouseScroll.bind(this)\n\t\t\n\t\tthis.secondToXPosition = this.secondToXPosition.bind(this)\n\t\tthis.valueToYPosition = this.valueToYPosition.bind(this)\n\t\t\n\t\tthis.getChannelCenterline = this.getChannelCenterline.bind(this)\n\n\t\tthis.gravityToXPosition = this.gravityToXPosition.bind(this)\n\t\t\n\t\tthis.proportionToXPosition = this.proportionToXPosition.bind(this)\n\t\tthis.proportionToAbsoluteSecond = this.proportionToAbsoluteSecond.bind(this)\n\t\tthis.absoluteSecondToXPosition = this.absoluteSecondToXPosition.bind(this)\n\t\t\n\t\tthis.isMouseAtAnyEventBoundary = this.isMouseAtAnyEventBoundary.bind(this)\n\t\tthis.getEventWhoseBoundaryIsMouseAt = this.getEventWhoseBoundaryIsMouseAt.bind(this)\n\t\tthis.getEventWhichIsMouseOn = this.getEventWhichIsMouseOn.bind(this)\n\t\t\n\t\tthis.state = {\n\t\t\t// 以下單位皆為proportion\n\t\t\trightDraggingStart: null, // 右鍵拖曳起始點\n\t\t\trightDragging: null, // 右鍵拖曳中位置\n\t\t\trightDraggingChannel: null, // 右鍵拖曳中channel\n\t\t\tleftDraggingStart: null, // 左鍵拖曳起始點\n\t\t\tleftDragging: null, // 左鍵拖曳中位置\n\t\t\tleftDraggingChannel: null, // 左鍵拖曳中channel\n\t\t\t\n\t\t\tleftDraggingType: LEFT_BUTTON_NOTHING, // 左鍵動作種類\n\t\t\teditingEvent: null,\n\t\t\t\n\t\t\teventInfoWindowEventId: null,\n\t\t\teventInfoWindowVisible: false,\n\t\t\t\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\t//關閉瀏覽器默認右键事件\n\t\tdocument.oncontextmenu = function (e) {\n\t\t\te = e || window.event;\n\t\t\treturn false;\n\t\t};\n\t}\n\tisMouseAtAnyEventBoundary(channelId, mouseXPosition) {\n\t\treturn this.getEventWhoseBoundaryIsMouseAt(channelId, mouseXPosition) !== null\n\t}\n\tgetEventWhoseBoundaryIsMouseAt(channelId, mouseXPosition) {\n\t\t//let absoluteSecondToXPosition = linearScale(this.props.secondFrom, this.props.secondTo, this.props.leftSpace, this.props.width - this.props.rightSpace)\n\t\tlet nearestDistance = 5\n\t\tlet nearestEvent = null\n\t\tfor (let i = 0; i < this.props.events.length; i++) {\n\t\t\tlet event = this.props.events[i]\n\t\t\tif (event.channelId === channelId) {\n\t\t\t\tif (event.secondFrom >= this.props.secondFrom) {\n\t\t\t\t\tlet eventLeftBoundaryXPosition = this.absoluteSecondToXPosition(event.secondFrom)\n\t\t\t\t\tlet distance = Math.abs(eventLeftBoundaryXPosition - mouseXPosition)\n\t\t\t\t\tif (distance <= nearestDistance) {\n\t\t\t\t\t\tnearestDistance = distance\n\t\t\t\t\t\tnearestEvent = Object.assign({\n\t\t\t\t\t\t\tnearestBoundary: 'left'\n\t\t\t\t\t\t}, event)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (event.secondTo <= this.props.secondTo) {\n\t\t\t\t\tlet eventRightBoundaryXPosition = this.absoluteSecondToXPosition(event.secondTo)\n\t\t\t\t\tlet distance = Math.abs(eventRightBoundaryXPosition - mouseXPosition)\n\t\t\t\t\tif (distance <= nearestDistance) {\n\t\t\t\t\t\tnearestDistance = distance\n\t\t\t\t\t\tnearestEvent = Object.assign({\n\t\t\t\t\t\t\tnearestBoundary: 'right'\n\t\t\t\t\t\t}, event)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn nearestEvent\n\t}\n\tgetEventWhichIsMouseOn(channelId, mouseXPosition) {\n\t\tlet xPositionToAbsoluteSecond = linearScale(this.props.leftSpace, this.props.width - this.props.rightSpace, this.props.secondFrom, this.props.secondTo)\n\t\tlet mouseAbsoluteSecond = xPositionToAbsoluteSecond(mouseXPosition)\n\t\tfor (let i = 0; i < this.props.events.length; i++) {\n\t\t\tlet event = this.props.events[i]\n\t\t\tif (event.channelId === channelId) {\n\t\t\t\tif (event.secondFrom < mouseAbsoluteSecond && mouseAbsoluteSecond < event.secondTo) {\n\t\t\t\t\treturn Object.assign({}, event)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null\n\t}\n\t// function for InteractiveLayer to get channel ID\n\tverticalPositionToChannelId(y) {\n\t\tconst channelHeight = (this.props.height - this.props.topSpace - this.props.bottomSpace + this.props.interspace) / this.props.data.length - this.props.interspace\n\t\tconst halfChannelHeight = channelHeight / 2\n\t\tlet channelCenterPosition = this.props.topSpace + halfChannelHeight\n\t\tfor (let i = 0; i < this.props.data.length; i++) {\n\t\t\tif (Math.abs(y - channelCenterPosition) <= halfChannelHeight) {\n\t\t\t\treturn this.props.data[i].channelId\n\t\t\t}\n\t\t\tchannelCenterPosition += channelHeight + this.props.interspace\n\t\t}\n\t\treturn -1\n\t}\n\t// functions for InteractiveLayer callback\n\tonRightDragStart(channelId, proportion) {\n\t\t//console.log(\"right drag start\", channelId, proportion)\n\t\tif (proportion > 1 || proportion < 0) return\n\t\t// 確認這個channel上可不可以標事件\n\t\tif (channelId === -1) return\n\t\tlet channelNum = this.channelIdToChannelNum[channelId]\n\t\t//console.log('draggable', this.props.data[channelNum].draggable)\n\t\tif (!this.props.data[channelNum].draggable) return\n\t\tthis.setState({\n\t\t\trightDraggingStart: proportion,\n\t\t\trightDraggingChannel: channelId,\n\t\t})\n\t}\n\tonRightDrag(proportion) {\n\t\t//console.log(\"right drag\", proportion)\n\t\tproportion = clamp(0, proportion, 1)\n\t\tif (this.state.rightDraggingStart === null) return // 如果在標籤上拖動，直接返回\n\t\t//console.log(proportion)\n\t\t\n\t\tthis.setState({\n\t\t\trightDragging: proportion\n\t\t})\n\t}\n\tonRightDragEnd(proportion) {\n\t\t//console.log(\"right drag end\", proportion)\n\t\tproportion = clamp(0, proportion, 1)\n\t\t//console.log(this.state.rightDraggingChannel)\n\t\tif (this.state.rightDraggingChannel === -1 ||\n\t\t\tthis.state.rightDraggingStart === null) { // 如果在間隙拖動\n\t\t\t//console.log('無效事件')\n\t\t} else if (this.state.rightDragging === null) { // 如果只有點擊，沒有拖動\n\t\t\t// 新增一個 3 秒的事件\n\t\t\tlet absoluteSecondFrom = this.proportionToAbsoluteSecond(this.state.rightDraggingStart)\n\t\t\tlet absoluteSecondTo = absoluteSecondFrom + 3\n\t\t\tif (this.props.editable) this.props.addEvent(this.state.rightDraggingChannel, absoluteSecondFrom, absoluteSecondTo, this.props.getChannelEvents(this.state.rightDraggingChannel)[0], false)\n\t\t} else if (proportion === this.state.rightDraggingStart) { // 如果頭尾相同\n\t\t\tconsole.log('無效事件')\n\t\t}else { // 如果有拖動\n\t\t\tlet absoluteSecondStart = this.proportionToAbsoluteSecond(this.state.rightDraggingStart)\n\t\t\tlet absoluteSecondEnd = this.proportionToAbsoluteSecond(proportion)\n\t\t\tlet absoluteSecondFrom = Math.min(absoluteSecondStart, absoluteSecondEnd)\n\t\t\tlet absoluteSecondTo = Math.max(absoluteSecondStart, absoluteSecondEnd)\n\t\t\tif (this.props.editable) this.props.addEvent(this.state.rightDraggingChannel, absoluteSecondFrom, absoluteSecondTo, this.props.getChannelEvents(this.state.rightDraggingChannel)[0], false)\n\t\t}\n\t\t\n\n\t\t// 在新增完事件後開啟info window\n\t\tlet event = this.getEventWhichIsMouseOn(this.state.rightDraggingChannel, this.proportionToXPosition(proportion) - 5)\n\t\tif (event === null) event = this.getEventWhichIsMouseOn(this.state.rightDraggingChannel, this.proportionToXPosition(proportion) + 5)\n\t\tif (event !== null && this.state.rightDraggingChannel !== 2 && this.state.rightDraggingChannel !== 17 && this.state.rightDraggingChannel !== 18) {\n\t\t\t//console.log('popup window')\n\t\t\t//let eventId = event.eventId\n\t\t\tthis.setState({\n\t\t\t\teventInfoWindowEventId: event.eventId,\n\t\t\t\teventInfoWindowVisible: true,\n\t\t\t\trightDragging: null,\n\t\t\t\trightDraggingChannel: null,\n\t\t\t\trightDraggingStart: null,\n\t\t\t})\n\t\t}\n\t\telse {\n\t\t\tthis.setState({\n\t\t\t\trightDragging: null,\n\t\t\t\trightDraggingChannel: null,\n\t\t\t\trightDraggingStart: null,\n\t\t\t})\n\t\t}\n\t}\n\tonLeftDragStart(channelId, proportion) {\n\t\t//console.log(\"left drag start\", channelId, proportion)\n\t\tlet mouseXPosition = this.proportionToXPosition(proportion)\n\t\t//console.log('mouseXPosition', mouseXPosition)\n\t\tlet event = this.getEventWhoseBoundaryIsMouseAt(channelId, mouseXPosition)\n\t\tif (event === null) { // 可能是移動游標或是點擊事件\n\t\t\tif (proportion < 0 || proportion > 1) return\n\t\t\tevent = this.getEventWhichIsMouseOn(channelId, mouseXPosition)\n\t\t\tif (event === null) { // 移動游標\n\t\t\t\tthis.setState({\n\t\t\t\t\tleftDraggingStart: proportion,\n\t\t\t\t\tleftDraggingType: LEFT_BUTTON_MOVE_CURSOR,\n\t\t\t\t\tleftDraggingChannel: channelId\n\t\t\t\t})\n\t\t\t\tthis.props.moveCursor(this.proportionToAbsoluteSecond(proportion))\n\t\t\t} else { // 點擊事件\n\t\t\t\tthis.setState({\n\t\t\t\t\tleftDraggingStart: proportion,\n\t\t\t\t\tleftDraggingType: LEFT_BUTTON_CLICK_EVENT,\n\t\t\t\t\tleftDraggingChannel: channelId,\n\t\t\t\t\teditingEvent: event\n\t\t\t\t})\n\t\t\t}\n\t\t} else { // 拖曳事件\n\t\t\tlet absoluteSecondToProportion = linearScale(this.props.secondFrom, this.props.secondTo, 0, 1)\n\t\t\tlet dragStartProportion = absoluteSecondToProportion( // 將起始位置設為事件邊緣\n\t\t\t\tevent.nearestBoundary === 'left' ?\n\t\t\t\tevent.secondFrom :\n\t\t\t\tevent.nearestBoundary === 'right' ?\n\t\t\t\tevent.secondTo : null)\n\t\t\tthis.setState({\n\t\t\t\tleftDraggingStart: dragStartProportion,\n\t\t\t\tleftDraggingType: LEFT_BUTTON_DRAG_EVENT,\n\t\t\t\tleftDraggingChannel: channelId,\n\t\t\t\teditingEvent: event\n\t\t\t})\n\t\t}\n\t}\n\tonLeftDrag(proportion) {\n\t\t//console.log(\"left drag\", proportion)\n\t\tproportion = clamp(0, proportion, 1)\n\t\tthis.setState({\n\t\t\tleftDragging: proportion\n\t\t})\n\t\tif (this.state.leftDraggingType === LEFT_BUTTON_MOVE_CURSOR) {\n\t\t\tthis.props.moveCursor(this.proportionToAbsoluteSecond(proportion))\n\t\t}\n\t}\n\tonLeftDragEnd(proportion) {\n\t\t//console.log(\"left drag end\", proportion)\n\t\tproportion = clamp(0, proportion, 1)\n\t\tif (this.state.leftDraggingType === LEFT_BUTTON_MOVE_CURSOR) {\n\t\t\tthis.props.moveCursor(this.proportionToAbsoluteSecond(proportion))\n\t\t} else if (this.state.leftDraggingType === LEFT_BUTTON_CLICK_EVENT) {\n\t\t\tlet event = this.getEventWhichIsMouseOn(this.state.leftDraggingChannel, this.proportionToXPosition(proportion))\n\t\t\tif (event !== null && event.eventId === this.state.editingEvent.eventId) {\n\t\t\t\t//console.log('popup window')\n\t\t\t\t//let eventId = event.eventId\n\t\t\t\tthis.setState({\n\t\t\t\t\teventInfoWindowEventId: event.eventId,\n\t\t\t\t\teventInfoWindowVisible: true\n\t\t\t\t})\n\t\t\t}\n\t\t} else if (this.state.leftDraggingType === LEFT_BUTTON_DRAG_EVENT) {\n\t\t\tif (this.state.leftDragging !== null) {\n\t\t\t\tlet event = this.state.editingEvent\n\t\t\t\tlet newBoundary1Second = this.proportionToAbsoluteSecond(proportion)\n\t\t\t\tlet newBoundary2Second =\n\t\t\t\t\tevent.nearestBoundary === 'left' ?\n\t\t\t\t\tevent.secondTo :\n\t\t\t\t\tevent.nearestBoundary === 'right' ?\n\t\t\t\t\tevent.secondFrom : null\n\t\t\t\tthis.props.deleteEvent(event.eventId)\n\t\t\t\tlet secondFrom = Math.min(newBoundary1Second, newBoundary2Second)\n\t\t\t\tlet secondTo = Math.max(newBoundary1Second, newBoundary2Second)\n\t\t\t\tif (this.props.editable) this.props.addEvent(this.state.leftDraggingChannel, secondFrom, secondTo, event.type, true)\n\t\t\t}\n\t\t}\n\t\t//let event = this.getEventWhichIsMouseOn(this.state.leftDraggingChannel, this.proportionToXPosition(proportion) + 5)\n\t\t//console.log(event)\n\t\t// if (event !== null && this.state.leftDraggingChannel !== 2) {\n\t\t// \t//console.log('popup window')\n\t\t// \t//let eventId = event.eventId\n\t\t// \t/*\n\t\t// \tthis.setState({\n\t\t// \t\teventInfoWindowEventId: event.eventId,\n\t\t// \t\teventInfoWindowVisible: true\n\t\t// \t})\n\t\t// \t*/\n\t\t// }\n\t\tthis.setState({\n\t\t\tleftDraggingStart: null,\n\t\t\tleftDragging: null,\n\t\t\tleftDraggingChannel: null,\n\t\t\tleftDraggingType: LEFT_BUTTON_NOTHING,\n\t\t\teditingEvent: null\n\t\t})\n\t}\n\tdragCancel() {\n\t\t//console.log(\"drag cancel\")\n\t\tthis.setState({\n\t\t\trightDragging: null,\n\t\t\trightDraggingChannel: null,\n\t\t\trightDraggingStart: null,\n\t\t\tleftDraggingStart: null,\n\t\t\tleftDraggingChannel: null,\n\t\t\tleftDragging: null,\n\t\t\tleftDraggingType: LEFT_BUTTON_NOTHING,\n\t\t\teditingEvent: null\n\t\t})\n\t}\n\tonMouseMove(channelId, proportion) {\n\t\t//console.log(\"mouse move\", channelId, proportion)\n\t\tlet mouseXPosition = this.proportionToXPosition(proportion)\n\t\tif (this.props.editable) {\n\t\t\tif (this.isMouseAtAnyEventBoundary(channelId, mouseXPosition)) {\n\t\t\t\tdocument.body.style.cursor = 'ew-resize'\n\t\t\t} else {\n\t\t\t\tdocument.body.style.cursor = 'auto'\n\t\t\t}\n\t\t}\n\t}\n\tonMouseScroll(channelId, up) {\n\t\t//console.log(\"mouse scroll\", channelId, up)\n\t\tlet zoomable = false\n\t\tlet i = 0\n\t\tfor (i = 0; i < this.props.data.length; i++) { // 先查出那個 channel 是否可以縮放\n\t\t\tif (this.props.data[i].channelId === channelId) {\n\t\t\t\tzoomable = this.props.data[i].zoomable\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (zoomable) { // 如果可以縮放\n\t\t\tthis.props.zoomChannel(channelId, up)\n\t\t\tlet nextScales = Object.assign({}, this.state.scales)\n\t\t\tif (nextScales[channelId] === undefined) {\n\t\t\t\tnextScales[channelId] = 0\n\t\t\t}\n\t\t\tnextScales[channelId] += up ? -1 : 1\n\t\t\tnextScales[channelId] = clamp(this.props.data[i].zoomMin, nextScales[channelId], this.props.data[i].zoomMax)\n\t\t\tthis.setState({\n\t\t\t\tscales: nextScales\n\t\t\t})\n\t\t}\n\t}\n\tproportionToXPosition(proportion) {\n\t\tlet transform = linearScale(0, 1, this.props.leftSpace, this.props.width - this.props.rightSpace)\n\t\treturn transform(proportion)\n\t}\n\tproportionToAbsoluteSecond(proportion) {\n\t\tlet transform = linearScale(0, 1, this.props.secondFrom, this.props.secondTo)\n\t\treturn transform(proportion)\n\t}\n\tabsoluteSecondToXPosition(absoluteSecond) {\n\t\tlet transform = linearScale(this.props.secondFrom, this.props.secondTo, this.props.leftSpace, this.props.width - this.props.rightSpace)\n\t\treturn transform(absoluteSecond)\n\t}\n\t// functions for GridLayer to get position\n\tsecondToXPosition(sec) {\n\t\tlet pageTimeInterval = this.props.secondTo - this.props.secondFrom\n\t\t//console.log(this.props.secondTo, this.props.secondFrom)\n\t\tlet transformFunction = linearScale(0, pageTimeInterval, this.props.leftSpace, this.props.width - this.props.rightSpace)\n\t\treturn transformFunction(sec)\n\t}\n\tvalueToYPosition(channelId, value) {\n\t\tlet channelNum = this.channelIdToChannelNum[channelId]\n\t\t//console.log(this.channelIdToChannelNum)\n\t\t//console.log('channelId', channelId)\n\t\t//console.log('channelNum', channelNum)\n\t\tconst channelHeight = (this.props.height - this.props.topSpace - this.props.bottomSpace + this.props.interspace) / this.props.data.length - this.props.interspace\n\t\tlet top = this.props.topSpace + (channelHeight + this.props.interspace) * channelNum\n\t\tlet bottom = top + channelHeight\n\t\tlet channelData = this.props.data[channelNum]\n\t\tlet transformFunction = linearScale(channelData.max, channelData.min, top, bottom)\n\t\treturn transformFunction(value)\n\t}\n\t// functions for EventsLayer\n\tgetChannelCenterline(channelId) {\n\t\tlet channelNum = this.channelIdToChannelNum[channelId]\n\t\tlet data = this.props.data[channelNum]\n\t\treturn this.valueToYPosition(channelId, (data.min + data.max) / 2)\n\t}\n\t// functions for LabelLayer\n\tgravityToXPosition(gravity) {\n\t\treturn gravity === 'left' ? 0 : gravity === 'right' ? this.props.leftSpace : this.props.leftSpace / 2\n\t}\n\trender() {\n\t\tlet charts = []\n\t\tcharts.push(\n\t\t\t<GridLayer\n\t\t\t\tkey=\"gridLayer\"\n\t\t\t\twidth={this.props.width}\n\t\t\t\theight={this.props.height}\n\t\t\t\tleftBoundary={this.props.leftSpace}\n\t\t\t\trightBoundary={this.props.width - this.props.rightSpace}\n\t\t\t\tbottomBoundary={this.props.height - this.props.bottomSpace}\n\t\t\t\ttopBoundary={this.props.topSpace}\n\t\t\t\tsecondToXPosition={this.secondToXPosition}\n\t\t\t\tvalueToYPosition={this.valueToYPosition}\n\t\t\t\tverticalLines={this.props.verticalLines}\n\t\t\t\thorizontalLines={this.props.horizontalLines}\n\t\t\t\tisZoomed={(channelId) => {\n\t\t\t\t\tlet channelNum = this.channelIdToChannelNum[channelId]\n\t\t\t\t\treturn this.props.data[channelNum].zoom !== 0\n\t\t\t\t}}\n\t\t\t/>\n\t\t)\n\t\tlet channelHeight = (this.props.height - this.props.topSpace - this.props.bottomSpace + this.props.interspace) / this.props.data.length - this.props.interspace\n\t\t//console.log(channelHeight)\n\t\tif (this.props.loading === false) {\n\t\t\tfor (let i = 0; i < this.props.data.length; i++) {\n\t\t\t\tlet x1 = this.props.data[i].min\n\t\t\t\tlet x2 = this.props.data[i].max\n\t\t\t\t//console.log(this.props.data[i].channelId)\n\t\t\t\t\n\t\t\t\tlet y2 = this.props.topSpace + i * (this.props.interspace + channelHeight)\n\t\t\t\tlet y1 = y2 + channelHeight\n\t\t\t\t\n\t\t\t\tlet zoomScale = -1 * (this.props.data[i].zoom) + 1\n\t\t\t\tif (zoomScale <= 0) zoomScale = 1\n\t\t\t\tlet yTransform\n\t\t\t\t// spo2縮放\n\t\t\t\tif(this.props.data[i].channelId === 16){\n\t\t\t\t\tyTransform = (x) => {\n\t\t\t\t\t\treturn (zoomScale * (100 - x)) + y2\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tyTransform = linearScale(x1, x2, y1, y2)\n\t\t\t\t}\n\t\t\t\tlet xTransform = linearScale(0, this.props.data[i].dataLength - 1, this.props.leftSpace, this.props.width - this.props.rightSpace)\n\t\t\t\tcharts.push (\n\t\t\t\t\t<ChannelChart\n\t\t\t\t\t\tchartKey={\n\t\t\t\t\t\t\tthis.props.data[i].channelId + ',' +\n\t\t\t\t\t\t\tthis.props.width + ',' +\n\t\t\t\t\t\t\tthis.props.height + ',' +\n\t\t\t\t\t\t\tthis.props.secondFrom + ',' +\n\t\t\t\t\t\t\tthis.props.secondTo + ',' +\n\t\t\t\t\t\t\tx1 + ',' + x2 + ',' + zoomScale\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\twidth={this.props.width}\n\t\t\t\t\t\theight={this.props.height}\n\t\t\t\t\t\tlineWidth={this.props.data[i].lineWidth}\n\t\t\t\t\t\tdataLength={this.props.data[i].dataLength}\n\t\t\t\t\t\tdata={this.props.data[i].data}\n\t\t\t\t\t\txTransform={xTransform}\n\t\t\t\t\t\tyTransform={yTransform}\n\t\t\t\t\t\tcolor={this.props.data[i].color}\n\t\t\t\t\t\tshowLocalExtreme={this.props.data[i].showLocalExtreme}\n\t\t\t\t\t\tcid={this.props.data[i].channelId}\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tlet editingEvent = null\n\t\tif (this.state.rightDraggingStart !== null &&\n\t\t\tthis.state.rightDragging !== null &&\n\t\t\tthis.state.rightDraggingChannel !== -1) { // 如果右鍵拖曳而且有移動且不是在間隙拖動\n\t\t\teditingEvent = {}\n\t\t\tlet proportionToRelativeSecond = linearScale(0, 1, 0, this.props.secondTo - this.props.secondFrom)\n\t\t\teditingEvent.channelId = this.state.rightDraggingChannel\n\t\t\tlet rightDraggingStartRelativeSecond = proportionToRelativeSecond(this.state.rightDraggingStart)\n\t\t\tlet rightDraggingRelativeSecond = proportionToRelativeSecond(this.state.rightDragging)\n\t\t\teditingEvent.secondFrom = Math.min(rightDraggingStartRelativeSecond, rightDraggingRelativeSecond)\n\t\t\teditingEvent.secondTo = Math.max(rightDraggingStartRelativeSecond, rightDraggingRelativeSecond)\n\t\t\t//console.log(editingEvent)\n\t\t}\n\t\t\n\t\tif (this.state.leftDraggingType === LEFT_BUTTON_DRAG_EVENT &&\n\t\t\tthis.state.leftDragging !== null) { // 如果正在拖曳事件且開始拖曳\n\t\t\teditingEvent = {}\n\t\t\tlet oneBoundary = this.proportionToAbsoluteSecond(this.state.leftDragging) // 顯示的其中一個拖曳框邊界\n\t\t\toneBoundary -= this.props.secondFrom\n\t\t\t//console.log('one boundary', oneBoundary)\n\t\t\tlet theOtherBoundary = null // 顯示的另一個拖曳框邊界\n\t\t\tif (this.state.editingEvent.nearestBoundary === 'left') { // 如果拖曳左邊界\n\t\t\t\ttheOtherBoundary = clamp(this.props.secondFrom, this.state.editingEvent.secondTo, this.props.secondTo) // 超過頁面的部份截斷\n\t\t\t} else { // 如果拖曳右邊界\n\t\t\t\ttheOtherBoundary = clamp(this.props.secondFrom, this.state.editingEvent.secondFrom, this.props.secondTo) // 超過頁面的部份截斷\n\t\t\t}\n\t\t\ttheOtherBoundary -= this.props.secondFrom // 轉成相對秒數\n\t\t\t//console.log('the other boundary', theOtherBoundary)\n\t\t\teditingEvent.secondFrom = Math.min(oneBoundary, theOtherBoundary)\n\t\t\teditingEvent.secondTo = Math.max(oneBoundary, theOtherBoundary)\n\t\t\teditingEvent.channelId = this.state.leftDraggingChannel\n\t\t\t//console.log(editingEvent)\n\t\t}\n\t\t//console.log(this.props.events)\n\t\tcharts.push(\n\t\t\t<EventsLayer\n\t\t\t\tkey=\"eventsLayer\"\n\t\t\t\twidth={this.props.width}\n\t\t\t\theight={this.props.height}\n\t\t\t\tgetChannelCenterline={this.getChannelCenterline}\n\t\t\t\tsecondToXPosition={this.secondToXPosition}\n\t\t\t\teventHeight={channelHeight}\n\t\t\t\tinterval={this.props.secondTo - this.props.secondFrom}\n\t\t\t\tevents={this.props.events.map((event, index) => {\n\t\t\t\t\tlet derivedEvent = {\n\t\t\t\t\t\tchannelId: event.channelId,\n\t\t\t\t\t\tsecondFrom: event.secondFrom - this.props.secondFrom,\n\t\t\t\t\t\tsecondTo: event.secondTo - this.props.secondFrom,\n\t\t\t\t\t\ttype: event.type,\n\t\t\t\t\t\tcolor: event.color,\n\t\t\t\t\t\teventId: event.eventId\n\t\t\t\t\t}\n\t\t\t\t\treturn derivedEvent\n\t\t\t\t})}\n\t\t\t\teditingEvent={this.props.editable ? editingEvent : null}\n\t\t\t/>\n\t\t)\n\t\tcharts.push(\n\t\t\t<StageLayer\n\t\t\t\tkey={'stageLayer'}\n\t\t\t\tleftBoundary={this.props.leftSpace}\n\t\t\t\trightBoundary={this.props.width - this.props.rightSpace}\n\t\t\t\tbottomBoundary={this.props.height - this.props.bottomSpace}\n\t\t\t\ttopBoundary={this.props.topSpace}\n\t\t\t\twidth={this.props.width}\n\t\t\t\theight={this.props.height}\n\t\t\t\tstages={this.props.stages}\n\t\t\t/>\n\t\t)\n\t\tlet absoluteSecondToProportion = linearScale(this.props.secondFrom, this.props.secondTo, 0, 1)\n\t\tcharts.push(\n\t\t\t<CursorLineLayer\n\t\t\t\tkey=\"cursorLineLayer\"\n\t\t\t\twidth={this.props.width}\n\t\t\t\theight={this.props.height}\n\t\t\t\tleftBoundary={this.props.leftSpace}\n\t\t\t\trightBoundary={this.props.width - this.props.rightSpace}\n\t\t\t\tbottomBoundary={this.props.height - this.props.bottomSpace}\n\t\t\t\ttopBoundary={this.props.topSpace}\n\t\t\t\tproportion={absoluteSecondToProportion(this.props.cursorSecond)}\n\t\t\t/>\n\t\t)\n\t\tlet horizontalPositionToProportion = linearScale(this.props.leftSpace, this.props.width - this.props.rightSpace, 0, 1)\n\t\tcharts.push(\n\t\t\t<LabelLayer\n\t\t\t\tkey=\"labelLayer\"\n\t\t\t\twidth={this.props.width}\n\t\t\t\theight={this.props.height}\n\t\t\t\tgravityToXPosition={this.gravityToXPosition}\n\t\t\t\tlabels={this.props.labels}\n\t\t\t\tvalueToYPosition={this.valueToYPosition}\n\t\t\t/>\n\t\t)\n\t\tcharts.push(\n\t\t\t<InteractiveLayer\n\t\t\t\tkey='interactiveLayer'\n\t\t\t\thorizontalPositionToProportion={horizontalPositionToProportion}\n\t\t\t\tverticalPositionToChannelId={this.verticalPositionToChannelId}\n\t\t\t\tonRightDragStart={this.onRightDragStart}\n\t\t\t\tonRightDrag={this.onRightDrag}\n\t\t\t\tonRightDragEnd={this.onRightDragEnd}\n\t\t\t\tonLeftDragStart={this.onLeftDragStart}\n\t\t\t\tonLeftDrag={this.onLeftDrag}\n\t\t\t\tonLeftDragEnd={this.onLeftDragEnd}\n\t\t\t\tdragCancel={this.dragCancel}\n\t\t\t\tonMouseMove={this.onMouseMove}\n\t\t\t\tonMouseScroll={this.onMouseScroll}\n\t\t\t/>\n\t\t)\n\t\tlet showDesat = false\n\t\tif (this.state.eventInfoWindowEventId !== null) {\n\t\t\tlet event = this.props.getEventInfo(this.state.eventInfoWindowEventId)\n\t\t\tshowDesat = this.props.data[this.channelIdToChannelNum[event.channelId]].showDesat\n\t\t}\n\t\t//console.log(this.state.eventInfoWindowVisible)\n\t\tif (this.state.eventInfoWindowVisible) {\n\t\t\tcharts.push(\n\t\t\t\t<EventInfoWindow\n\t\t\t\t\tkey={'eventInfoWindow'}\n\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\tonSelected={this.props.setEventType}\n\t\t\t\t\tonCancel={() => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\teventInfoWindowVisible: false\n\t\t\t\t\t\t})\n\t\t\t\t\t}}\n\t\t\t\t\tonDelete={this.props.deleteEvent}\n\t\t\t\t\tgetEventInfo={this.props.getEventInfo}\n\t\t\t\t\tgetChannelEvents={this.props.getChannelEvents}\n\t\t\t\t\teventId={this.state.eventInfoWindowEventId}\n\t\t\t\t\tdata={this.props.data}\n\t\t\t\t\tpreData={this.props.preData}\n\t\t\t\t\tnextData={this.props.nextData}\n\t\t\t\t\tsecondFrom={this.props.secondFrom}\n\t\t\t\t\tsecondTo={this.props.secondTo}\n\t\t\t\t\tvisible={true}\n\t\t\t\t\tshowDesat={showDesat}\n\t\t\t\t\tpsgFileId={this.props.psgFileId}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\t\treturn charts\n\t}\n}\n\nMultichannelChart.defaultProps = {\n\tdata: [/*{\n\t\tupdate: PropTypes.bool,\n\t\tlineWidth: PropTypes.number,\n\t\tdataLength: PropTypes.number,\n\t\tdata: PropTypes.func.isRequired,\n\t\tmax: ...,\n\t\tmin: ...,\n\t\tcolor: PropTypes.string\n\t}*/],\n\twidth: 800,\n\theight:800,\n\ttopSpace: 10,\n\tbottomSpace: 10,\n\tinterspace: 5,\n\tleftSpace: 30,\n\trightSpace: 10\n}\n\nexport default MultichannelChart","import React from 'react';\nimport styles from './css/timeIntervalDropdownStyle.module.css'\nimport Dropdown from 'react-bootstrap/Dropdown'\n\nfunction TimeIntervalDropdown(props) {\n\tconst CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\n\t\t<a\n\t\t\thref=\"/#/\"\n\t\t\tref={ref}\n\t\t\tclassName={styles.timeIntervalDropdown}\n\t\t\tonClick={(e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\t//console.log('on click')\n\t\t\t\tonClick(e);\n\t\t\t}}>\n\t\t\t{children}\n\t\t\t&#x25bc;\n\t\t</a>\n\t))\n\t//console.log('items', props.items)\n\treturn(\n\t\t//<div></div>\n\t\t<Dropdown onSelect={props.selectItem}>\n\t\t\t<Dropdown.Toggle as={CustomToggle} id=\"dropdown-custom-components\">\n\t\t\t\t{props.selectedItem}\n\t\t\t</Dropdown.Toggle>\n\t\t\t<Dropdown.Menu>\n\t\t\t\t{props.items.map((item) => {\n\t\t\t\t\treturn <Dropdown.Item\n\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\teventKey={item}>\n\t\t\t\t\t\t{item}\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t})}\n\t\t\t</Dropdown.Menu>\n\t\t</Dropdown>\n\t)\n}\n\nexport default TimeIntervalDropdown","import React, { Component } from 'react';\nimport MultichannelChart from './MultichannelChart'\nimport TimeIntervalDropdown from './TimeIntervalDropdown'\nimport SplitPane from 'react-split-pane'\nimport styles from './css/signalPanelStyle.module.css'\n//import labelsGenerator from './functions/LabelsGenerator'\n\n//import EventInfoWindow from './EventInfoWindow'\n\nclass SignalPanel extends Component {\n\tref = React.createRef()\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.firstTime = true\n\t\tthis.state = {\n\t\t\theight: 0,\n\t\t\twidth: 0,\n\t\t\tsplittedPanelHeight: 0\n\t\t}\n\t\tthis.windowResize = this.windowResize.bind(this)\n\t\tthis.splittedPanelResize = this.splittedPanelResize.bind(this)\n\t}\n\twindowResize() {\n\t\tconst { current } = this.ref;\n\t\t//console.log(`${current.offsetWidth}, ${current.offsetHeight}`)\n\t\tthis.setState({\n\t\t\twidth: current.offsetWidth,\n\t\t\theight: current.offsetHeight,\n\t\t})\n\t}\n\tsplittedPanelResize(height) {\n\t\tthis.setState({\n\t\t\tsplittedPanelHeight: height\n\t\t})\n\t}\n\trender() {\n\t\tif (!this.firstTime) {\n\t\t\t//console.log(`render width: ${this.state.width}, height: ${this.state.height}, size: ${this.state.splittedPanelHeight}`)\n\t\t}\n\t\t//console.log(this.props.upperItems)\n\t\t//console.log(this.props.lowerItems)\n\t\t//let dataLength = 20000\n\t\tlet panel = this.firstTime ? (<div ref={this.ref} className={styles.signalPanel}></div>) :\n\t\t\t(<div ref={this.ref} className={styles.signalPanel}>\n\t\t\t\t<SplitPane\n\t\t\t\t\tsplit=\"horizontal\"\n\t\t\t\t\tdefaultSize={this.state.splittedPanelHeight}\n\t\t\t\t\tminSize={50}\n\t\t\t\t\tmaxSize={-50}\n\t\t\t\t\t/*onDragFinished*/onChange={this.splittedPanelResize}>\n\t\t\t\t\t<>\n\t\t\t\t\t\t<MultichannelChart\n\t\t\t\t\t\t\tloading={this.props.upperLoading}\n\t\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\t\taddEvent={this.props.addEvent}\n\t\t\t\t\t\t\tdeleteEvent={this.props.deleteEvent}\n\t\t\t\t\t\t\tsetEventType={this.props.setEventType}\n\t\t\t\t\t\t\tmoveCursor={this.props.moveCursor}\n\t\t\t\t\t\t\tzoomChannel={this.props.zoomChannel}\n\t\t\t\t\t\t\tgetEventInfo={this.props.getEventInfo}\n\t\t\t\t\t\t\tgetChannelEvents={this.props.getChannelEvents}\n\t\t\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\t\t\theight={this.state.splittedPanelHeight}\n\t\t\t\t\t\t\ttopSpace={5}\n\t\t\t\t\t\t\tbottomSpace={5}\n\t\t\t\t\t\t\tinterspace={2}\n\t\t\t\t\t\t\tleftSpace={85}\n\t\t\t\t\t\t\trightSpace={5}\n\t\t\t\t\t\t\tsecondFrom={this.props.upperSecondFrom}\n\t\t\t\t\t\t\tsecondTo={this.props.upperSecondTo}\n\t\t\t\t\t\t\tcursorSecond={this.props.cursorSecond}\n\t\t\t\t\t\t\tdata={this.props.upperData}\n\t\t\t\t\t\t\tpreData={this.props.preUpperData}\n\t\t\t\t\t\t\tnextData={this.props.nextUpperData}\n\t\t\t\t\t\t\tevents={this.props.upperEvents}\n\t\t\t\t\t\t\tlabels={this.props.upperLabels}\n\t\t\t\t\t\t\tverticalLines={this.props.upperVerticalLines}\n\t\t\t\t\t\t\thorizontalLines={this.props.upperHorizontalLines}\n\t\t\t\t\t\t\tstages={this.props.upperStages}\n\t\t\t\t\t\t\tpsgFileId={this.props.psgFileId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\t\tright: '0px',\n\t\t\t\t\t\t\theight: '0px'}}>\n\t\t\t\t\t\t\t<TimeIntervalDropdown\n\t\t\t\t\t\t\t\tselectItem={this.props.upperSelectItem}\n\t\t\t\t\t\t\t\titems={this.props.upperItems}\n\t\t\t\t\t\t\t\tselectedItem={this.props.upperSelectedItem}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t\t<>\n\t\t\t\t\t\t<MultichannelChart\n\t\t\t\t\t\t\tloading={this.props.lowerLoading}\n\t\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\t\taddEvent={this.props.addEvent}\n\t\t\t\t\t\t\tdeleteEvent={this.props.deleteEvent}\n\t\t\t\t\t\t\tsetEventType={this.props.setEventType}\n\t\t\t\t\t\t\tmoveCursor={this.props.moveCursor}\n\t\t\t\t\t\t\tzoomChannel={this.props.zoomChannel}\n\t\t\t\t\t\t\tgetEventInfo={this.props.getEventInfo}\n\t\t\t\t\t\t\tgetChannelEvents={this.props.getChannelEvents}\n\t\t\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\t\t\theight={this.state.height - this.state.splittedPanelHeight}\n\t\t\t\t\t\t\ttopSpace={5}\n\t\t\t\t\t\t\tbottomSpace={5}\n\t\t\t\t\t\t\tinterspace={2}\n\t\t\t\t\t\t\tleftSpace={85}\n\t\t\t\t\t\t\trightSpace={5}\n\t\t\t\t\t\t\tsecondFrom={this.props.lowerSecondFrom}\n\t\t\t\t\t\t\tsecondTo={this.props.lowerSecondTo}\n\t\t\t\t\t\t\tcursorSecond={this.props.cursorSecond}\n\t\t\t\t\t\t\tdata={this.props.lowerData}\n\t\t\t\t\t\t\tpreData={this.props.preLowerData}\n\t\t\t\t\t\t\tnextData={this.props.nextLowerData}\n\t\t\t\t\t\t\tevents={this.props.lowerEvents}\n\t\t\t\t\t\t\tlabels={this.props.lowerLabels}\n\t\t\t\t\t\t\tverticalLines={this.props.lowerVerticalLines}\n\t\t\t\t\t\t\thorizontalLines={this.props.lowerHorizontalLines}\n\t\t\t\t\t\t\tstages={this.props.lowerStages}\n\t\t\t\t\t\t\tpsgFileId={this.props.psgFileId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\t\tright: '0px',\n\t\t\t\t\t\t\theight: '0px'}}>\n\t\t\t\t\t\t\t<TimeIntervalDropdown\n\t\t\t\t\t\t\t\tselectItem={this.props.lowerSelectItem}\n\t\t\t\t\t\t\t\titems={this.props.lowerItems}\n\t\t\t\t\t\t\t\tselectedItem={this.props.lowerSelectedItem}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t</SplitPane>\n\t\t\t</div>)\n\t\tthis.firstTime = false\n\t\treturn panel\n\t}\n\tcomponentDidMount() {\n\t\twindow.addEventListener('resize', this.windowResize)\n\t\tconst { current } = this.ref;\n\t\tthis.setState({\n\t\t\twidth: current.offsetWidth,\n\t\t\theight: current.offsetHeight,\n\t\t\tsplittedPanelHeight: Math.floor(current.offsetHeight / 2)\n\t\t})\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.windowResize)\n\t}\n}\n\nexport default SignalPanel","function secondToEpochFrom(sec) {\n\tlet epoch = Math.floor(sec / 30)\n\tif (sec % 30 === 0) {\n\t\tepoch--\n\t}\n\treturn epoch\n}\nfunction secondToEpochTo(sec) {\n\tlet epoch = Math.floor(sec / 30)\n\treturn epoch\n}\nclass EventsDataStructure {\n\tconstructor(events, colorsForChannels, mappingIn, mappingOut) {\n\t\t//console.log(events)\n\t\tlet eventIdToEventObject = {}\n\t\tlet epochNumToEventId = {}\n\t\tlet maxEventId = -1\n\t\tfor (let i = 0; i < events.length; i++) {\n\t\t\tlet event = events[i]\n\t\t\tlet eventInstance = Object.assign({ active: true }, event)\n\t\t\t// 確認mapping in\n\t\t\tif (mappingIn[eventInstance.channelId] !== undefined) {\n\t\t\t\teventInstance.channelId = mappingIn[eventInstance.channelId]\n\t\t\t}\n\t\t\t// 加入eventIdToEventObject\n\t\t\teventIdToEventObject[event.eventId] = eventInstance\n\t\t\t// 加入epochNumToEventId\n\t\t\tlet epochFrom = secondToEpochFrom(event.secondFrom)\n\t\t\t//console.log(event.from, event.to)\n\t\t\tlet epochTo = secondToEpochTo(event.secondTo)\n\t\t\t//console.log(epochFrom, epochTo)\n\t\t\tfor (let epoch = epochFrom; epoch <= epochTo; epoch++) {\n\t\t\t\tif (epochNumToEventId[epoch] === undefined) {\n\t\t\t\t\tepochNumToEventId[epoch] = new Set()\n\t\t\t\t}\n\t\t\t\tepochNumToEventId[epoch].add(event.eventId)\n\t\t\t}\n\t\t\t// 更新最大ID\n\t\t\tmaxEventId = Math.max(maxEventId, event.eventId)\n\t\t}\n\t\tthis.eventIdToEventObject = eventIdToEventObject\n\t\tthis.epochNumToEventId = epochNumToEventId\n\t\t//console.log(eventIdToEventObject)\n\t\t//console.log(epochNumToEventId)\n\t\tthis.nextEventId = maxEventId + 1\n\t\tthis.colorsForChannels = Object.assign({}, colorsForChannels)\n\t\tthis.mappingIn = Object.assign({}, mappingIn)\n\t\tthis.mappingOut = Object.assign({}, mappingOut)\n\t\t\n\t\t\n\t}\n\tgetEventObjectByEventId(eventId) {\n\t\treturn Object.assign({}, this.eventIdToEventObject[eventId])\n\t}\n\tgetEventObjectsByEventIds(eventIds) {\n\t\tlet result = []\n\t\tfor (let i = 0; i < eventIds.length; i++) {\n\t\t\tlet eventObject = Object.assign({}, this.eventIdToEventObject[eventIds[i]])\n\t\t\teventObject.color = this.colorsForChannels[eventObject.channelId][eventObject.type]\n\t\t\tresult.push(eventObject)\n\t\t\t// 確認mapping out\n\t\t\tif (this.mappingOut[eventObject.channelId] !== undefined) {\n\t\t\t\tlet channelArray = Array.from(this.mappingOut[eventObject.channelId])\n\t\t\t\tfor (let j = 0; j < channelArray.length; j++) {\n\t\t\t\t\tlet mappingOutObject = Object.assign({}, eventObject)\n\t\t\t\t\tmappingOutObject.channelId = channelArray[j]\n\t\t\t\t\tmappingOutObject.color = this.colorsForChannels[mappingOutObject.channelId][mappingOutObject.type]\n\t\t\t\t\tresult.push(mappingOutObject)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result\n\t}\n\tgetEventIdsByEpoch(epoch) {\n\t\tif (this.epochNumToEventId[epoch] === undefined) return []\n\t\treturn Array.from(this.epochNumToEventId[epoch])\n\t}\n\tgetEventIdsByTimeRangeAndChannelIds(timeFrom, timeTo, channelIds) {\n\t\tlet epochNum = Math.floor((timeTo - timeFrom) / 30)\n\t\tepochNum = epochNum === 0 ? 1 : epochNum\n\t\tlet epochFrom = Math.floor(timeFrom / 30)\n\t\tlet resultSet = new Set()\n\t\tfor (let i = 0; i < epochNum; i++) {\n\t\t\tlet epoch = i + epochFrom\n\t\t\tif (this.epochNumToEventId[epoch] === undefined) continue\n\t\t\tlet eventIds = Array.from(this.epochNumToEventId[epoch])\n\t\t\tfor (let j = 0; j < eventIds.length; j++) {\n\t\t\t\tlet eventId = eventIds[j]\n\t\t\t\tlet eventObject = this.eventIdToEventObject[eventId]\n\t\t\t\tif ((eventObject.secondFrom <= timeTo && eventObject.secondTo >= timeFrom) && // 如果在時間範圍內\n\t\t\t\t\tchannelIds.has(eventObject.channelId)) { // 且屬於要搜尋的channel\n\t\t\t\t\tresultSet.add(eventId)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Array.from(resultSet)\n\t}\n\taddEvent(channelId, secondFrom, secondTo, type, priority) {\n\t\tconst union = (a, b) => Array.from(new Set([...a, ...b]))\n\t\t// 確認mapping in\n\t\tif (this.mappingIn[channelId] !== undefined) {\n\t\t\tchannelId = this.mappingIn[channelId]\n\t\t}\n\t\tlet epochFrom = secondToEpochFrom(secondFrom)\n\t\tlet epochTo = secondToEpochTo(secondTo)\n\t\t// TODO: 應該有更有效率的演算法\n\t\tlet eventsToCheck = new Set()\n\t\tfor (let epoch = epochFrom; epoch <= epochTo; epoch++) {\n\t\t\tif (this.epochNumToEventId[epoch] === undefined) continue\n\t\t\teventsToCheck = union(eventsToCheck, this.epochNumToEventId[epoch])\n\t\t}\n\t\tlet minSecondFrom = secondFrom\n\t\tlet maxSecondTo = secondTo\n\t\t// 有重疊的事件ID都放進來\n\t\tlet overlappedEvents = []\n\t\t// 找出最早的事件\n\t\tlet earliestEvent = null\n\t\teventsToCheck.forEach((currentValue, currentKey, set) => {\n\t\t\tlet eventToCheck = this.eventIdToEventObject[currentValue]\n\t\t\t// 確認是不是在同一個channel上\n\t\t\tif (eventToCheck.channelId !== channelId) return\n\t\t\t// 確認是否重疊\n\t\t\tif (secondFrom <= eventToCheck.secondTo && secondTo >= eventToCheck.secondFrom) { // 如果有重疊\n\t\t\t\tminSecondFrom = Math.min(minSecondFrom, eventToCheck.secondFrom)\n\t\t\t\tmaxSecondTo = Math.max(maxSecondTo, eventToCheck.secondTo)\n\t\t\t\toverlappedEvents.push(eventToCheck.eventId)\n\t\t\t\tif (earliestEvent === null) { // 第一次\n\t\t\t\t\tearliestEvent = eventToCheck\n\t\t\t\t} else if (earliestEvent.secondFrom > eventToCheck.secondFrom) { // 更新為更早的事件\n\t\t\t\t\tearliestEvent = eventToCheck\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t// 把所有重疊的事件刪掉\n\t\tfor (let i = 0; i < overlappedEvents.length; i++) {\n\t\t\tthis.deleteEvent(overlappedEvents[i])\n\t\t}\n\t\t// 看eventType是甚麼，如果優先度高，就是設定的事件，如果優先度低，就是最早的事件\n\t\t//console.log(earliestEvent)\n\t\t//console.log('priority', priority)\n\t\tif (priority === false && earliestEvent !== null) {\n\t\t\ttype = earliestEvent.type\n\t\t}\n\t\t// 把新的事件加進來\n\t\tlet event = {\n\t\t\tsecondFrom: minSecondFrom,\n\t\t\tsecondTo: maxSecondTo,\n\t\t\ttype: type,\n\t\t\tchannelId: channelId,\n\t\t\tisActive: true,\n\t\t\teventId: this.nextEventId \n\t\t}\n\t\t// 加入eventIdToEventObject\n\t\tthis.eventIdToEventObject[this.nextEventId] = event\n\t\t// 加入epochNumToEventId\n\t\tfor (let epoch = secondToEpochFrom(minSecondFrom); epoch <= secondToEpochTo(maxSecondTo); epoch++) {\n\t\t\tif (this.epochNumToEventId[epoch] === undefined) {\n\t\t\t\tthis.epochNumToEventId[epoch] = new Set()\n\t\t\t}\n\t\t\tthis.epochNumToEventId[epoch].add(this.nextEventId)\n\t\t}\n\t\t// 建立回傳物件\n\t\tlet resultObject = {\n\t\t\toverlappedEventId: overlappedEvents,\n\t\t\teventId: this.nextEventId,\n\t\t\ttype: type\n\t\t}\n\t\tthis.nextEventId++\n\t\t//console.log(this.epochNumToEventId)\n\t\t//console.log(this.eventIdToEventObject)\n\t\treturn resultObject\n\t}\n\tdeleteEvent(eventId) {\n\t\tlet event = this.eventIdToEventObject[eventId]\n\t\tif (event === undefined) return\n\t\tevent.isActive = false\n\t\tlet epochFrom = secondToEpochFrom(event.secondFrom)\n\t\tlet epochTo = secondToEpochTo(event.secondTo)\n\t\tfor (let epoch = epochFrom; epoch <= epochTo; epoch++) {\n\t\t\tif (this.epochNumToEventId[epoch] !== undefined) this.epochNumToEventId[epoch].delete(event.eventId)\n\t\t}\n\t}\n\tsetEventType(eventId, type) {\n\t\tthis.eventIdToEventObject[eventId].type = type\n\t}\n}\n\nexport default EventsDataStructure","const constants = Object.freeze({\n\tfloatToFixed: 5\n})\n\nexport default constants","import constants from './const.js'\nconst UPPER = 0\nconst LOWER = 1\nfunction timeIntervalStringToSecond(timeIntervalString) {\n\tlet convertObj = {\n\t\t'10 sec': 10,\n\t\t'30 sec': 30,\n\t\t'1 min': 60,\n\t\t'2 min': 120,\n\t\t'3 min': 180,\n\t\t'5 min': 300,\n\t\t'10 min': 600\n\t}\n\treturn convertObj[timeIntervalString]\n}\nfunction timeIntervalSecondToString(timeIntervalSecond) {\n\tlet convertObj = {\n\t\t10: '10 sec',\n\t\t30: '30 sec',\n\t\t60: '1 min',\n\t\t120: '2 min',\n\t\t180: '3 min',\n\t\t300: '5 min',\n\t\t600: '10 min'\n\t}\n\treturn convertObj[timeIntervalSecond]\n}\nclass TimeController {\n\tconstructor(initializerObject, totalEpoch) {\n\t\tthis.timeFrom = {}\n\t\tthis.timeFrom[UPPER] = initializerObject.upperTimeFrom // int\n\t\tthis.timeFrom[LOWER] = initializerObject.lowerTimeFrom // int\n\t\tthis.timeInterval = {}\n\t\tthis.timeInterval[UPPER] = timeIntervalStringToSecond(initializerObject.upperTimeInterval) // int\n\t\tthis.timeInterval[LOWER] = timeIntervalStringToSecond(initializerObject.lowerTimeInterval) // int\n\t\tthis.totalEpoch = totalEpoch // int\n\t\tthis.cursorLine = initializerObject.cursorLine // float\n\t}\n\t// 前: 未來\n\t// 後: 過去\n\tpageDown() {\n\t\t// 先檢查有沒有下頁\n\t\tlet minPagePart = this.timeInterval[UPPER] < this.timeInterval[LOWER] ? UPPER : LOWER // 看上面和下面哪個比較小\n\t\tlet theOtherPart = minPagePart === UPPER ? LOWER : UPPER\n\t\tlet nextJumpSec = this.timeInterval[minPagePart] // 要往前幾秒\n\t\tlet totalSec = this.totalEpoch * 30\n\t\tif (this.timeFrom[minPagePart] + nextJumpSec >= totalSec) return // 沒有下一頁\n\t\tthis.cursorLine += nextJumpSec // 把游標往前幾秒\n\t\tthis.timeFrom[minPagePart] += nextJumpSec\n\t\tlet over = this.timeFrom[minPagePart] + this.timeInterval[minPagePart] - totalSec // 超過結尾秒數\n\t\tif (over > 0) { // 如果超過\n\t\t\tthis.timeFrom[minPagePart] -= over // 超過的部分減回來\n\t\t\tthis.cursorLine -= over\n\t\t}\n\t\tthis.cursorLine = parseFloat(this.cursorLine.toFixed(constants.floatToFixed))\n\t\tif ((this.cursorLine > this.timeFrom[theOtherPart] + this.timeInterval[theOtherPart]) || // 如果游標在另一頁的顯示範圍外\n\t\t\t(this.cursorLine === this.timeFrom[minPagePart] && this.cursorLine === this.timeFrom[theOtherPart] + this.timeInterval[theOtherPart])) { // 或是在小頁面的開頭卻在另一頁的結尾\n\t\t\tthis.timeFrom[theOtherPart] += this.timeInterval[theOtherPart] // 另一半也往前一頁\n\t\t\tlet theOtherOver = this.timeFrom[theOtherPart] + this.timeInterval[theOtherPart] - totalSec // 超過結尾秒數\n\t\t\tif (theOtherOver > 0) { // 如果超過\n\t\t\t\tthis.timeFrom[theOtherPart] -= theOtherOver // 超過的部分減回來\n\t\t\t}\n\t\t}\n\t}\n\tpageUp() {\n\t\t//  先檢查有沒有上頁\n\t\tlet minPagePart = this.timeInterval[UPPER] < this.timeInterval[LOWER] ? UPPER : LOWER // 看上面和下面哪個比較小\n\t\tlet theOtherPart = minPagePart === UPPER ? LOWER : UPPER\n\t\tlet lastJumpSec = this.timeInterval[minPagePart] // 要往後幾秒\n\t\tif (this.timeFrom[minPagePart] <= 0) return // 沒有上一頁\n\t\tthis.cursorLine -= lastJumpSec // 把游標往後幾秒\n\t\tthis.timeFrom[minPagePart] -= lastJumpSec\n\t\tlet over = -this.timeFrom[minPagePart] // 超過開頭秒數\n\t\tif (over > 0) { // 如果超過\n\t\t\tthis.timeFrom[minPagePart] += over // 超過的部分加回來\n\t\t\tthis.cursorLine += over\n\t\t}\n\t\tthis.cursorLine = parseFloat(this.cursorLine.toFixed(constants.floatToFixed))\n\t\tif ((this.cursorLine < this.timeFrom[theOtherPart]) || // 如果游標在另一頁顯示範圍外\n\t\t\t(this.cursorLine === this.timeFrom[minPagePart] + this.timeInterval[minPagePart] && this.cursorLine === this.timeFrom[theOtherPart])) { // 或是在小頁面的結尾卻在另一頁的開頭\n\t\t\tthis.timeFrom[theOtherPart] -= this.timeInterval[theOtherPart] // 另一半也往後一頁\n\t\t\tlet theOtherOver = -this.timeFrom[theOtherPart] // 超過開頭秒數\n\t\t\tif (theOtherOver > 0) { // 如果超過\n\t\t\t\tthis.timeFrom[theOtherPart] += theOtherOver // 超過的部分加回來\n\t\t\t}\n\t\t}\n\t}\n\tnextEpoch() {\n\t\t// 先檢查有沒有下一個epoch\n\t\tlet totalSec = this.totalEpoch * 30\n\t\tlet currentEpoch = this.getCurrentEpoch()\n\t\tif (currentEpoch + 1 >= this.totalEpoch) return // 沒有下一個epoch\n\t\tthis.cursorLine += 30\n\t\tthis.timeFrom[UPPER] += 30\n\t\tthis.cursorLine = parseFloat(this.cursorLine.toFixed(constants.floatToFixed))\n\t\tif ((this.cursorLine > this.timeFrom[LOWER] + this.timeInterval[LOWER]) || // 如果游標在下半頁的顯示範圍外\n\t\t\t(this.cursorLine === this.timeFrom[UPPER] && this.cursorLine === this.timeFrom[LOWER] + this.timeInterval[LOWER])) { // 或是在上半頁的開頭卻在下半頁的結尾\n\t\t\tthis.timeFrom[LOWER] += this.timeInterval[LOWER] // 下半頁也往前一頁\n\t\t\tlet theOtherOver = this.timeFrom[LOWER] + this.timeInterval[LOWER] - totalSec // 超過結尾秒數\n\t\t\tif (theOtherOver > 0) { // 如果超過\n\t\t\t\tthis.timeFrom[LOWER] -= theOtherOver // 超過的部分減回來\n\t\t\t}\n\t\t}\n\t}\n\tlastEpoch() {\n\t\t// 先檢查有沒有上一個epoch\n\t\tlet currentEpoch = this.getCurrentEpoch()\n\t\tif (currentEpoch <= 0) return // 沒有上一個epoch\n\t\tthis.cursorLine -= 30\n\t\tthis.timeFrom[UPPER] -= 30\n\t\tthis.cursorLine = parseFloat(this.cursorLine.toFixed(constants.floatToFixed))\n\t\tif ((this.cursorLine < this.timeFrom[LOWER]) || // 如果游標在下半頁顯示範圍外\n\t\t\t(this.cursorLine === this.timeFrom[UPPER] + this.timeInterval[UPPER] && this.cursorLine === this.timeFrom[LOWER])) { // 或是在上半頁的結尾卻在下半頁的開頭\n\t\t\tthis.timeFrom[LOWER] -= this.timeInterval[LOWER] // 下半頁也往後一頁\n\t\t\tlet theOtherOver = -this.timeFrom[LOWER] // 超過開頭秒數\n\t\t\tif (theOtherOver > 0) { // 如果超過\n\t\t\t\tthis.timeFrom[LOWER] += theOtherOver // 超過的部分加回來\n\t\t\t}\n\t\t}\n\t}\n\tjumpToEpoch(epoch) {\n\t\tlet cursorRelativeToUpperTimeFrom = this.cursorLine - this.timeFrom[UPPER] // 游標相對於上半頁的秒數\n\t\tlet startTime = epoch * 30\n\t\tthis.timeFrom[LOWER] = this.timeFrom[UPPER] = startTime // 將上下的開始時間都設為要跳躍的epoch\n\t\tthis.cursorLine = startTime + cursorRelativeToUpperTimeFrom // 游標一樣設為相對於上半頁的秒數\n\n\t\tlet totalSec = this.totalEpoch * 30\n\t\tlet theOtherOver = this.timeFrom[LOWER] + this.timeInterval[LOWER] - totalSec // 超過結尾秒數\n\t\tif (theOtherOver > 0) { // 如果超過\n\t\t\tthis.timeFrom[LOWER] -= theOtherOver // 超過的部分減回來\n\t\t}\n\t}\n\tmoveCursor(sec) {\n\t\tsec = parseFloat(sec.toFixed(constants.floatToFixed))\n\t\tlet upperTimeFrom = this.timeFrom[UPPER]\n\t\tlet upperTimeTo = upperTimeFrom + this.timeInterval[UPPER]\n\t\tthis.cursorLine = sec\n\t\tif (sec < upperTimeFrom || sec > upperTimeTo) { // 如果移動後不在上半頁的範圍內\n\t\t\tlet quotient = Math.floor(sec / this.timeInterval[UPPER])\n\t\t\tlet remainder = parseFloat((sec % this.timeInterval[UPPER]).toFixed(constants.floatToFixed))\n\t\t\tif (remainder === 0 && // 如果移動後游標剛好在邊界\n\t\t\t\t(quotient * this.timeInterval[UPPER] === this.timeFrom[LOWER] + this.timeInterval[LOWER])) { // 而且在下半頁的結尾\n\t\t\t\tthis.timeFrom[UPPER] = (quotient - 1) * this.timeInterval[UPPER]\n\t\t\t} else {\n\t\t\t\tthis.timeFrom[UPPER] = quotient * this.timeInterval[UPPER]\n\t\t\t}\n\t\t}\n\t}\n\tsetUpperTimeInterval(upperTimeInterval) {\n\t\tthis.timeInterval[UPPER] = timeIntervalStringToSecond(upperTimeInterval)\n\t\tif (this.timeInterval[UPPER] === this.timeInterval[LOWER]) { // 如果上下時間長度一樣\n\t\t\t// 就把上面設成跟下面一樣\n\t\t\tthis.timeFrom[UPPER] = this.timeFrom[LOWER]\n\t\t} else {\n\t\t\tlet quotient = Math.floor(this.cursorLine / this.timeInterval[UPPER])\n\t\t\tlet remainder = parseFloat((this.cursorLine % this.timeInterval[UPPER]).toFixed(constants.floatToFixed))\n\t\t\tif (remainder === 0 && // 如果設定區間長度後游標剛好在邊界\n\t\t\t\t(quotient * this.timeInterval[UPPER] === this.timeFrom[LOWER] + this.timeInterval[LOWER])) { // 而且在下半頁的結尾\n\t\t\t\tthis.timeFrom[UPPER] = (quotient - 1) * this.timeInterval[UPPER]\n\t\t\t} else {\n\t\t\t\tthis.timeFrom[UPPER] = quotient * this.timeInterval[UPPER]\n\t\t\t}\n\t\t}\n\t}\n\tsetLowerTimeInterval(lowerTimeInterval) {\n\t\tlet currentEpoch = this.getCurrentEpoch()\n\t\tlet totalSec = this.totalEpoch * 30\n\t\tthis.timeInterval[LOWER] = timeIntervalStringToSecond(lowerTimeInterval)\n\t\tif (this.timeInterval[LOWER] === this.timeInterval[UPPER]) { // 如果上下時間長度一樣\n\t\t\t// 就把下面設成跟上面一樣\n\t\t\tthis.timeFrom[LOWER] = this.timeFrom[UPPER]\n\t\t} else {\n\t\t\tthis.timeFrom[LOWER] = currentEpoch * 30\n\t\t\tlet over = this.timeFrom[LOWER] + this.timeInterval[LOWER] - totalSec\n\t\t\tif (over > 0) {\n\t\t\t\tthis.timeFrom[LOWER] -= over\n\t\t\t}\n\t\t}\n\t}\n\tgetCurrentEpoch() {\n\t\tlet quotient = Math.floor(this.cursorLine / 30)\n\t\tlet remainder = parseFloat((this.cursorLine % 30).toFixed(constants.floatToFixed))\n\t\t//console.log('remainder:', remainder)\n\t\t//console.log(Math.log(remainder))\n\t\tif (remainder === 0) {\n\t\t\t//console.log('cursorLine:', this.cursorLine, 'upper end:', this.timeFrom[UPPER] + this.timeInterval[UPPER])\n\t\t\tif (this.cursorLine === this.timeFrom[UPPER] + this.timeInterval[UPPER]) {\n\t\t\t\tquotient--\n\t\t\t}\n\t\t}\n\t\treturn quotient\n\t}\n\t//防止epoch爆掉造成bug\n\tgetUpperSecondFrom() {\n\t\tif(this.totalEpoch*30>this.timeFrom[UPPER] + this.timeInterval[UPPER]){\n\t\t\treturn this.timeFrom[UPPER]\n\t\t}else{\n\t\t\treturn this.timeFrom[UPPER]-((this.timeFrom[UPPER] + this.timeInterval[UPPER])-this.totalEpoch*30)\n\t\t}\n\t}\n\tgetUpperSecondTo() {\n\t\tif(this.totalEpoch*30>this.timeFrom[UPPER] + this.timeInterval[UPPER]){\n\t\t\treturn this.timeFrom[UPPER] + this.timeInterval[UPPER]\n\t\t}else{\n\t\t\treturn this.totalEpoch*30\n\t\t}\n\t}\n\t//防止epoch爆掉造成bug\n\tgetUpperTimeInterval() {\n\t\t//console.log(this.timeInterval[UPPER])\n\t\treturn timeIntervalSecondToString(this.timeInterval[UPPER])\n\t}\n\tgetLowerSecondFrom() {\n\t\treturn this.timeFrom[LOWER]\n\t}\n\tgetLowerSecondTo() {\n\t\treturn this.timeFrom[LOWER] + this.timeInterval[LOWER]\n\t}\n\tgetLowerTimeInterval() {\n\t\treturn timeIntervalSecondToString(this.timeInterval[LOWER])\n\t}\n\tgetCursorSecond() {\n\t\treturn this.cursorLine\n\t}\n}\n\nexport default TimeController","class DataManager {\n\tconstructor(channels, totalEpoch) {\n\t\tlet channelIdToChannelState = {\n\t\t\ttrue: {}, // upper\n\t\t\tfalse: {} // lower\n\t\t}\n\t\t//console.log(channels)\n\t\tfor (let i = 0; i < channels.length; i++) {\n\t\t\tlet channel = channels[i]\n\t\t\t//console.log(channel)\n\t\t\tchannelIdToChannelState[channel.upper][channel.channelId] = Object.assign({ zoom: 0 }, channel)\n\t\t}\n\t\tthis.channelIdToChannelState = channelIdToChannelState\n\t\tthis.epochToArrayBuffer = {\n\t\t\ttrue: {}, // upper\n\t\t\tfalse: {} // lower\n\t\t}\n\t\tthis.totalEpoch = totalEpoch\n\t}\n\tcheckData(secondFrom, secondTo, upper) {\n\t\t// 從第幾個epoch開始\n\t\tlet epochFrom = Math.floor(secondFrom / 30)\n\t\t// 到第幾個epoch結束\n\t\tlet epochTo = Math.floor(secondTo / 30)\n\t\tif (secondTo % 30 === 0) epochTo--\n\t\tlet epochsHaveNoData = []\n\t\t//console.log('epoch', upper, epochFrom, epochTo)\n\t\tfor (let epoch = epochFrom; epoch <= epochTo; epoch++) {\n\t\t\t// 如果那個epoch沒有資料就把他的編號加進陣列裡\n\t\t\tif (this.epochToArrayBuffer[upper][epoch] === undefined) {\n\t\t\t\tepochsHaveNoData.push(epoch)\n\t\t\t}\n\t\t}\n\t\treturn epochsHaveNoData\n\t}\n\tcheckDataTimePoint(second, upper) {\n\t\tlet epoch = Math.floor(second / 30)\n\t\tif (this.epochToArrayBuffer[upper][epoch] === undefined) {\n\t\t\treturn [epoch]\n\t\t}\n\t\treturn []\n\t}\n\thasData(secondFrom, secondTo, upper) {\n\t\tlet epochsHaveNoData = this.checkData(secondFrom, secondTo, upper)\n\t\treturn epochsHaveNoData.length === 0\n\t}\n\tsetData(data, epoch, upper) {\n\t\tthis.epochToArrayBuffer[upper][epoch] = data\n\t}\n\tgetData(secondFrom, secondTo, upper) {\n\t\t// 看是上半部還是下半部的狀態\n\t\tlet halfChannelState = this.channelIdToChannelState[upper]\n\t\t// 取的那一半全部的陣列ID\n\t\tlet halfChannelIds = Object.keys(halfChannelState)\n\t\tlet result = [] // 最後回傳的陣列\n\t\tfor (let i = 0; i < halfChannelIds.length; i++) {\n\t\t\t// 取得其中一個channel的狀態\n\t\t\tlet oneChannelState = halfChannelState[halfChannelIds[i]]\n\t\t\tlet channelData = {} // 最後要回傳的其中一個element\n\t\t\t// 設定lineWidth\n\t\t\tchannelData.lineWidth = oneChannelState.lineWidth\n\t\t\t// 設定dataLength\n\t\t\tlet fs = (oneChannelState.dataLength - 1) / 30\n\t\t\tlet totalSecond = secondTo - secondFrom\n\t\t\tlet dataLength = totalSecond * fs + 1\n\t\t\tchannelData.dataLength = dataLength\n\t\t\t// 設定資料\n\t\t\tlet epochFrom = Math.floor(secondFrom / 30) // 從哪一個epoch開始\n\t\t\tlet epochFromSecond = epochFrom * 30 // epoch開始秒數\n\t\t\tlet secondOffset = secondFrom - epochFromSecond // 目標秒數相當於偏移epoch開始秒數幾秒\n\t\t\tlet pointOffset = secondOffset * fs // 相當於偏移幾個資料點\n\t\t\tlet epochTo = Math.floor(secondTo / 30) // 到哪一個epoch結束\n\t\t\t//console.log(epochFrom,\" \",epochFromSecond,\" \",secondOffset,\" \",pointOffset,\" \",epochTo,\" \",secondTo,\" \",halfChannelIds.length)\n\t\t\tepochTo -= secondTo % 30 === 0 ? 1 : 0\n\t\t\tlet floatArrays = [] // 將所有要用到的epoch資料轉成float32array存進這個陣列\n\t\t\t//防止epoch爆掉造成bug\n\t\t\tif(epochTo>this.totalEpoch){\n\t\t\t\tepochTo=this.totalEpoch\n\t\t\t\tepochFrom=epochFrom-(epochTo-this.totalEpoch)\n\t\t\t}\n\t\t\t//防止epoch爆掉造成bug\n\t\t\t//console.log(epochTo,epochFrom,this.totalEpoch)\n\t\t\tfor (let epoch = epochFrom; epoch <= epochTo; epoch++) {\n\t\t\t\tif (this.epochToArrayBuffer[upper][epoch] === undefined) {\n\t\t\t\t\tfloatArrays = null\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\t//console.log('array buffer:', this.epochToArrayBuffer[upper][epoch])\n\t\t\t\t//console.log('offset:', oneChannelState.offset)\n\t\t\t\t//console.log('length:', oneChannelState.dataLength)\n\t\t\t\tlet floatArray = new Float32Array(this.epochToArrayBuffer[upper][epoch], oneChannelState.offset, oneChannelState.dataLength)\n\t\t\t\t//console.log('has data', halfChannelIds[i], dataLength ,floatArray[dataLength-1], floatArray[dataLength-2], floatArray[dataLength-3])\n\t\t\t\tfloatArrays.push(floatArray)\n\t\t\t}\n\t\t\t// 資料點轉成float數值\n\t\t\tlet pointToValue = function(x) {\n\t\t\t\tif (floatArrays === null) return 0\n\t\t\t\tlet samplesInOneEpoch = oneChannelState.dataLength - 1 // 一個epoch有幾個資料點\n\t\t\t\tlet whichArray = Math.floor(x / samplesInOneEpoch) // 看是第幾個array\n\t\t\t\tlet whichIndex = x % samplesInOneEpoch // 的第幾個數值\n\t\t\t\tif (whichIndex === 0 && whichArray !== 0) {\n\t\t\t\t\twhichArray--\n\t\t\t\t\twhichIndex += samplesInOneEpoch\n\t\t\t\t}\n\t\t\t\t//console.log('whichArray:', whichArray)\n\t\t\t\treturn floatArrays[whichArray][whichIndex]\n\t\t\t}\n\t\t\tlet data = function(x) {\n\t\t\t\treturn pointToValue(x + pointOffset)\n\t\t\t}\n\t\t\tchannelData.data = data\n\t\t\t// 設定min, max\n\t\t\tlet min\n\t\t\tlet max\n\t\t\tif(oneChannelState.channelId !== 16){\n\t\t\t\tlet originalRange = oneChannelState.originalMax - oneChannelState.originalMin\n\t\t\t\tlet originalHalfRange = originalRange / 2\n\t\t\t\tlet center = (oneChannelState.originalMax + oneChannelState.originalMin) / 2\n\t\t\t\tlet halfRange = originalHalfRange * Math.pow(2, oneChannelState.zoom)\n\t\t\t\tmin = center - halfRange\n\t\t\t\tmax = center + halfRange\n\t\t\t\t// console.log(oneChannelState.zoom)\n\t\t\t}\n\t\t\telse{\n\t\t\t\t// console.log(oneChannelState.zoom)\n\t\t\t\t// let zoomMax = [100, 87.5, 81.25, 78.125]\n\t\t\t\t// let zoomMin = [50, 62.5, 68.75, 71.875]\n\t\t\t\tmax = 100\n\t\t\t\tmin = 50\n\t\t\t\t//console.log(min, max)\n\t\t\t}\n\t\t\tchannelData.min = min\n\t\t\tchannelData.max = max\n\t\t\t// 設定顏色\n\t\t\tchannelData.color = oneChannelState.color\n\t\t\t// 設定channelId\n\t\t\tchannelData.channelId = oneChannelState.channelId\n\t\t\t// 設定是否可縮放\n\t\t\tchannelData.zoomable = oneChannelState.zoomable\n\t\t\t\n\t\t\tchannelData.draggable = oneChannelState.draggable\n\t\t\t\n\t\t\tchannelData.showDesat = oneChannelState.showDesat\n\t\t\t\n\t\t\tchannelData.showLocalExtreme = oneChannelState.showLocalExtreme\n\t\t\t\n\t\t\tchannelData.zoom = oneChannelState.zoom\n\t\t\t// 存進結果\n\t\t\tresult.push(channelData)\n\t\t}\n\t\treturn result\n\t}\n\tzoomChannel(channelId, up) {\n\t\tlet channelState = this.channelIdToChannelState[true][channelId] === undefined ?\n\t\t\tthis.channelIdToChannelState[false][channelId] : this.channelIdToChannelState[true][channelId]\n\t\tchannelState.zoom += up ? 1 : -1\n\t\tchannelState.zoom = channelState.zoom > channelState.maxZoom ? channelState.maxZoom :\n\t\t\tchannelState.zoom < channelState.minZoom ? channelState.minZoom : channelState.zoom\n\t}\n\tgetChannelRange(upper, channelId) {\n\t\tlet oneChannelState = this.channelIdToChannelState[upper][channelId]\n\t\tlet originalRange = oneChannelState.originalMax - oneChannelState.originalMin\n\t\tlet range = originalRange * Math.pow(2, oneChannelState.zoom)\n\t\treturn range\n\t}\n\tgetBuffered() {\n\t\tlet buffered = new Array(this.totalEpoch)\n\t\tfor (let i = 0; i < buffered.length; i++) {\n\t\t\tbuffered[i] = this.epochToArrayBuffer[true][i] !== undefined && this.epochToArrayBuffer[false][i] !== undefined\n\t\t}\n\t\treturn buffered\n\t}\n\tgetNextEpochToBuffer(currentEpoch) {\n\t\tlet epoch = currentEpoch+1\n\t\tlet result = {}\n\t\twhile (epoch < this.totalEpoch && epoch - currentEpoch < 30) {\n\t\t\tresult.upper = this.epochToArrayBuffer[true][epoch] === undefined\n\t\t\tresult.lower = this.epochToArrayBuffer[false][epoch] === undefined\n\t\t\tif (result.upper || result.lower) {\n\t\t\t\tresult.epoch = epoch\n\t\t\t\treturn result\n\t\t\t}\n\t\t\tepoch++\n\t\t}\n\t\treturn null\n\t}\n}\n\nexport default DataManager","class DataRequestManager {\n\tconstructor(psgFileId) {\n\t\tthis.psgFileId = psgFileId\n\t\tthis.runningRequests = {\n\t\t\ttrue: {}, // upper\n\t\t\tfalse: {} // lower\n\t\t}\n\t\tthis.completeRequest = {\n\t\t\ttrue: new Set(), // upper\n\t\t\tfalse: new Set() // lower\n\t\t}\n\t\tthis.results = []\n\t}\n\tsetRequest(newUpperRequests, newLowerRequests, cb) { // 新增一群請求\n\t\t//console.log('set request:', newUpperRequests, newLowerRequests)\n\t\tthis.cb = cb\n\t\t//console.log('running requests', this.runningRequests)\n\t\tlet newRequests = {\n\t\t\ttrue: newUpperRequests,\n\t\t\tfalse: newLowerRequests\n\t\t}\n\t\t//console.log(newRequests)\n\t\tlet requestUrl = {\n\t\t\ttrue: '/ajax_epoch_upper',\n\t\t\tfalse: '/ajax_epoch_lower'\n\t\t}\n\t\tlet upperLowerKeys = [true, false]\n\t\tfor (let i = 0; i < upperLowerKeys.length; i++) {\n\t\t\tlet upper = upperLowerKeys[i] // 上半部或下半部\n\t\t\t//let halfRunningRequests = this.runningRequests[upper] // 正在請求中的xhr\n\t\t\t//let halfCompleteRequest = this.completeRequest[upper] // 已完成的集合\n\t\t\tlet halfNewRequests = newRequests[upper] // 新的請求epoch\n\t\t\tlet halfRunningRequestKeys = Object.keys(this.runningRequests[upper])\n\t\t\tlet halfNewRequestsSet = new Set(halfNewRequests)\n\t\t\t// 對正在進行中的請求一個一個檢查\n\t\t\tfor (let j = 0; j < halfRunningRequestKeys.length; j++) {\n\t\t\t\tlet runningEpochNum = parseInt(halfRunningRequestKeys[j])\n\t\t\t\tif (!halfNewRequestsSet.has(runningEpochNum)) { // 如果這個進行中的請求並沒有在新的請求中\n\t\t\t\t\t//console.log('new request doesnt contain', upper, runningEpochNum)\n\t\t\t\t\tthis.runningRequests[upper][runningEpochNum].abort() // 就強制結束\n\t\t\t\t\tdelete this.runningRequests[upper][runningEpochNum] // 並且刪除\n\t\t\t\t\t//console.log('abort xhr', this.runningRequests)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 將新的請求一個一個建立\n\t\t\tfor (let j = 0; j < halfNewRequests.length; j++) {\n\t\t\t\tlet epoch = halfNewRequests[j]\n\t\t\t\t//console.log('is running', !(this.runningRequests[upper][epoch] === undefined), 'is complete', this.completeRequest[upper].has(epoch))\n\t\t\t\tif (this.runningRequests[upper][epoch] === undefined && // 如果新的請求沒有進行中\n\t\t\t\t\t!this.completeRequest[upper].has(epoch)) { // 而且也沒有已完成\n\t\t\t\t\t// 就建立\n\t\t\t\t\t//console.log('create xhr', upper, epoch)\n\t\t\t\t\tlet xhr = new XMLHttpRequest()\n\t\t\t\t\txhr.open('POST', requestUrl[upper], true)\n\t\t\t\t\txhr.responseType = 'arraybuffer'\n\t\t\t\t\txhr.onload = (e) => {\n\t\t\t\t\t\tlet resultObject = {\n\t\t\t\t\t\t\tdata: xhr.response,\n\t\t\t\t\t\t\tepoch: epoch,\n\t\t\t\t\t\t\tupper: upper\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.results.push(resultObject) // 將結果存起來\n\t\t\t\t\t\tthis.completeRequest[upper].add(epoch) // 存到完成的集合\n\t\t\t\t\t\tdelete this.runningRequests[upper][epoch] // 並且將請求刪除\n\t\t\t\t\t\t//console.log('delete xhr', this.runningRequests)\n\t\t\t\t\t\t//console.log(this.runningRequests)\n\t\t\t\t\t\t//console.log('request complete', upper, epoch)\n\t\t\t\t\t\tif (Object.keys(this.runningRequests[true]).length === 0 &&\n\t\t\t\t\t\t\tObject.keys(this.runningRequests[false]).length === 0) { // 如果已經沒有其他請求正在進行中\n\t\t\t\t\t\t\t//console.log('all complete')\n\t\t\t\t\t\t\tlet toCb = this.results\n\t\t\t\t\t\t\tthis.results = [] // 將節果清空\n\t\t\t\t\t\t\t// 將完成的集合清空\n\t\t\t\t\t\t\tthis.completeRequest[true] = new Set()\n\t\t\t\t\t\t\tthis.completeRequest[false] = new Set()\n\t\t\t\t\t\t\tthis.cb(toCb) // 呼叫cb，將這一批結果傳回去\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\txhr.setRequestHeader('Content-Type', 'application/json')\n\t\t\t\t\txhr.send(JSON.stringify({\n\t\t\t\t\t\tpsgFileId: this.psgFileId,\n\t\t\t\t\t\tepochNum: epoch\n\t\t\t\t\t}))\n\t\t\t\t\t//console.log('before add xhr', this.runningRequests)\n\t\t\t\t\tthis.runningRequests[upper][epoch] = xhr // 加入正在進行中\n\t\t\t\t\t//console.log('add xhr', this.runningRequests)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 檢查一下經過新增和刪除請求之後，是否還有逕行中的請求，若沒有直接cb\n\t\tif (Object.keys(this.runningRequests[true]).length === 0 &&\n\t\t\tObject.keys(this.runningRequests[false]).length === 0) {\n\t\t\t// 檢查有沒有結果沒回傳\n\t\t\tif (this.results.length !== 0) {\n\t\t\t\tlet toCb = this.results\n\t\t\t\tthis.results = [] // 將節果清空\n\t\t\t\t// 將完成的集合清空\n\t\t\t\tthis.completeRequest[true] = new Set()\n\t\t\t\tthis.completeRequest[false] = new Set()\n\t\t\t\tthis.cb(toCb) // 呼叫cb，將這一批結果傳回去\n\t\t\t}\t\n\t\t}\n\t}\n\t// 強制清空並回傳結果\n\tclearResults() {\n\t\tlet results = this.results\n\t\tthis.results = []\n\t\tthis.completeRequest[true] = new Set()\n\t\tthis.completeRequest[false] = new Set()\n\t\treturn results\n\t}\n}\n\nexport default DataRequestManager","import axios from 'axios'\n\nconst COUNT_DOWN_MSEC = 500\n\nconst START = 0\nconst UNSAVED = 1\nconst SAVING = 2\nconst SAVED = 3\nconst END = 4\n\nclass PauseRequestManager {\n\t\n\tconstructor(psgFileId, onStateChange) {\n\t\tthis.psgFileId = psgFileId\n\t\tthis.onStateChange = onStateChange\n\t\t// to save\n\t\tthis.stages = {}\n\t\tthis.events = []\n\t\tthis.currentWindow = null\n\t\t\n\t\tthis.timer = null\n\t\tthis.requestQueue = []\n\t\tthis.currentId = 0\n\t\tthis.sendingRequest = false\n\t\t\n\t\tthis.state = START\n\t\tthis.toFlush = false\n\t}\n\tstatic get_START() {\n\t\treturn START\n\t}\n\tstatic get_UNSAVED() {\n\t\treturn UNSAVED\n\t}\n\tstatic get_SAVING() {\n\t\treturn SAVING\n\t}\n\tstatic get_SAVED() {\n\t\treturn SAVED\n\t}\n\tstatic get_END() {\n\t\treturn END\n\t}\n\tasync queueRequest() {\n\t\tthis.state = SAVING\n\t\tthis.onStateChange(SAVING)\n\t\tlet data = {}\n\t\tdata.psgFileId = this.psgFileId\n\t\tlet stagesArr = []\n\t\tlet keys = Object.keys(this.stages)\n\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\tlet epochNum = parseInt(keys[i])\n\t\t\tstagesArr.push({\n\t\t\t\tepochNum: epochNum,\n\t\t\t\tstage: this.stages[epochNum]\n\t\t\t})\n\t\t}\n\t\tdata.stages = stagesArr\n\t\tthis.stages = {}\n\t\tdata.events = this.events\n\t\tthis.events = []\n\t\tdata.jump = this.currentWindow\n\t\tthis.currentWindow = null\n\t\t//await axios.post('/ajax_update_pause', data)\n\t\tthis.requestQueue.push(data)\n\t\tif (this.sendingRequest) return\n\t\tthis.sendingRequest = true\n\t\twhile (this.requestQueue.length !== 0) {\n\t\t\tlet data = this.requestQueue.shift()\n\t\t\t//console.log(data)\n\t\t\tlet updatePauseResult\n\t\t\ttry {\n\t\t\t\tupdatePauseResult = await axios.post('/ajax_update_pause', data)\n\t\t\t}\n\t\t\tcatch(e) {\n\t\t\t\twindow.alert('無法連線')\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t\t//console.log(updatePauseResult.data)\n\t\t\tif (!updatePauseResult.data.success) {\n\t\t\t\talert(updatePauseResult.data.msg)\n\t\t\t\twindow.history.go(0)\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tthis.sendingRequest = false\n\t\tif (this.toFlush) {\n\t\t\tthis.state = END\n\t\t\tthis.onStateChange(END)\n\t\t\tthis.onAllSaved()\n\t\t} else {\n\t\t\tthis.state = SAVED\n\t\t\tthis.onStateChange(SAVED)\n\t\t}\n\t}\n\tflush(onAllSaved) {\n\t\tif (this.state === SAVED || this.state === START) {\n\t\t\tthis.state = END\n\t\t\tthis.onStateChange(END)\n\t\t\tonAllSaved()\n\t\t\treturn\n\t\t} else if (this.state === UNSAVED || this.state === SAVING) {\n\t\t\tif (this.timer !== null) {\n\t\t\t\tclearTimeout(this.timer)\n\t\t\t\tthis.timer = null\n\t\t\t}\n\t\t\tthis.toFlush = true\n\t\t\tthis.queueRequest()\n\t\t\tthis.onAllSaved = onAllSaved\n\t\t}\n\t}\n\trestartTimer() {\n\t\tif (this.timer !== null) {\n\t\t\tclearTimeout(this.timer)\n\t\t}\n\t\tthis.timer = setTimeout(() => {\n\t\t\tthis.timer = null\n\t\t\tthis.queueRequest()\n\t\t}, COUNT_DOWN_MSEC)\n\t\tthis.state = UNSAVED\n\t\tthis.onStateChange(UNSAVED)\n\t}\n\teditStage(epochNum, stage) {\n\t\tif (this.state === END) return\n\t\tthis.stages[epochNum] = stage\n\t\tthis.restartTimer()\n\t}\n\teditEvent(action, eventId, timeFrom, timeTo, channelId, type) {\n\t\tif (this.state === END) return\n\t\tlet event = {\n\t\t\taction: action,\n\t\t\ttimeFrom: timeFrom,\n\t\t\ttimeTo: timeTo,\n\t\t\teventId: eventId,\n\t\t\tchannelId: channelId,\n\t\t\ttype: type\n\t\t}\n\t\tthis.events.push(event)\n\t\tthis.restartTimer()\n\t}\n\teditCurrentWindow(upperTimeFrom, lowerTimeFrom, upperTimeInterval, lowerTimeInterval, cursorLine) {\n\t\tif (this.state === END) return\n\t\tthis.currentWindow = {\n\t\t\tupperTimeFrom: upperTimeFrom,\n\t\t\tlowerTimeFrom: lowerTimeFrom,\n\t\t\tupperTimeInterval: upperTimeInterval,\n\t\t\tlowerTimeInterval: lowerTimeInterval,\n\t\t\tcursorLine: cursorLine\n\t\t}\n\t\tthis.restartTimer()\n\t}\n}\n\nexport default PauseRequestManager","let jump = {\n\tupperTimeFrom: 0,\n\tlowerTimeFrom: 0,\n\tupperTimeInterval: '30 sec',\n\tlowerTimeInterval: '30 sec',\n\tcursorLine: 0\n}\nlet upperData = []\nfor (let i = 0; i < 10; i++) {\n\tupperData.push({\n\t\tlineWidth: 1,\n\t\tdataLength: 6000,\n\t\tdata: function(x) {\n\t\t\treturn 0\n\t\t},\n\t\tmin: -1,\n\t\tmax: 1,\n\t\tcolor: 'black',\n\t\tchannelId: i + 1,\n\t\tzoomable: false\n\t})\n}\nlet lowerData = []\nfor (let i = 10; i < 20; i++) {\n\tlowerData.push({\n\t\tlineWidth: 1,\n\t\tdataLength: 6000,\n\t\tdata: function(x) {\n\t\t\treturn 0\n\t\t},\n\t\tmin: -1,\n\t\tmax: 1,\n\t\tcolor: 'black',\n\t\tchannelId: i + 1,\n\t\tzoomable: false\n\t})\n}\nexport {\n\tjump,\n\tupperData,\n\tlowerData\n}","function getChannelEvents(channelId) {\n\tlet channelIdToArrayOfEvents = {\n\t\t1: [],\n\t\t2: ['ARO SPONT'],\n\t\t3: [],\n\t\t4: [],\n\t\t5: [],\n\t\t6: [],\n\t\t7: [],\n\t\t8: [],\n\t\t9: [],\n\t\t10: [],\n\t\t11: [],\n\t\t12: ['Obstructive Apnea', 'Central Apnea', 'Mixed Apnea', 'Obstructive Hypopnea', 'Central Hypopnea', 'Mixed Hypopnea', 'Unsure Respiratory Event', 'Respiratory Artifact', 'Respiratory Paradox', 'Cheyne Stokes Breathing', 'RERA'],\n\t\t13: ['Obstructive Apnea', 'Central Apnea', 'Mixed Apnea', 'Obstructive Hypopnea', 'Central Hypopnea', 'Mixed Hypopnea', 'Unsure Respiratory Event', 'Respiratory Artifact', 'Respiratory Paradox', 'Cheyne Stokes Breathing', 'RERA'],\n\t\t14: ['Obstructive Apnea', 'Central Apnea', 'Mixed Apnea', 'Obstructive Hypopnea', 'Central Hypopnea', 'Mixed Hypopnea', 'Unsure Respiratory Event', 'Respiratory Artifact', 'Respiratory Paradox', 'Cheyne Stokes Breathing', 'RERA'],\n\t\t15: ['Obstructive Apnea', 'Central Apnea', 'Mixed Apnea', 'Obstructive Hypopnea', 'Central Hypopnea', 'Mixed Hypopnea', 'Unsure Respiratory Event', 'Respiratory Artifact', 'Respiratory Paradox', 'Cheyne Stokes Breathing', 'RERA'],\n\t\t16: ['SpO2 Desat', 'SpO2 Artifact'],\n\t\t17: ['Limb movement (Left)'],\n\t\t18: ['Limb movement (Right)'],\n\t\t19: [],\n\t\t20: [],\n\t}\n\treturn channelIdToArrayOfEvents[channelId]\n}\n\nexport default getChannelEvents","let dataDisplay = {\n\t1: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -62.5,\n\t\toriginalMax: 62.5,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'black',\n\t\tzoomable: true,\n\t\tupper: true,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t2: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -62.5,\n\t\toriginalMax: 62.5,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'black',\n\t\tzoomable: true,\n\t\tupper: true,\n\t\tdraggable: true,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t3: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -62.5,\n\t\toriginalMax: 62.5,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'black',\n\t\tzoomable: true,\n\t\tupper: true,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t4: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -62.5,\n\t\toriginalMax: 62.5,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'black',\n\t\tzoomable: true,\n\t\tupper: true,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t5: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -62.5,\n\t\toriginalMax: 62.5,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'black',\n\t\tzoomable: true,\n\t\tupper: true,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t6: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -62.5,\n\t\toriginalMax: 62.5,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'black',\n\t\tzoomable: true,\n\t\tupper: true,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t7: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -62.5,\n\t\toriginalMax: 62.5,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'blue',\n\t\tzoomable: true,\n\t\tupper: true,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t8: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -62.5,\n\t\toriginalMax: 62.5,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'blue',\n\t\tzoomable: true,\n\t\tupper: true,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t9: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -62.5,\n\t\toriginalMax: 62.5,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'black',\n\t\tzoomable: true,\n\t\tupper: true,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t10: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -1,\n\t\toriginalMax: 1,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'red',\n\t\tzoomable: true,\n\t\tupper: true,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t11: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -0.5,\n\t\toriginalMax: 0.5,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'hotpink',\n\t\tzoomable: true,\n\t\tupper: false,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t12: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -0.96,\n\t\toriginalMax: 0.96,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'green',\n\t\tzoomable: true,\n\t\tupper: false,\n\t\tdraggable: true,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t13: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -416.665,\n\t\toriginalMax: 416.665,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'black',\n\t\tzoomable: true,\n\t\tupper: false,\n\t\tdraggable: true,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t14: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -104.165,\n\t\toriginalMax: 104.165,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'green',\n\t\tzoomable: true,\n\t\tupper: false,\n\t\tdraggable: true,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t15: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -104.165,\n\t\toriginalMax: 104.165,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'green',\n\t\tzoomable: true,\n\t\tupper: false,\n\t\tdraggable: true,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t16: {\n\t\tlineWidth: 1,\n\t\toriginalMin: 50,\n\t\toriginalMax: 100,\n\t\tmaxZoom: 0,\n\t\tminZoom: -10,\n\t\tcolor: 'black',\n\t\tzoomable: true,\n\t\tupper: false,\n\t\tdraggable: true,\n\t\tshowDesat: true,\n\t\tshowLocalExtreme: true\n\t},\n\t17: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -100,\n\t\toriginalMax: 100,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'maroon',\n\t\tzoomable: true,\n\t\tupper: false,\n\t\tdraggable: true,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t18: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -100,\n\t\toriginalMax: 100,\n\t\tmaxZoom: 5,\n\t\tminZoom: -5,\n\t\tcolor: 'maroon',\n\t\tzoomable: true,\n\t\tupper: false,\n\t\tdraggable: true,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t},\n\t19: {\n\t\tlineWidth: 1,\n\t\toriginalMin: 0,\n\t\toriginalMax: 300,\n\t\tcolor: 'black',\n\t\tzoomable: false,\n\t\tupper: false,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: true\n\t},\n\t20: {\n\t\tlineWidth: 1,\n\t\toriginalMin: -2.5,\n\t\toriginalMax: 2.5,\n\t\tcolor: 'maroon',\n\t\tzoomable: false,\n\t\tupper: false,\n\t\tdraggable: false,\n\t\tshowDesat: false,\n\t\tshowLocalExtreme: false\n\t}\n}\n\nexport default dataDisplay","let channelNameToChannelId = {\n\t'C3M2': 1,\n\t'C4M1': 2,\n\t'F3M2': 3,\n\t'F4M1': 4,\n\t'O1M2': 5,\n\t'O2M1': 6,\n\t'E1M2': 7,\n\t'E2M2': 8,\n\t'EMGR': 9,\n\t'ECG': 10,\n\t'Sound': 11,\n\t'NPress': 12,\n\t'Therm': 13,\n\t'Thor': 14,\n\t'Abdo': 15,\n\t'SpO2': 16,\n\t'LimbL': 17,\n\t'LimbR': 18,\n\t'Pulse': 19,\n\t'Position': 20\n}\n\nexport default channelNameToChannelId","const units = Object.freeze({\n\t1: 'uv',\n\t2: 'uv',\n\t3: 'uv',\n\t4: 'uv',\n\t5: 'uv',\n\t6: 'uv',\n\t7: 'uv',\n\t8: 'uv',\n\t9: 'uv',\n\t10: 'mv',\n\t11: 'mv',\n\t12: 'cmH2O',\n\t13: 'uv',\n\t14: 'uv',\n\t15: 'uv',\n\t16: '%',\n\t17: 'uv',\n\t18: 'uv',\n\t19: 'bpm',\n\t20: ''\n})\n\nexport default units","const channelColors = Object.freeze({\n\t1: {},\n\t2: {\n\t\t'ARO SPONT': '#b5c4f0'\n\t},\n\t3: {},\n\t4: {},\n\t5: {},\n\t6: {},\n\t7: {},\n\t8: {},\n\t9: {},\n\t10: {},\n\t11: {},\n\t12: {\n\t\t'Obstructive Apnea': '#bf8975',\n\t\t'Central Apnea': '#ff7a7a',\n\t\t'Mixed Apnea': '#292e34',\n\t\t'Obstructive Hypopnea': '#c4e2e2',\n\t\t'Central Hypopnea': '#343961',\n\t\t'Mixed Hypopnea':'#ffb9b9',\n\t\t'Unsure Respiratory Event': '#ff4719',\n\t\t'Respiratory Artifact': '#ffdab9',\n\t\t'Respiratory Paradox': '#90251d',\n\t\t'Cheyne Stokes Breathing': '#e3a624',\n\t\t'RERA': '#1c2039'\n\t},\n\t13: {\n\t\t'Obstructive Apnea': '#bf8975',\n\t\t'Central Apnea': '#ff7a7a',\n\t\t'Mixed Apnea': '#292e34',\n\t\t'Obstructive Hypopnea': '#c4e2e2',\n\t\t'Central Hypopnea': '#343961',\n\t\t'Mixed Hypopnea':'#ffb9b9',\n\t\t'Unsure Respiratory Event': '#ff4719',\n\t\t'Respiratory Artifact': '#ffdab9',\n\t\t'Respiratory Paradox': '#90251d',\n\t\t'Cheyne Stokes Breathing': '#e3a624',\n\t\t'RERA': '#1c2039'\n\t},\n\t14: {\n\t\t'Obstructive Apnea': '#bf8975',\n\t\t'Central Apnea': '#ff7a7a',\n\t\t'Mixed Apnea': '#292e34',\n\t\t'Obstructive Hypopnea': '#c4e2e2',\n\t\t'Central Hypopnea': '#343961',\n\t\t'Mixed Hypopnea':'#ffb9b9',\n\t\t'Unsure Respiratory Event': '#ff4719',\n\t\t'Respiratory Artifact': '#ffdab9',\n\t\t'Respiratory Paradox': '#90251d',\n\t\t'Cheyne Stokes Breathing': '#e3a624',\n\t\t'RERA': '#1c2039'\n\t},\n\t15: {\n\t\t'Obstructive Apnea': '#bf8975',\n\t\t'Central Apnea': '#ff7a7a',\n\t\t'Mixed Apnea': '#292e34',\n\t\t'Obstructive Hypopnea': '#c4e2e2',\n\t\t'Central Hypopnea': '#343961',\n\t\t'Mixed Hypopnea':'#ffb9b9',\n\t\t'Unsure Respiratory Event': '#ff4719',\n\t\t'Respiratory Artifact': '#ffdab9',\n\t\t'Respiratory Paradox': '#90251d',\n\t\t'Cheyne Stokes Breathing': '#e3a624',\n\t\t'RERA': '#1c2039'\n\t},\n\t16: {\n\t\t'SpO2 Desat': '#71c3fa',\n\t\t'SpO2 Artifact': '#e88db7'\n\t},\n\t17: {\n\t\t'Limb movement (Left)': '#e88db7'\n\t},\n\t18: {\n\t\t'Limb movement (Right)': '#e88db7'\n\t},\n\t19: {},\n\t20: {},\n})\n\nexport default channelColors","let upperLabelsForScale = {\n\t1: {\n\t\tgravity: 'center',\n\t\tchannelId: 1,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t2: {\n\t\tgravity: 'center',\n\t\tchannelId: 2,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t3: {\n\t\tgravity: 'center',\n\t\tchannelId: 3,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t4: {\n\t\tgravity: 'center',\n\t\tchannelId: 4,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t5: {\n\t\tgravity: 'center',\n\t\tchannelId: 5,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t6: {\n\t\tgravity: 'center',\n\t\tchannelId: 6,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t7: {\n\t\tgravity: 'center',\n\t\tchannelId: 7,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t8: {\n\t\tgravity: 'center',\n\t\tchannelId: 8,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t9: {\n\t\tgravity: 'center',\n\t\tchannelId: 9,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t10: {\n\t\tgravity: 'center',\n\t\tchannelId: 10,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t}\n}\n\nlet lowerLabelsForScale = {\n\t11: {\n\t\tgravity: 'center',\n\t\tchannelId: 11,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t12: {\n\t\tgravity: 'center',\n\t\tchannelId: 12,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t13: {\n\t\tgravity: 'center',\n\t\tchannelId: 13,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t14: {\n\t\tgravity: 'center',\n\t\tchannelId: 14,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t15: {\n\t\tgravity: 'center',\n\t\tchannelId: 15,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t17: {\n\t\tgravity: 'center',\n\t\tchannelId: 17,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t},\n\t18: {\n\t\tgravity: 'center',\n\t\tchannelId: 18,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'red',\n\t\tfont: '12px Arial'\n\t}\n}\n\nexport {\n\tupperLabelsForScale,\n\tlowerLabelsForScale\n}","let upperConstLabels = [\n\t{\n\t\tlabel: 'C3M2',\n\t\tgravity: 'center',\n\t\tchannelId: 1,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'C4M1',\n\t\tgravity: 'center',\n\t\tchannelId: 2,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'F3M2',\n\t\tgravity: 'center',\n\t\tchannelId: 3,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'F4M1',\n\t\tgravity: 'center',\n\t\tchannelId: 4,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'O1M2',\n\t\tgravity: 'center',\n\t\tchannelId: 5,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'O2M1',\n\t\tgravity: 'center',\n\t\tchannelId: 6,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'E1M2',\n\t\tgravity: 'center',\n\t\tchannelId: 7,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'E2M1',\n\t\tgravity: 'center',\n\t\tchannelId: 8,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'EMGR',\n\t\tgravity: 'center',\n\t\tchannelId: 9,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'ECG',\n\t\tgravity: 'center',\n\t\tchannelId: 10,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}\n]\n\nlet lowerConstLabels = [\n\t{\n\t\tlabel: 'Sound',\n\t\tgravity: 'center',\n\t\tchannelId: 11,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'NPress',\n\t\tgravity: 'center',\n\t\tchannelId: 12,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'Therm',\n\t\tgravity: 'center',\n\t\tchannelId: 13,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'Thor',\n\t\tgravity: 'center',\n\t\tchannelId: 14,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'Abdo',\n\t\tgravity: 'center',\n\t\tchannelId: 15,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'SpO2',\n\t\tgravity: 'center',\n\t\tchannelId: 16,\n\t\tvalue: 75,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: '%',\n\t\tgravity: 'center',\n\t\tchannelId: 16,\n\t\tvalue: 75,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'black',\n\t\tfont: '12px Arial'\n\t}, {\n\t\tlabel: '100',\n\t\tgravity: 'right',\n\t\tchannelId: 16,\n\t\tvalue: 100,\n\t\txOffset: -3,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '8px Arial'\n\t}, {\n\t\tlabel: 'LimbL',\n\t\tgravity: 'center',\n\t\tchannelId: 17,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'LimbR',\n\t\tgravity: 'center',\n\t\tchannelId: 18,\n\t\tvalue: 0,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'Pulse',\n\t\tgravity: 'center',\n\t\tchannelId: 19,\n\t\tvalue: 150,\n\t\txOffset: 0,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'bpm',\n\t\tgravity: 'center',\n\t\tchannelId: 19,\n\t\tvalue: 150,\n\t\txOffset: 0,\n\t\tyOffset: 7,\n\t\tcolor: 'black',\n\t\tfont: '12px Arial'\n\t}, {\n\t\tlabel: '300',\n\t\tgravity: 'right',\n\t\tchannelId: 19,\n\t\tvalue: 300,\n\t\txOffset: -3,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '8px Arial'\n\t}, {\n\t\tlabel: '0',\n\t\tgravity: 'right',\n\t\tchannelId: 19,\n\t\tvalue: 0,\n\t\txOffset: -3,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '8px Arial'\n\t}, {\n\t\tlabel: 'Position',\n\t\tgravity: 'left',\n\t\tchannelId: 20,\n\t\tvalue: 0,\n\t\txOffset: 3,\n\t\tyOffset: -7,\n\t\tcolor: 'black',\n\t\tfont: '15px Arial'\n\t}, {\n\t\tlabel: 'Right',\n\t\tgravity: 'right',\n\t\tchannelId: 20,\n\t\tvalue: 2,\n\t\txOffset: -3,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '8px Arial'\n\t}, {\n\t\tlabel: 'Supine',\n\t\tgravity: 'right',\n\t\tchannelId: 20,\n\t\tvalue: 1,\n\t\txOffset: -3,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '8px Arial'\n\t}, {\n\t\tlabel: 'Left',\n\t\tgravity: 'right',\n\t\tchannelId: 20,\n\t\tvalue: 0,\n\t\txOffset: -3,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '8px Arial'\n\t}, {\n\t\tlabel: 'Prone',\n\t\tgravity: 'right',\n\t\tchannelId: 20,\n\t\tvalue: -1,\n\t\txOffset: -3,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '8px Arial'\n\t}, {\n\t\tlabel: 'Upright',\n\t\tgravity: 'right',\n\t\tchannelId: 20,\n\t\tvalue: -2,\n\t\txOffset: -3,\n\t\tyOffset: 0,\n\t\tcolor: 'black',\n\t\tfont: '8px Arial'\n\t}\n]\n\nexport {\n\tupperConstLabels,\n\tlowerConstLabels\n}","function getVerticalLines(time) {\n\tlet verticalLines10 = []\n\tfor (let i = 0; i <= 20; i++) {\n\t\tverticalLines10.push({\n\t\t\tsecond: i / 2,\n\t\t\tdashed: i % 5 !== 0,\n\t\t\tcolor: '#73e68c'\n\t\t})\n\t}\n\tlet verticalLines30 = []\n\tfor (let i = 0; i <= 60; i++) {\n\t\tverticalLines30.push({\n\t\t\tsecond: i / 2,\n\t\t\tdashed: i % 5 !== 0,\n\t\t\tcolor: '#73e68c'\n\t\t})\n\t}\n\tlet verticalLines60 = []\n\tfor (let i = 0; i <= 2; i++) {\n\t\tverticalLines60.push({\n\t\t\tsecond: i * 30,\n\t\t\tdashed: false,\n\t\t\tcolor: '#73e68c'\n\t\t})\n\t}\n\tlet verticalLine120 = []\n\tfor (let i = 0; i <= 4; i++) {\n\t\tverticalLine120.push({\n\t\t\tsecond: i * 30,\n\t\t\tdashed: false,\n\t\t\tcolor: '#73e68c'\n\t\t})\n\t}\n\tlet verticalLine180 = []\n\tfor (let i = 0; i <= 6; i++) {\n\t\tverticalLine180.push({\n\t\t\tsecond: i * 30,\n\t\t\tdashed: false,\n\t\t\tcolor: '#73e68c'\n\t\t})\n\t}\n\tlet verticalLine300 = []\n\tfor (let i = 0; i <= 10; i++) {\n\t\tverticalLine300.push({\n\t\t\tsecond: i * 30,\n\t\t\tdashed: false,\n\t\t\tcolor: '#73e68c'\n\t\t})\n\t}\n\tlet verticalLine600 = []\n\tfor (let i = 0; i <= 20; i++) {\n\t\tverticalLine600.push({\n\t\t\tsecond: i * 30,\n\t\t\tdashed: false,\n\t\t\tcolor: '#73e68c'\n\t\t})\n\t}\n\tlet lines = {\n\t\t'10 sec': verticalLines10,\n\t\t'30 sec': verticalLines30,\n\t\t'1 min': verticalLines60,\n\t\t'2 min': verticalLine120,\n\t\t'3 min': verticalLine180,\n\t\t'5 min': verticalLine300,\n\t\t'10 min': verticalLine600\n\t}\n\treturn lines[time]\n}\nfunction getUpperHorizontalLines() {\n\treturn [{\n\t\tchannelId: 2,\n\t\tvalue: 37.5,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 2,\n\t\tvalue: -37.5,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 3,\n\t\tvalue: 37.5,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 3,\n\t\tvalue: -37.5,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 4,\n\t\tvalue: 37.5,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 4,\n\t\tvalue: -37.5,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 2,\n\t\tvalue: 0,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: true\n\t}, {\n\t\tchannelId: 3,\n\t\tvalue: 0,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: true\n\t}, {\n\t\tchannelId: 4,\n\t\tvalue: 0,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: true\n\t}]\n}\nfunction getLowerHorizontalLines() {\n\treturn [{\n\t\tchannelId: 16,\n\t\tvalue: 50,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 16,\n\t\tvalue: 60,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 16,\n\t\tvalue: 70,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 16,\n\t\tvalue: 80,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 16,\n\t\tvalue: 90,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 16,\n\t\tvalue: 100,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 20,\n\t\tvalue: -2,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 20,\n\t\tvalue: -1,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 20,\n\t\tvalue: 0,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 20,\n\t\tvalue: 1,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}, {\n\t\tchannelId: 20,\n\t\tvalue: 2,\n\t\tdashed: false,\n\t\tcolor: '#73e68c',\n\t\tzoomToShow: false\n\t}]\n}\nexport {\n\tgetVerticalLines,\n\tgetUpperHorizontalLines,\n\tgetLowerHorizontalLines\n}","import React, { Component } from 'react'\nimport axios from 'axios'\nimport ScoringNavbar from './components/ScoringNavbar'\nimport Hypnogram from './components/Hypnogram'\n//import MultichannelChart from './components/MultichannelChart'\nimport SignalPanel from './components/SignalPanel'\n//import SplitPane from 'react-split-pane'\nimport './edit.css'\n//import EventInfoWindow from './components/EventInfoWindow'\nimport EventsDataStructure from './EventsDataStructure'\nimport TimeController from './TimeController'\nimport DataManager from './DataManager'\nimport DataRequestManager from './DataRequestManager'\nimport PauseRequestManager from './PauseRequestManager'\nimport getChannelEvents from './config/getChannelEvents'\nimport dataDisplay from './config/dataDisplay'\nimport channelNameToChannelId from './config/channelNameToChannelId'\nimport units from './config/units'\nimport channelColors from './config/channelColors'\nimport constants from './const'\nimport formatSecond from './components/functions/formatSecond'\nimport {\n\tupperLabelsForScale,\n\tlowerLabelsForScale\n} from './config/labelsForScale'\nimport {\n\tjump\n} from './config/FakeData'\nimport {\n\tupperConstLabels,\n\tlowerConstLabels\n} from './config/constLabels'\nimport {\n\tgetVerticalLines,\n\tgetUpperHorizontalLines,\n\tgetLowerHorizontalLines\n} from './config/lines'\n//import { HashRouter } from 'react-router-dom'\nconst stageIntToString = Object.freeze({\n\t0: 'W',\n\t1: '1',\n\t2: '2',\n\t3: '3',\n\t'-1': 'R',\n\t'-2': '?',\n\t10: ''\n})\n\nclass Scoring extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tdisplay: false,\n\t\t\tcursorSecond: 0,\n\t\t\tupperSecondFrom: 0,\n\t\t\tupperSecondTo: 30,\n\t\t\tlowerSecondFrom: 0,\n\t\t\tlowerSecondTo: 30,\n\t\t\tupperData: [],\n\t\t\tlowerData: [],\n\t\t\tpreUpperData: [],\n\t\t\tpreLowerData: [],\n\t\t\tnextUpperData: [],\n\t\t\tnextLowerData: [],\n\t\t\tupperLabels: [],\n\t\t\tlowerLabels: [],\n\t\t\tupperEvents: [],\n\t\t\tlowerEvents: [],\n\t\t\tupperSelectedItem: '30 sec',\n\t\t\tlowerSelectedItem: '30 sec',\n\t\t\tstages: [],\n\t\t\tupperStages: [],\n\t\t\tlowerStages: [],\n\t\t\tanswer: null, // 機器判讀結果\n\t\t\thasAnswer: false,\n\t\t\tenableShowAnswerCheckbox: true,\n\t\t\tcurrentEpoch: 0,\n\t\t\t\n\t\t\tpsgFileId: parseInt(props.match.params.id),\n\t\t\twhich: parseInt(props.match.params.which), // 0 -> 編輯中\n\t\t\teditable: parseInt(props.match.params.which) === 0,\n\t\t\t\n\t\t\tstateToShow: '',\n\t\t\t\n\t\t\thasStagesBeenLoaded: false,\n\t\t\thasNotCompleted: true,\n\t\t\thasSubmitted: false,\n\t\t\t\n\t\t\tmodeArr: null,\n\t\t\t\n\t\t}\n\t\t\n\t\tthis.jumpTo = this.jumpTo.bind(this)\n\t\tthis.addEvent = this.addEvent.bind(this)\n\t\tthis.deleteEvent = this.deleteEvent.bind(this)\n\t\tthis.moveCursor = this.moveCursor.bind(this)\n\t\tthis.zoomChannel = this.zoomChannel.bind(this)\n\t\tthis.setEventType = this.setEventType.bind(this)\n\t\tthis.getEventInfo = this.getEventInfo.bind(this)\n\t\t\n\t\tthis.upperSelectItem = this.upperSelectItem.bind(this)\n\t\tthis.lowerSelectItem = this.lowerSelectItem.bind(this)\n\t\t\n\t\tthis.setStateFromDataStructure = this.setStateFromDataStructure.bind(this)\n\t\t\n\t\t// some data struct\n\t\tthis.eventDataStructure = null // new EventsDataStructure([])\n\t\tthis.timeController = null // new TimeController(jump, totalEpoch)\n\t\tthis.stagesDataStructure = null // new Array(totalEpoch)\n\t\tthis.answer = null // 機器判讀結果\n\t\t//this.stagesDataStructure.fill(0)\n\t\tthis.dataManager = null\n\t\tthis.dataRequestManager = null\n\t\tthis.pauseRequestManager = null\n\t\tthis.onKeyDown = this.onKeyDown.bind(this)\n\t\tthis.onRequestComplete = this.onRequestComplete.bind(this)\n\t\tthis.onStateChange = this.onStateChange.bind(this)\n\t\t\n\t\tthis.onShowAnswerChecked = this.onShowAnswerChecked.bind(this)\n\t\t\n\t\tthis.bufferTimer = null\n\t}\n\tsetStateFromDataStructure() {\n\t\tlet cursorSecond = this.timeController.getCursorSecond()\n\t\tlet upperSecondFrom = this.timeController.getUpperSecondFrom()\n\t\tlet upperSecondTo = this.timeController.getUpperSecondTo()\n\t\tlet lowerSecondFrom = this.timeController.getLowerSecondFrom()\n\t\tlet lowerSecondTo = this.timeController.getLowerSecondTo()\n\n\n\t\tlet upperData = this.dataManager.getData(upperSecondFrom, upperSecondTo, true)\n\t\tlet lowerData = this.dataManager.getData(lowerSecondFrom, lowerSecondTo, false)\n\n\t\t// 上五頁資料\n\t\tlet upperDataPeriod = upperSecondTo - upperSecondFrom;\n\t\tlet preUpperData=[],preLowerData=[],nextUpperData=[],nextLowerData=[];\n\t\tfor(let i=0;i<5;i++){\n\t\t\tpreUpperData[i] = this.dataManager.getData(upperSecondFrom - (i+1)*upperDataPeriod, upperSecondTo - (i+1)*upperDataPeriod, true);\n\t\t}\n\t\tlet lowerDataPeriod = lowerSecondTo - lowerSecondFrom;\n\t\tfor(let i=0;i<5;i++){\n\t\t\tpreLowerData[i] = this.dataManager.getData(lowerSecondFrom - (i+1)*lowerDataPeriod, lowerSecondTo - (i+1)*lowerDataPeriod, false);\n\t\t}\n\t\t// // 下五頁資料\n\t\tfor(let i=0;i<5;i++){\n\t\t\tnextUpperData[i] = this.dataManager.getData(upperSecondFrom + (i+1)*upperDataPeriod, upperSecondTo + (i+1)*upperDataPeriod, true);\n\t\t}\n\t\tfor(let i=0;i<5;i++){\n\t\t\tnextLowerData[i] = this.dataManager.getData(lowerSecondFrom + (i+1)*lowerDataPeriod, lowerSecondTo + (i+1)*lowerDataPeriod, false);\n\t\t}\n\t\t// console.log('upperData');\n\t\t//console.log(upperData);\n\t\t// console.log('preUpperData');\n\t\t// console.log(preUpperData);\n\t\t// console.log('nextUpperData');\n\t\t// console.log(nextUpperData);\n\n\t\tlet upperLabels = []\n\t\tfor (let i = 0; i < upperConstLabels.length; i++) {\n\t\t\tupperLabels.push(upperConstLabels[i])\n\t\t}\n\t\tlet upperChannelKeys = Object.keys(upperLabelsForScale)\n\t\tfor (let i = 0; i < upperChannelKeys.length; i++) {\n\t\t\tlet channelId = upperChannelKeys[i]\n\t\t\tlet label = Object.assign({label: this.dataManager.getChannelRange(true, channelId) + ' ' + units[channelId]}, upperLabelsForScale[channelId])\n\t\t\tupperLabels.push(label)\n\t\t}\n\t\t\n\t\tlet lowerLabels = []\n\t\tfor (let i = 0; i < lowerConstLabels.length; i++) {\n\t\t\tlowerLabels.push(lowerConstLabels[i])\n\t\t}\n\t\tlet lowerChannelKeys = Object.keys(lowerLabelsForScale)\n\t\tfor (let i = 0; i < lowerChannelKeys.length; i++) {\n\t\t\tlet channelId = lowerChannelKeys[i]\n\t\t\tlet label = Object.assign({label: this.dataManager.getChannelRange(false, channelId) + ' ' + units[channelId]}, lowerLabelsForScale[channelId])\n\t\t\tlowerLabels.push(label)\n\t\t}\n\n\t\tlet upperChannels = new Set([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])\n\t\t\n\t\tlet upperEventIds = this.eventDataStructure.getEventIdsByTimeRangeAndChannelIds(upperSecondFrom, upperSecondTo, upperChannels)\n\t\t//console.log(upperEventIds)\n\t\tlet upperEvents = this.eventDataStructure.getEventObjectsByEventIds(upperEventIds)\n\t\t\n\t\tlet lowerChannels = new Set([11, 12, 13, 14, 15, 16, 17, 18, 19, 20])\n\t\tlet lowerEventIds = this.eventDataStructure.getEventIdsByTimeRangeAndChannelIds(lowerSecondFrom, lowerSecondTo, lowerChannels)\n\t\tlet lowerEvents = this.eventDataStructure.getEventObjectsByEventIds(lowerEventIds)\n\t\t//console.log('events', upperEvents, lowerEvents)\n\t\tlet upperSelectedItem = this.timeController.getUpperTimeInterval()\n\t\tlet lowerSelectedItem = this.timeController.getLowerTimeInterval()\n\t\t\n\t\tlet stages = Array.from(this.stagesDataStructure)\n\t\t\n\t\tlet upperEpochFrom = Math.floor(upperSecondFrom / 30)\n\t\tlet upperEpochLength = Math.floor((upperSecondTo - upperSecondFrom) / 30)\n\t\tupperEpochLength = upperEpochLength === 0 ? 1 : upperEpochLength\n\t\tlet upperStages = []\n\t\tfor (let i = 0; i < upperEpochLength; i++) {\n\t\t\tlet epoch = upperEpochFrom + i\n\t\t\tupperStages.push(stageIntToString[stages[epoch]])\n\t\t}\n\t\tlet lowerEpochFrom = Math.floor(lowerSecondFrom / 30)\n\t\tlet lowerEpochLength = Math.floor((lowerSecondTo - lowerSecondFrom) / 30)\n\t\tlowerEpochLength = lowerEpochLength === 0 ? 1 : lowerEpochLength\n\t\tlet lowerStages = []\n\t\tfor (let i = 0; i < lowerEpochLength; i++) {\n\t\t\tlet epoch = lowerEpochFrom + i\n\t\t\tlowerStages.push(stageIntToString[stages[epoch]])\n\t\t}\n\t\tlet currentEpoch = this.timeController.getCurrentEpoch()\n\t\tlet buffered = this.dataManager.getBuffered()\n\t\tlet hasNotCompleted = false\n\t\tfor (let i = 0; i < stages.length; i++) {\n\t\t\t\n\t\t\tif (stages[i] === 10) {\n\t\t\t\t//console.log('stages[' + i + '] === 10')\n\t\t\t\thasNotCompleted = true\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\t//console.log('hasNotCompleted', hasNotCompleted)\n\t\tthis.setState({\n\t\t\tdisplay: true,\n\t\t\tupperLoading: !this.dataManager.hasData(upperSecondFrom, upperSecondTo, true),\n\t\t\tlowerLoading: !this.dataManager.hasData(lowerSecondFrom, lowerSecondTo, false),\n\t\t\tcursorSecond: cursorSecond,\n\t\t\tupperSecondFrom: upperSecondFrom,\n\t\t\tupperSecondTo: upperSecondTo,\n\t\t\tlowerSecondFrom: lowerSecondFrom,\n\t\t\tlowerSecondTo: lowerSecondTo,\n\t\t\tupperData: upperData,\n\t\t\tlowerData: lowerData,\n\t\t\tpreUpperData: preUpperData,\n\t\t\tpreLowerData: preLowerData,\n\t\t\tnextUpperData: nextUpperData,\n\t\t\tnextLowerData: nextLowerData,\n\t\t\tupperLabel: upperLabels,\n\t\t\tlowerLabel: lowerLabels,\n\t\t\tupperEvents: upperEvents,\n\t\t\tlowerEvents: lowerEvents,\n\t\t\tupperSelectedItem: upperSelectedItem,\n\t\t\tlowerSelectedItem: lowerSelectedItem,\n\t\t\tstages: stages,\n\t\t\tupperStages: upperStages,\n\t\t\tlowerStages: lowerStages,\n\t\t\tcurrentEpoch: currentEpoch,\n\t\t\tbuffered: buffered,\n\t\t\thasNotCompleted: hasNotCompleted,\n\t\t})\n\t}\n\n\trender() {\n\t\t//console.log('render')\n\t\t/*\n\t\tlet upperStages = []\n\t\tlet upperEpochNum = Math.floor((this.state.upperSecondTo - this.state.upperSecondFrom) / 30)\n\t\tupperEpochNum = upperEpochNum == 0 ? 1 : upperEpochNum // 如果不到一個epoch，就當作有一個epoch\n\t\tlet upperEpochFrom = Math.floor(this.state.upperSecondFrom / 30)\n\t\tfor (let i = 0; i < upperEpochNum; i++) {\n\t\t\tupperStages.push()\n\t\t}\n\t\t*/\n\t\t//console.log(this.timeController.getUpperTimeInterval())\n\t\t//console.log(this.state.upperEvents)\n\t\t//if (this.state.display === false) return <></>\n\t\t// if (!this.state.hasNetwork) {\n\t\t// \talert('目前是斷線狀態\\n資料將不會儲存\\n請檢查網路連線');\n\t\t// \twindow.location.reload();\n\t\t// \treturn (\n\t\t// \t\t<div>\n\t\t// \t\t\t<h2>目前是斷線狀態</h2>\n\t\t// \t\t\t<h2>資料將不會儲存</h2>\n\t\t// \t\t\t<h2>請檢查網路連線</h2>\n\t\t// \t\t</div>\n\t\t// \t)\n\t\t// }\n\t\t// else {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<ScoringNavbar\n\t\t\t\t\t\tonComplete={() => {\n\t\t\t\t\t\t\tvar add_temp=0\n\t\t\t\t\t\t\tfor(let i in this.eventDataStructure.epochNumToEventId){\n\t\t\t\t\t\t\t\tadd_temp=add_temp+this.eventDataStructure.epochNumToEventId[i].size\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(add_temp>0){\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\thasSubmitted: true\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tthis.pauseRequestManager.flush(async () => {\n\t\t\t\t\t\t\t\t\tlet submitStageResult = await axios.post('/ajax_submit_stage', { psgFileId: this.state.psgFileId })\n\t\t\t\t\t\t\t\t\tif (!submitStageResult.data.success) {\n\t\t\t\t\t\t\t\t\t\talert(submitStageResult.data.msg)\n\t\t\t\t\t\t\t\t\t\twindow.history.go(0)\n\t\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\twindow.location.href=\"#\"\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tvar answer = window.confirm(\"偵測到您尚未有arousal和呼吸事件，請問是否繳交?\");\n\t\t\t\t\t\t\t\tif (answer) {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\thasSubmitted: true\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tthis.pauseRequestManager.flush(async () => {\n\t\t\t\t\t\t\t\t\t\tlet submitStageResult = await axios.post('/ajax_submit_stage', { psgFileId: this.state.psgFileId })\n\t\t\t\t\t\t\t\t\t\tif (!submitStageResult.data.success) {\n\t\t\t\t\t\t\t\t\t\t\talert(submitStageResult.data.msg)\n\t\t\t\t\t\t\t\t\t\t\twindow.history.go(0)\n\t\t\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twindow.location.href=\"#\"\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t  } else {\n\t\t\t\t\t\t\t\t\t//未繳交\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tlogout={() => {\n\t\t\t\t\t\t\tconsole.log('logout')\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstateToShow={this.state.stateToShow}\n\t\t\t\t\t\teditable={this.state.editable}\n\t\t\t\t\t\taccount={this.state.account}\n\t\t\t\t\t\tonLogout={() => {\n\t\t\t\t\t\t\twindow.location.href=\"#\"\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonShowAnswerChecked={this.onShowAnswerChecked}\n\t\t\t\t\t\tenableShowAnswerCheckbox={this.state.enableShowAnswerCheckbox}\n\t\t\t\t\t\thasAnswer={this.state.hasAnswer}\n\t\t\t\t\t\tbuttonDisabled={(this.state.hasNotCompleted) || (this.state.hasSubmitted)}\n\t\t\t\t\t\thasStagesBeenLoaded={this.state.hasStagesBeenLoaded} />\n\t\t\t\t\t{this.state.display && (!this.state.hasSubmitted) ?\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Hypnogram\n\t\t\t\t\t\t\t\tleftSpace={20}\n\t\t\t\t\t\t\t\trightSpace={10}\n\t\t\t\t\t\t\t\ttopSpace={5}\n\t\t\t\t\t\t\t\tbottomSpace={5}\n\t\t\t\t\t\t\t\tstages={this.state.stages}\n\t\t\t\t\t\t\t\tmodeArr={this.state.modeArr}\n\t\t\t\t\t\t\t\tanswer={this.state.answer}\n\t\t\t\t\t\t\t\tcurrentEpoch={this.state.currentEpoch}\n\t\t\t\t\t\t\t\tjumpTo={this.jumpTo}\n\t\t\t\t\t\t\t\tbuffered={this.state.buffered}/>\n\t\t\t\t\t\t\t{<div style={{\n\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\tfontWeight: 'bold',\n\t\t\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\t\t\tright: '0px',\n\t\t\t\t\t\t\t\theight: '0px',\n\t\t\t\t\t\t\t\ttop: '52px',\n\t\t\t\t\t\t\t\tcolor: 'red',\n\t\t\t\t\t\t\t\tfontSize: '24px',\n\t\t\t\t\t\t\t\topacity: '40%'\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'Cursor: ' + formatSecond(this.state.cursorSecond) +\n\t\t\t\t\t\t\t\t\t' Epoch: ' + (parseInt(this.state.currentEpoch) + 1) +\n\t\t\t\t\t\t\t\t\t' - ' + stageIntToString[this.state.stages[this.state.currentEpoch]]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t<SignalPanel\n\t\t\t\t\t\t\t\tupperLoading={this.state.upperLoading}\n\t\t\t\t\t\t\t\tlowerLoading={this.state.lowerLoading}\n\t\t\t\t\t\t\t\teditable={this.state.editable}\n\t\t\t\t\t\t\t\taddEvent={this.addEvent}\n\t\t\t\t\t\t\t\tdeleteEvent={this.deleteEvent}\n\t\t\t\t\t\t\t\tsetEventType={this.setEventType}\n\t\t\t\t\t\t\t\tmoveCursor={this.moveCursor}\n\t\t\t\t\t\t\t\tzoomChannel={this.zoomChannel}\n\t\t\t\t\t\t\t\tgetEventInfo={this.getEventInfo}\n\t\t\t\t\t\t\t\tgetChannelEvents={getChannelEvents}\n\t\t\t\t\t\t\t\tcursorSecond={this.state.cursorSecond}\n\t\t\t\t\t\t\t\tupperSecondFrom={this.state.upperSecondFrom}\n\t\t\t\t\t\t\t\tupperSecondTo={this.state.upperSecondTo}\n\t\t\t\t\t\t\t\tupperData={this.state.upperData}\n\t\t\t\t\t\t\t\tpreUpperData={this.state.preUpperData}\n\t\t\t\t\t\t\t\tnextUpperData={this.state.nextUpperData}\n\t\t\t\t\t\t\t\tlowerSecondFrom={this.state.lowerSecondFrom}\n\t\t\t\t\t\t\t\tlowerSecondTo={this.state.lowerSecondTo}\n\t\t\t\t\t\t\t\tlowerData={this.state.lowerData}\n\t\t\t\t\t\t\t\tpreLowerData={this.state.preLowerData}\n\t\t\t\t\t\t\t\tnextLowerData={this.state.nextLowerData}\n\t\t\t\t\t\t\t\tupperEvents={this.state.upperEvents}\n\t\t\t\t\t\t\t\tlowerEvents={this.state.lowerEvents}\n\t\t\t\t\t\t\t\tupperLabels={this.state.upperLabel}\n\t\t\t\t\t\t\t\tlowerLabels={this.state.lowerLabel}\n\t\t\t\t\t\t\t\tupperVerticalLines={getVerticalLines(this.timeController.getUpperTimeInterval())}\n\t\t\t\t\t\t\t\tupperHorizontalLines={getUpperHorizontalLines()}\n\t\t\t\t\t\t\t\tlowerVerticalLines={getVerticalLines(this.timeController.getLowerTimeInterval())}\n\t\t\t\t\t\t\t\tlowerHorizontalLines={getLowerHorizontalLines()}\n\t\t\t\t\t\t\t\tupperStages={this.state.upperStages}\n\t\t\t\t\t\t\t\tlowerStages={this.state.lowerStages}\n\t\t\t\t\t\t\t\tupperSelectItem={this.upperSelectItem}\n\t\t\t\t\t\t\t\tupperItems={['10 sec', '30 sec', '1 min', '2 min', '3 min', '5 min', '10 min']}\n\t\t\t\t\t\t\t\tupperSelectedItem={this.state.upperSelectedItem}\n\t\t\t\t\t\t\t\tlowerSelectItem={this.lowerSelectItem}\n\t\t\t\t\t\t\t\tlowerItems={['10 sec', '30 sec', '1 min', '2 min', '3 min', '5 min', '10 min']}\n\t\t\t\t\t\t\t\tlowerSelectedItem={this.state.lowerSelectedItem}\n\t\t\t\t\t\t\t\tpsgFileId={this.state.psgFileId} />\n\t\t\t\t\t\t</> : null\n\t\t\t\t\t}\n\t\t\t\t</>\n\t\t\t)\n\t\t// }\n\t}\n\tasync componentDidMount() {\n\t\t// this.interval = setInterval(() => this.networkDetect(), 3000)\n\n\t\tlet account = (await axios.post('/ajax_who_am_i', {})).data.account\n\t\tif (account === undefined) {\n\t\t\twindow.location.href = \"#\"\n\t\t\treturn\n\t\t}\n\t\tthis.setState({\n\t\t\taccount: account\n\t\t})\n\t\tlet chSegRes = (await axios.post('/ajax_ch_seg', { psgFileId: this.state.psgFileId })).data\n\t\tif (!chSegRes.success) {\n\t\t\talert(chSegRes.msg)\n\t\t\twindow.history.go(0)\n\t\t\treturn\n\t\t}\n\t\t//console.log(chSegRes)\n\t\tlet upperChannels = chSegRes.upperChannels\n\t\tlet lowerChannels = chSegRes.lowerChannels\n\t\tlet paramForDataManagerConstructor = []\n\t\tfor (let i = 0; i < upperChannels.length; i++) {\n\t\t\tlet channel = upperChannels[i]\n\t\t\tlet channelId = channelNameToChannelId[channel.channelName]\n\t\t\tlet element = {}\n\t\t\telement.offset = channel.offset\n\t\t\telement.dataLength = channel.length\n\t\t\telement.channelId = channelId\n\t\t\telement = Object.assign(element, dataDisplay[channelId])\n\t\t\tparamForDataManagerConstructor.push(element)\n\t\t}\n\t\tfor (let i = 0; i < lowerChannels.length; i++) {\n\t\t\tlet channel = lowerChannels[i]\n\t\t\tlet channelId = channelNameToChannelId[channel.channelName]\n\t\t\tlet element = {}\n\t\t\telement.offset = channel.offset\n\t\t\telement.dataLength = channel.length\n\t\t\telement.channelId = channelId\n\t\t\telement = Object.assign(element, dataDisplay[channelId])\n\t\t\tparamForDataManagerConstructor.push(element)\n\t\t}\n\t\tlet totalEpoch = chSegRes.totalEpochNumber\n\t\t\n\t\t// test\n\t\t//this.answer = new Array(totalEpoch)\n\t\t//this.answer.fill(0)\n\t\t\n\t\tthis.dataManager = new DataManager(paramForDataManagerConstructor, totalEpoch)\n\t\tlet psgFileId = parseInt(this.props.match.params.id)\n\t\tthis.dataRequestManager = new DataRequestManager(psgFileId)\n\t\tif (this.state.editable) {\n\t\t\tlet loadPauseResult = await axios.post('/ajax_load_pause', {psgFileId: psgFileId})\n\t\t\tif (!loadPauseResult.data.success) {\n\t\t\t\talert(loadPauseResult.data.msg)\n\t\t\t\twindow.history.go(0)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.eventDataStructure = new EventsDataStructure(loadPauseResult.data.events, channelColors, {13: 12, 14: 12, 15: 12}, {12: new Set([13, 14, 15])})\n\t\t\tthis.timeController = new TimeController(loadPauseResult.data.jump, totalEpoch)\n\t\t\n\t\t\tthis.stagesDataStructure = loadPauseResult.data.stages\n\t\t\tthis.pauseRequestManager = new PauseRequestManager(psgFileId, this.onStateChange)\n\t\t} else {\n\t\t\tlet loadResultResult = await axios.post('/ajax_load_result', {psgFileId: psgFileId, scoringTimes: this.state.which})\n\t\t\tif (!loadResultResult.data.success) {\n\t\t\t\talert(loadResultResult.data.msg)\n\t\t\t\twindow.history.go(0)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlet events = loadResultResult.data.events\n\t\t\tfor (let i = 1; i <= events.length; i++) {\n\t\t\t\tevents[i - 1].eventId = i\n\t\t\t}\n\t\t\t//console.log(events)\n\t\t\tthis.eventDataStructure = new EventsDataStructure(events, channelColors, {13: 12, 14: 12, 15: 12}, {12: new Set([13, 14, 15])})\n\t\t\tthis.timeController = new TimeController(jump, totalEpoch)\n\t\t\tthis.stagesDataStructure = loadResultResult.data.stages\n\t\t\tthis.pauseRequestManager = null\n\t\t\t\n\t\t\tlet statResult = await axios.post('/ajax_load_stat', { psgFileId: psgFileId })\n\t\t\tif (!statResult.data.success) {\n\t\t\t\talert(statResult.data.msg)\n\t\t\t\twindow.history.go(0)\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\tlet stat = statResult.data.stat\n\t\t\t\tlet epochAndStageToCount = new Array(totalEpoch)\n\t\t\t\tfor (let i = 0; i < epochAndStageToCount.length; i++) {\n\t\t\t\t\tepochAndStageToCount[i] = {\n\t\t\t\t\t\t'-1': 0,\n\t\t\t\t\t\t'-2': 0,\n\t\t\t\t\t\t'0': 0,\n\t\t\t\t\t\t'1': 0,\n\t\t\t\t\t\t'2': 0,\n\t\t\t\t\t\t'3': 0\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let i = 0; i < stat.length; i++) {\n\t\t\t\t\tlet epoch = stat[i].epoch\n\t\t\t\t\tlet stage = stat[i].stage\n\t\t\t\t\tlet count = stat[i].count\n\t\t\t\t\tepochAndStageToCount[epoch][stage] = count\n\t\t\t\t}\n\t\t\t\tlet modeArr = new Array(totalEpoch)\n\t\t\t\tfor (let i = 0; i < epochAndStageToCount.length; i++) {\n\t\t\t\t\tlet max = 0\n\t\t\t\t\tlet maxKey = null\n\t\t\t\t\tlet keys = Object.keys(epochAndStageToCount[i])\n\t\t\t\t\tfor (let j = 0; j < keys.length; j++) {\n\t\t\t\t\t\tif (epochAndStageToCount[i][keys[j]] > max) {\n\t\t\t\t\t\t\tmax = epochAndStageToCount[i][keys[j]]\n\t\t\t\t\t\t\tmaxKey = keys[j]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tmodeArr[i] = parseInt(maxKey)\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tmodeArr: modeArr\n\t\t\t\t})\n\t\t\t\tconsole.log(modeArr)\n\t\t\t}\n\t\t\t//console.log(statResult)\n\t\t\t//console.log(this.eventDataStructure)\n\t\t}\n\t\tlet hasAnswerResult = await axios.post('/ajax_has_answer', { psgFileId: psgFileId })\n\t\tif (!hasAnswerResult.data.success) {\n\t\t\talert(hasAnswerResult.data.msg)\n\t\t\twindow.history.go(0)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tthis.setState({\n\t\t\thasStagesBeenLoaded: true,\n\t\t\thasAnswer: hasAnswerResult.data.hasAnswer\n\t\t\t//hasNotCompleted: true\n\t\t})\n\t\tthis.checkDataAndSendRequest()\n\t\tdocument.addEventListener('keydown', this.onKeyDown);\n\t\t//console.log(this)\n\t}\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.interval)\n\t\t//console.log('unmount')\n\t\tthis.unmount = true\n\t\tdocument.removeEventListener('keydown', this.onKeyDown);\n\t}\n\tonKeyDown(e) {\n\t\t//console.log('key down')\n\t\t//console.log(this)\n\t\tif (this.stagesDataStructure === null || this.timeController === null) return\n\t\tif (this.state.hasSubmitted) return\n\t\tlet currentEpoch = this.timeController.getCurrentEpoch()\n\t\t\n\t\tif (e.keyCode === 39 || e.keyCode === 40 || e.keyCode === 34) { // right arrow\n\t\t\tthis.timeController.pageDown()\n\t\t\tif (this.state.editable) this.pauseRequestManager.editCurrentWindow(\n\t\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\t\tthis.timeController.getCursorSecond()\n\t\t\t)\n\t\t\tthis.checkDataAndSendRequest()\n\t\t\tthis.setStateFromDataStructure()\n\t\t\t//this.startBuffer()\n\t\t} else if (e.keyCode === 37 || e.keyCode === 38 || e.keyCode === 33) { // left arrow\n\t\t\tthis.timeController.pageUp()\n\t\t\tif (this.state.editable) this.pauseRequestManager.editCurrentWindow(\n\t\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\t\tthis.timeController.getCursorSecond()\n\t\t\t)\n\t\t\tthis.checkDataAndSendRequest()\n\t\t\tthis.setStateFromDataStructure()\n\t\t\t//this.startBuffer()\n\t\t}\n\t\tif (this.state.editable) if (e.keyCode === 192 || e.keyCode === 96 || e.keyCode === 48) { // wake\n\t\t\tthis.stagesDataStructure[currentEpoch] = 0\n\t\t\tthis.pauseRequestManager.editStage(currentEpoch, 0)\n\t\t\tthis.timeController.nextEpoch()\n\t\t\tthis.pauseRequestManager.editCurrentWindow(\n\t\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\t\tthis.timeController.getCursorSecond()\n\t\t\t)\n\t\t\tthis.checkDataAndSendRequest()\n\t\t\tthis.setStateFromDataStructure()\n\t\t\t//this.startBuffer()\n\t\t} else if (e.keyCode === 49 || e.keyCode === 97) { // n1\n\t\t\tthis.stagesDataStructure[currentEpoch] = 1\n\t\t\tthis.pauseRequestManager.editStage(currentEpoch, 1)\n\t\t\tthis.timeController.nextEpoch()\n\t\t\tthis.pauseRequestManager.editCurrentWindow(\n\t\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\t\tthis.timeController.getCursorSecond()\n\t\t\t)\n\t\t\tthis.checkDataAndSendRequest()\n\t\t\tthis.setStateFromDataStructure()\n\t\t\t//this.startBuffer()\n\t\t} else if (e.keyCode === 50 || e.keyCode === 98) { // n2\n\t\t\tthis.stagesDataStructure[currentEpoch] = 2\n\t\t\tthis.pauseRequestManager.editStage(currentEpoch, 2)\n\t\t\tthis.timeController.nextEpoch()\n\t\t\tthis.pauseRequestManager.editCurrentWindow(\n\t\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\t\tthis.timeController.getCursorSecond()\n\t\t\t)\n\t\t\tthis.checkDataAndSendRequest()\n\t\t\tthis.setStateFromDataStructure()\n\t\t\t//this.startBuffer()\n\t\t} else if (e.keyCode === 51 || e.keyCode === 99) { // n3\n\t\t\tthis.stagesDataStructure[currentEpoch] = 3\n\t\t\tthis.pauseRequestManager.editStage(currentEpoch, 3)\n\t\t\tthis.timeController.nextEpoch()\n\t\t\tthis.pauseRequestManager.editCurrentWindow(\n\t\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\t\tthis.timeController.getCursorSecond()\n\t\t\t)\n\t\t\tthis.checkDataAndSendRequest()\n\t\t\tthis.setStateFromDataStructure()\n\t\t\t//this.startBuffer()\n\t\t} else if (e.keyCode === 53 || e.keyCode === 101) { // rem\n\t\t\tthis.stagesDataStructure[currentEpoch] = -1\n\t\t\tthis.pauseRequestManager.editStage(currentEpoch, -1)\n\t\t\tthis.timeController.nextEpoch()\n\t\t\tthis.pauseRequestManager.editCurrentWindow(\n\t\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\t\tthis.timeController.getCursorSecond()\n\t\t\t)\n\t\t\tthis.checkDataAndSendRequest()\n\t\t\tthis.setStateFromDataStructure()\n\t\t\t//this.startBuffer()\n\t\t} else if (window.event.shiftKey && e.keyCode === 191) { // ?\n\t\t\tthis.stagesDataStructure[currentEpoch] = -2\n\t\t\tthis.pauseRequestManager.editStage(currentEpoch, -2)\n\t\t\tthis.timeController.nextEpoch()\n\t\t\tthis.pauseRequestManager.editCurrentWindow(\n\t\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\t\tthis.timeController.getCursorSecond()\n\t\t\t)\n\t\t\tthis.checkDataAndSendRequest()\n\t\t\tthis.setStateFromDataStructure()\n\t\t\t//this.startBuffer()\n\t\t}\n\t}\n\tstartBuffer() {\n\t\tlet toBuffer = 0\n\t\tif(this.timeController.getCurrentEpoch()<=5){\n\t\t\ttoBuffer = this.dataManager.getNextEpochToBuffer(-1)\n\t\t}else{\n\t\t\ttoBuffer = this.dataManager.getNextEpochToBuffer(this.timeController.getCurrentEpoch()-7)\n\t\t}\n\t\tif (toBuffer !== null) {\n\t\t\t//console.log(toBuffer.epoch)\n\t\t\tthis.dataRequestManager.setRequest(toBuffer.upper ? [toBuffer.epoch] : [], toBuffer.lower ? [toBuffer.epoch] : [], this.onRequestComplete)\n\t\t}\n\t}\n\tonRequestComplete(data) {\n\t\t//console.log(data)\n\t\t//console.log('complete')\n\t\tif (this.unmount) return\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\t//console.log('set data', data[i].upper, data[i].epoch)\n\t\t\tthis.dataManager.setData(data[i].data, data[i].epoch, data[i].upper)\n\t\t}\n\t\tthis.setStateFromDataStructure()\n\t\tthis.startBuffer()\n\t}\n\tcheckDataAndSendRequest() {\n\t\tlet upperSecondFrom = this.timeController.getUpperSecondFrom()\n\t\tlet upperSecondTo = this.timeController.getUpperSecondTo()\n\t\tlet upperNoEpochs = this.dataManager.checkData(upperSecondFrom, upperSecondTo, true)\n\t\t\n\t\tlet lowerSecondFrom = this.timeController.getLowerSecondFrom()\n\t\tlet lowerSecondTo = this.timeController.getLowerSecondTo()\n\t\tlet lowerNoEpochs = this.dataManager.checkData(lowerSecondFrom, lowerSecondTo, false)\n\t\t//console.log('upper second', upperSecondFrom, upperSecondTo)\n\t\t//console.log('lower second', lowerSecondFrom, lowerSecondTo)\n\t\t//console.log('upper no data:', upperNoEpochs, 'lower no data:', lowerNoEpochs)\n\t\t//console.log('lower no data:', lowerNoEpochs)\n\t\tif (upperNoEpochs.length === 0 && lowerNoEpochs.length === 0) {\n\t\t\t//console.log('no request start buffer')\n\t\t\tthis.startBuffer()\n\t\t\treturn\n\t\t}\n\t\tthis.dataRequestManager.setRequest(upperNoEpochs, lowerNoEpochs, (data) => {this.onRequestComplete(data)})\n\t}\n\tjumpTo(epoch) {\n\t\t//console.log('jump to', epoch)\n\t\tthis.timeController.jumpToEpoch(epoch)\n\t\tif (this.state.editable) this.pauseRequestManager.editCurrentWindow(\n\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\tthis.timeController.getCursorSecond()\n\t\t)\n\t\tthis.checkDataAndSendRequest()\n\t\tthis.setStateFromDataStructure()\n\t}\n\taddEvent(channelId, secondFrom, secondTo, type, priority) {\n\t\t//console.log('add event', channelId, secondFrom, secondTo, type, priority)\n\t\tsecondFrom = parseFloat(secondFrom.toFixed(constants.floatToFixed))\n\t\tsecondTo = parseFloat(secondTo.toFixed(constants.floatToFixed))\n\t\tlet maxSec = this.stagesDataStructure.length * 30\n\t\tsecondTo = secondTo > maxSec ? maxSec : secondTo\n\t\tlet addResult = this.eventDataStructure.addEvent(channelId, secondFrom, secondTo, type, priority)\n\t\tfor (let i = 0; i < addResult.overlappedEventId.length; i++) {\n\t\t\tthis.pauseRequestManager.editEvent('delete', addResult.overlappedEventId[i], null, null, null, null)\n\t\t}\n\t\tlet eventObject = this.eventDataStructure.getEventObjectByEventId(addResult.eventId)\n\t\tthis.pauseRequestManager.editEvent('add', addResult.eventId, eventObject.secondFrom, eventObject.secondTo, eventObject.channelId, eventObject.type)\n\t\tthis.setStateFromDataStructure()\n\t}\n\tdeleteEvent(eventId) {\n\t\t//console.log('delete event', eventId)\n\t\tthis.eventDataStructure.deleteEvent(eventId)\n\t\tthis.pauseRequestManager.editEvent('delete', eventId, null, null, null, null)\n\t\tthis.setStateFromDataStructure()\n\t}\n\tmoveCursor(second) {\n\t\t//console.log('move cursor', second)\n\t\tthis.timeController.moveCursor(second)\n\t\tif (this.state.editable) this.pauseRequestManager.editCurrentWindow(\n\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\tthis.timeController.getCursorSecond()\n\t\t)\n\t\tthis.checkDataAndSendRequest()\n\t\tthis.setStateFromDataStructure()\n\t\t//this.startBuffer()\n\t}\n\tzoomChannel(channelId, up) {\n\t\t//console.log('zoom channel', channelId, up)\n\t\tthis.dataManager.zoomChannel(channelId, up)\n\t\tthis.setStateFromDataStructure()\n\t}\n\tupperSelectItem(item) {\n\t\t//console.log('upper select item', item)\n\t\tthis.timeController.setUpperTimeInterval(item)\n\t\tif (this.state.editable) this.pauseRequestManager.editCurrentWindow(\n\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\tthis.timeController.getCursorSecond()\n\t\t)\n\t\tthis.checkDataAndSendRequest()\n\t\tthis.setStateFromDataStructure()\n\t\t//this.startBuffer()\n\t}\n\tlowerSelectItem(item) {\n\t\t//console.log('lower select item', item)\n\t\tthis.timeController.setLowerTimeInterval(item)\n\t\tif (this.state.editable) this.pauseRequestManager.editCurrentWindow(\n\t\t\tthis.timeController.getUpperSecondFrom(),\n\t\t\tthis.timeController.getLowerSecondFrom(),\n\t\t\tthis.timeController.getUpperTimeInterval(),\n\t\t\tthis.timeController.getLowerTimeInterval(),\n\t\t\tthis.timeController.getCursorSecond()\n\t\t)\n\t\tthis.checkDataAndSendRequest()\n\t\tthis.setStateFromDataStructure()\n\t\t//this.startBuffer()\n\t}\n\tsetEventType(eventId, type) {\n\t\t//console.log('set event type', eventId, type)\n\t\tthis.eventDataStructure.setEventType(eventId, type)\n\t\tthis.pauseRequestManager.editEvent('set', eventId, null, null, null, type)\n\t\tthis.setStateFromDataStructure()\n\t}\n\tgetEventInfo(eventId) {\n\t\treturn this.eventDataStructure.getEventObjectByEventId(eventId)\n\t}\n\tonStateChange(state) {\n\t\t//console.log(PauseRequestManager.start)\n\t\t//console.log(state)\n\t\tlet stateToStr = {}\n\t\tstateToStr[PauseRequestManager.get_START()] = ''\n\t\tstateToStr[PauseRequestManager.get_UNSAVED()] = '尚未儲存'\n\t\tstateToStr[PauseRequestManager.get_SAVING()] = '儲存中'\n\t\tstateToStr[PauseRequestManager.get_SAVED()] = '已儲存'\n\t\tstateToStr[PauseRequestManager.get_END()] = '已完成'\n\t\t//console.log(stateToStr)\n\t\tlet stateStr = stateToStr[state]\n\t\tthis.setState({\n\t\t\tstateToShow: stateStr\n\t\t})\n\t}\n\tasync onShowAnswerChecked(checked) {\n\t\tif (checked) {\n\t\t\tif (this.answer === null) {\n\t\t\t\t// ajax to get answer\n\t\t\t\t// let answerResult = await axios.post('/ajax_answer', { psgFileId: this.state.psgFileId })\n\t\t\t\tthis.setState({\n\t\t\t\t\tenableShowAnswerCheckbox: false\n\t\t\t\t})\n\t\t\t\tlet answerResult = await axios.post('/ajax_answer', { psgFileId: this.state.psgFileId })\n\t\t\t\t//console.log(answerResult)\n\t\t\t\tif (!answerResult.data.success) {\n\t\t\t\t\talert(answerResult.data.msg)\n\t\t\t\t\twindow.history.go(0)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.answer = answerResult.data.data\n\t\t\t\tthis.setState({\n\t\t\t\t\tenableShowAnswerCheckbox: true,\n\t\t\t\t\tanswer: this.answer\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\tanswer: this.answer\n\t\t\t\t})\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tanswer: null\n\t\t\t})\n\t\t}\n\t}\n}\n\nexport default Scoring","import React, { Component } from 'react'\nimport axios from 'axios'\nimport Card from 'react-bootstrap/Card'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Alert from 'react-bootstrap/Alert'\nimport CommonNavbar from '../commonComponents/CommonNavbar'\nimport CommonFooter from '../commonComponents/CommonFooter'\n\nclass SetPassword extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.handleSubmit = this.handleSubmit.bind(this)\n\t\tthis.state = {\n\t\t\taccount: null,\n\t\t\terrorMessage: null,\n\t\t\twaitingForResult: false\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<CommonNavbar account={this.state.account} onLogout={() => {\n\t\t\t\t\twindow.location.href=\"/#/\"\n\t\t\t\t}} />\n\t\t\t\t{this.state.account !== null ? <div style={{\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: '50%',\n\t\t\t\t\tleft: '50%',\n\t\t\t\t\ttransform: 'translateX(-50%) translateY(-50%)'}}>\n\t\t\t\t\t<Card style={{width: '30rem'}}>\n\t\t\t\t\t\t<Card.Header as=\"h5\">更改密碼</Card.Header>\n\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t<Form onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t\t\t<Form.Group controlId=\"originalPass\">\n\t\t\t\t\t\t\t\t\t<Form.Label>原來的密碼</Form.Label>\n\t\t\t\t\t\t\t\t\t<Form.Control type=\"password\" />\n\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t<Form.Group controlId=\"newPass\">\n\t\t\t\t\t\t\t\t\t<Form.Label>新密碼</Form.Label>\n\t\t\t\t\t\t\t\t\t<Form.Control type=\"password\" />\n\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t<Form.Group controlId=\"newPass2\">\n\t\t\t\t\t\t\t\t\t<Form.Label>密碼確認</Form.Label>\n\t\t\t\t\t\t\t\t\t<Form.Control type=\"password\" />\n\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.errorMessage ?\n\t\t\t\t\t\t\t\t\t\t<Alert variant=\"danger\">{this.state.errorMessage}</Alert> : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t<Button variant=\"primary\" type=\"submit\" disabled={this.state.waitingForResponse}>\n\t\t\t\t\t\t\t\t\t更改\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t</Card>\n\t\t\t\t</div> : null}\n\t\t\t\t<CommonFooter />\n\t\t\t</>\n\t\t)\n\t}\n\tasync componentDidMount() {\n\t\tlet whoAmIResult = await axios.post('/ajax_who_am_i', {})\n\t\tif (whoAmIResult.data.account === undefined) {\n\t\t\twindow.location.href = \"#\"\n\t\t\treturn\n\t\t}\n\t\tthis.setState({\n\t\t\taccount: whoAmIResult.data.account\n\t\t})\n\t}\n\tasync handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tthis.setState({\n\t\t\twaitingForResponse: true,\n\t\t\terrorMessage: null\n\t\t})\n\t\tlet setPassResult = await axios.post('/ajax_reset_pass', {\n\t\t\toldPass: event.target.elements.originalPass.value,\n\t\t\tnewPass: event.target.elements.newPass.value,\n\t\t\tnewPass2: event.target.elements.newPass2.value\n\t\t})\n\t\tthis.setState({\n\t\t\twaitingForResponse: false\n\t\t})\n\t\tif (setPassResult.data.success) {\n\t\t\twindow.location.href = '/#/'\n\t\t} else {\n\t\t\tconsole.log(setPassResult.data.msg)\n\t\t\tthis.setState({\n\t\t\t\terrorMessage: setPassResult.data.msg\n\t\t\t})\n\t\t}\n\t}\n}\n\nexport default SetPassword","import React, { Component } from 'react'\nimport { HashRouter, Route, Switch } from 'react-router-dom'\nimport Home from './home/Home'\nimport HiddenHome from './home/HiddenHome'\nimport Scoring from './scoring/Scoring'\nimport SetPassword from './setPass/SetPassword'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nclass App extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<HashRouter>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path=\"/\" component={Home} />\n\t\t\t\t\t<Route exact path=\"/hidden\" component={HiddenHome} />\n\t\t\t\t\t<Route exact path=\"/scoring/:id/:which\" component={Scoring} />\n\t\t\t\t\t<Route exact path=\"/setpass\" component={SetPassword} />\n\t\t\t\t</Switch>\n\t\t\t</HashRouter>\n\t\t)\n\t}\n\tcomponentDidMount() {\n\t\tdocument.title = 'Scoring Web'\n\t}\n}\nexport default App\n//import logo from './logo.svg';\n//import './App.css';\n/*\nimport Hypnogram from './components/Hypnogram'\nimport MultichannelChart from './components/MultichannelChart'\nimport SignalPanel from './components/SignalPanel'\nimport SplitPane from 'react-split-pane'\nimport './edit.css'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport EventInfoWindow from './components/EventInfoWindow'\nimport EventsDataStructure from './EventsDataStructure'\n//import { HashRouter } from 'react-router-dom'\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscales: {}, // 各個channel縮放指數\n\t\t\tcurrentEpoch: 0,\n\t\t\tupperTimeInterval: '30 sec',\n\t\t\tlowerTimeInterval: '30 sec'\n\t\t}\n\t\t\n\t\tthis.jumpTo = this.jumpTo.bind(this)\n\t\tthis.addEvent = this.addEvent.bind(this)\n\t\tthis.deleteEvent = this.deleteEvent.bind(this)\n\t\tthis.moveCursor = this.moveCursor.bind(this)\n\t\tthis.zoomChannel = this.zoomChannel.bind(this)\n\t\tthis.setEventType = this.setEventType.bind(this)\n\t\tthis.getEventInfo = this.getEventInfo.bind(this)\n\t\tthis.upperSelectItem = this.upperSelectItem.bind(this)\n\t\tthis.lowerSelectItem = this.lowerSelectItem.bind(this)\n\t}\n\trender() {\n\t\tlet a = new Array(800)//[-10, 1, 1, -10, 3, 3, 0, 0, -10, 1, 1, 2, 3, 3, -10, -10]\n\t\ta.fill(0)\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Hypnogram\n\t\t\t\t\t\tleftSpace={20}\n\t\t\t\t\t\trightSpace={10}\n\t\t\t\t\t\ttopSpace={5}\n\t\t\t\t\t\tbottomSpace={5}\n\t\t\t\t\t\tstages={a}\n\t\t\t\t\t\tcurrentEpoch={this.state.currentEpoch}\n\t\t\t\t\t\tjumpTo={this.jumpTo}\n\t\t\t\t/>\n\t\t\t\t<SignalPanel\n\t\t\t\t\tinteractable={true}\n\t\t\t\t\taddEvent={this.addEvent}\n\t\t\t\t\tdeleteEvent={this.deleteEvent}\n\t\t\t\t\tsetEventType={this.setEventType}\n\t\t\t\t\tmoveCursor={this.moveCursor}\n\t\t\t\t\tzoomChannel={this.zoomChannel}\n\t\t\t\t\t// TODO: getChannelEvents\n\t\t\t\t\tgetChannelEvents={() => {\n\t\t\t\t\t\treturn ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j']\n\t\t\t\t\t}}\n\t\t\t\t\tgetEventInfo={this.getEventInfo}\n\t\t\t\t\tupperSelectItem={this.upperSelectItem}\n\t\t\t\t\tupperItems={['10 sec', '30 sec']}\n\t\t\t\t\tupperSelectedItem={'30 sec'}\n\t\t\t\t\tlowerSelectItem={this.lowerSelectItem}\n\t\t\t\t\tlowerItems={['30 sec', '1 min', '2 min']}\n\t\t\t\t\tlowerSelectedItem={'30 sec'}\n\t\t\t\t/>\n\t\t\t</>\n\t\t)\n\t}\n\tjumpTo(epoch) {\n\t\tthis.setState({\n\t\t\tcurrentEpoch: epoch\n\t\t})\n\t}\n\taddEvent(channelId, secondFrom, secondTo, type, priority) {\n\t\tconsole.log('add event', channelId, secondFrom, secondTo, type, priority)\n\t}\n\tdeleteEvent(eventId) {\n\t\tconsole.log('delete event', eventId)\n\t}\n\tmoveCursor(second) {\n\t\tconsole.log('move cursor', second)\n\t}\n\tzoomChannel(channelId, up) {\n\t\tconsole.log('zoom channel', channelId, up)\n\t}\n\tupperSelectItem(item) {\n\t\tconsole.log('upper select item', item)\n\t}\n\tlowerSelectItem(item) {\n\t\tconsole.log('lower select item', item)\n\t}\n\tsetEventType(eventId, type) {\n\t\tconsole.log('set event type', eventId, type)\n\t}\n\tgetEventInfo(eventId) {\n\t\treturn {\n\t\t\tsecondFrom: 1550.156,\n\t\t\tsecondTo: 1560.64,\n\t\t\tchannelId: 1,\n\t\t\ttype: 'd'\n\t\t}\n\t}\n}\n\nexport default App;\n*/\n/*\nimport React from 'react';\nimport styled from '@emotion/styled';\nimport { HashRouter, Route, Redirect } from 'react-router-dom';\n\n\nimport Sidebar from './components/Sidebar';\n\n// basic examples\nimport BasicHorizontal from './examples/basic/BasicHorizontal';\nimport BasicNested from './examples/basic/BasicNested';\nimport BasicStep from './examples/basic/BasicStep';\nimport BasicVertical from './examples/basic/BasicVertical';\nimport PercentageHorizontal from './examples/basic/PercentageHorizontal';\nimport PercentageVertical from './examples/basic/PercentageVertical';\nimport SnapToPostion from './examples/basic/SnapToPosition';\n\n// advanced examples\nimport InlineStyles from './examples/advanced/InlineStyles';\nimport MultipleHorizontal from './examples/advanced/MultipleHorizontal';\nimport MultipleVertical from './examples/advanced/MultipleVertical';\nimport NestedHorizontal from './examples/advanced/NestedHorizontal';\nimport NestedVertical from './examples/advanced/NestedVertical';\nimport Subcomponent from './examples/advanced/Subcomponent';\n\nimport './edit.css'\n\n\nexport default function App() {\n  return (\n    <HashRouter>\n      <Wrapper>\n        <Sidebar />\n        <Container>\n          <React.StrictMode>\n            <Route\n              exact\n              path=\"/\"\n              render={() => <Redirect to=\"/basic-horizontal\" />}\n            />\n            <Route exact path=\"/basic-horizontal\" component={BasicHorizontal} />\n            <Route exact path=\"/basic-vertical\" component={BasicVertical} />\n            <Route exact path=\"/basic-step\" component={BasicStep} />\n            <Route exact path=\"/basic-nested\" component={BasicNested} />\n            <Route\n              exact\n              path=\"/percentage-vertical\"\n              component={PercentageVertical}\n            />\n            <Route\n              exact\n              path=\"/percentage-horizontal\"\n              component={PercentageHorizontal}\n            />\n            <Route exact path=\"/snap-position\" component={SnapToPostion} />\n            <Route exact path=\"/inline-styles\" component={InlineStyles} />\n            <Route\n              exact\n              path=\"/multiple-vertical\"\n              component={MultipleVertical}\n            />\n            <Route\n              exact\n              path=\"/multiple-horizontal\"\n              component={MultipleHorizontal}\n            />\n            <Route exact path=\"/nested-vertical\" component={NestedVertical} />\n            <Route\n              exact\n              path=\"/nested-horizontal\"\n              component={NestedHorizontal}\n            />\n            <Route exact path=\"/subcomponent\" component={Subcomponent} />\n          </React.StrictMode>\n        </Container>\n      </Wrapper>\n    </HashRouter>\n  );\n}\n*/","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  /*<React.StrictMode>*/\n    <App />\n  /*</React.StrictMode>*/,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fill\":\"fillStyle_fill__3GHgC\",\"redLine\":\"fillStyle_redLine__2jWxf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hypnogram\":\"hypnogramStyle_hypnogram__1E8eM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signalPanel\":\"signalPanelStyle_signalPanel__2lg6T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chartLayer\":\"chartLayerStyle_chartLayer__22Hu0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"timeIntervalDropdown\":\"timeIntervalDropdownStyle_timeIntervalDropdown__gi6Id\"};"],"sourceRoot":""}